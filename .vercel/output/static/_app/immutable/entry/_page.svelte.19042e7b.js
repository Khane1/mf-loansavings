import{S as De,i as Ae,s as $e,e as Ee,b as N,H as _e,h as d,k as y,q as B,l as w,m as b,r as j,n as E,G as p,J as pe,K as hn,u as me,L as lt,p as ht,a as D,c as A,I as Ge,M as Wh,N as nn,O as Ii,P as i_,C as Al,D as $l,E as Nl,F as Rl,g as $,d as C,Q as pn,y as x,z as G,A as q,v as He,f as ze,B as H,R as ot,w as fe,T as Hr,U as he,V as de,W as Qs,X as zr,Y as Cl,o as Nr,Z as fc,_ as Jt,x as hc,$ as o_,a0 as a_,a1 as l_,a2 as u_,a3 as dc,a4 as c_,a5 as f_}from"../chunks/index.b2a16be1.js";import{w as cn,d as h_}from"../chunks/index.e1aac948.js";function d_(t){let e,n,r,s;return{c(){e=y("button"),n=B(t[0]),this.h()},l(i){e=w(i,"BUTTON",{class:!0});var o=b(e);n=j(o,t[0]),o.forEach(d),this.h()},h(){E(e,"class","danger btn mx-2 px-5 py-2 rounded-md text-slate-50 text-xs font-medium svelte-1mpev39")},m(i,o){N(i,e,o),p(e,n),r||(s=[pe(e,"click",function(){hn(t[1])&&t[1].apply(this,arguments)}),pe(e,"keydown",function(){hn(t[1])&&t[1].apply(this,arguments)})],r=!0)},p(i,o){t=i,o&1&&me(n,t[0])},d(i){i&&d(e),r=!1,lt(s)}}}function p_(t){let e,n,r,s;return{c(){e=y("button"),n=B(t[0]),this.h()},l(i){e=w(i,"BUTTON",{class:!0});var o=b(e);n=j(o,t[0]),o.forEach(d),this.h()},h(){E(e,"class","btn mx-2 px-5 py-2 rounded-md text-slate-50 text-xs font-medium svelte-1mpev39")},m(i,o){N(i,e,o),p(e,n),r||(s=[pe(e,"click",function(){hn(t[1])&&t[1].apply(this,arguments)}),pe(e,"keydown",function(){hn(t[1])&&t[1].apply(this,arguments)})],r=!0)},p(i,o){t=i,o&1&&me(n,t[0])},d(i){i&&d(e),r=!1,lt(s)}}}function m_(t){let e;function n(i,o){return i[2]==null||i[2]?p_:d_}let r=n(t),s=r(t);return{c(){s.c(),e=Ee()},l(i){s.l(i),e=Ee()},m(i,o){s.m(i,o),N(i,e,o)},p(i,[o]){r===(r=n(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},i:_e,o:_e,d(i){s.d(i),i&&d(e)}}}function g_(t,e,n){let{title:r=""}=e,{click:s}=e,{danger:i}=e;return t.$$set=o=>{"title"in o&&n(0,r=o.title),"click"in o&&n(1,s=o.click),"danger"in o&&n(2,i=o.danger)},[r,s,i]}class Yt extends De{constructor(e){super(),Ae(this,e,g_,m_,$e,{title:0,click:1,danger:2})}}function __(t){let e,n,r,s;return{c(){e=y("button"),n=B(t[0]),this.h()},l(i){e=w(i,"BUTTON",{style:!0,class:!0});var o=b(e);n=j(o,t[0]),o.forEach(d),this.h()},h(){ht(e,"background-color","#414141"),E(e,"class","w-60 py-3 rounded-full text-white")},m(i,o){N(i,e,o),p(e,n),r||(s=pe(e,"click",function(){hn(t[2])&&t[2].apply(this,arguments)}),r=!0)},p(i,o){t=i,o&1&&me(n,t[0])},d(i){i&&d(e),r=!1,s()}}}function v_(t){let e,n,r,s;return{c(){e=y("button"),n=B(t[0]),this.h()},l(i){e=w(i,"BUTTON",{class:!0});var o=b(e);n=j(o,t[0]),o.forEach(d),this.h()},h(){E(e,"class","active w-60 py-3 rounded-full text-black font-bold svelte-jey5ff")},m(i,o){N(i,e,o),p(e,n),r||(s=pe(e,"click",function(){hn(t[2])&&t[2].apply(this,arguments)}),r=!0)},p(i,o){t=i,o&1&&me(n,t[0])},d(i){i&&d(e),r=!1,s()}}}function y_(t){let e;function n(i,o){return i[1]?v_:__}let r=n(t),s=r(t);return{c(){s.c(),e=Ee()},l(i){s.l(i),e=Ee()},m(i,o){s.m(i,o),N(i,e,o)},p(i,[o]){r===(r=n(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},i:_e,o:_e,d(i){s.d(i),i&&d(e)}}}function w_(t,e,n){let{title:r=""}=e,{isActive:s=!1}=e,{click:i}=e;return t.$$set=o=>{"title"in o&&n(0,r=o.title),"isActive"in o&&n(1,s=o.isActive),"click"in o&&n(2,i=o.click)},[r,s,i]}class b_ extends De{constructor(e){super(),Ae(this,e,w_,y_,$e,{title:0,isActive:1,click:2})}}var qa=function(t,e){return qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},qa(t,e)},Gi=function(){return Gi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Gi.apply(this,arguments)};function pc(t,e,n){if(n||arguments.length===2)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}var mc=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=n}qa(n,r),n.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}(e,t),e}(Error),Qh={},E_=new Set,Cs={};function gs(t,e){if(typeof t=="string"||typeof t=="number"&&!isNaN(t)&&Math.abs(t)!==1/0||t==null||typeof t=="boolean")return t;var n=e.indexOf(t);if(n!==-1)return"#$@__instance__"+n;e.push(t);var r=e.length-1;if(t.constructor===Array){var s=t.map(function(a){return gs(a,e)});return s.unshift("#$@__reference__"+r),s}if(t.constructor===Object){var i=Object.fromEntries(Object.entries(t).map(function(a){return[a[0],gs(a[1],e)]}));return i["#$@__reference__"]=r,i}E_.add(t.constructor);var o={};o=Object.defineProperty(o,"#$@__constructor__",{value:t.constructor.name,enumerable:!0}),o=Object.defineProperty(o,"#$@__reference__",{value:r,enumerable:!0});var l=function(a,u){if(Object.keys(Cs).includes(a.constructor.name))return Cs[a.constructor.name].toPlain(a,function(c){return gs(c,u)})}(t,e);return l!==void 0?Gi(Gi({},l),o):(Object.getOwnPropertyNames(t).forEach(function(a){Object.defineProperty(o,a,{value:gs(t[a],e),enumerable:!0})}),o)}function _s(t,e,n){var r;if(typeof t=="string"&&t.indexOf("#$@__instance__")===0)return n[l=parseInt(t.slice(15))];if(typeof t=="string"||typeof t=="number"||t==null||typeof t=="boolean")return t;if(t.constructor===Array){if(t.length===0)return[];var s=t.shift();if(typeof s!="string"||s.substring(0,16)!=="#$@__reference__"){if(Object.keys(n).length===0)return t.unshift(s),t;throw new mc}var i=[];n[l=s.slice(16)]=i;for(var o=0;o<t.length;o++)i[o]=_s(t[o],e,n);return i}if(t.constructor===Object){var l;if((l=(r=t["#$@__reference__"])!==null&&r!==void 0?r:null)===null){if(Object.keys(n).length===0)return t;throw new mc}if(delete t["#$@__reference__"],!Object.keys(t).includes("#$@__constructor__")){for(var a in i={},n[l]=i,t)i[a]=_s(t[a],e,n);return i}var u=t["#$@__constructor__"];delete t["#$@__constructor__"];var c=function(h,m,g,_){if(Object.keys(Cs).includes(m))return Cs[m].fromPlain(h,function(v){return _s(v,g,_)})}(t,u,e,n);if(c!==void 0)return c;if(!Object.keys(e).includes(u))throw new Error("The class "+u+" is not allowed");var f={};for(var a in n[l]=f,t)f[a]=_s(t[a],e,n);return Object.setPrototypeOf(f,e[u].prototype),f}}function I_(t){Qh[t.name]=t}(function(t,e){t("Date",n=>({time:n.getTime()}),function(n){let r=new Date;return r.setTime(n.time),r}),t("BigInt",n=>({number:n.toString()}),n=>BigInt(n.number)),t("String",n=>({text:n.toString()}),n=>new String(n.text)),t("RegExp",n=>({source:n.source,flags:n.flags}),n=>new RegExp(n.source,n.flags)),t("Number",function(n){let r={nan:!1,infinity:!1,positive:!0,number:null};return Math.abs(n)===1/0?(r.infinity=!0,r.positive=Math.abs(n)===n,r):isNaN(n)?(r.nan=!0,r):(r.number=n.valueOf(),r)},function(n){return n.nan?NaN:n.infinity?1/0*(n.positive?1:-1):new Number(n.number)}),t("Map",(n,r)=>({data:Array.from(n.entries()).map(s=>r(s))}),function(n,r){const s=new Map;return n.data.map(i=>r(i)).forEach(([i,o])=>s.set(i,o)),s}),t("Set",(n,r)=>({data:Array.from(n.values()).map(s=>r(s))}),function(n,r){const s=new Set;return n.data.map(i=>r(i)).forEach(i=>s.add(i)),s}),t("ArrayBuffer",(n,r)=>({data:r(new Uint8Array(n))}),(n,r)=>r(n.data).buffer),t("DataView",(n,r)=>({buffer:r(n.buffer),offset:n.byteOffset,length:n.byteLength}),(n,r)=>new DataView(r(n.buffer),n.offset,n.length)),[Error,EvalError,RangeError,AggregateError,ReferenceError,SyntaxError,TypeError,URIError,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].forEach(n=>e(n))})(function(t,e,n){Cs[t]={toPlain:e,fromPlain:n}},I_);var pr,Pi={};function Kr(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],i=t[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=i(n)):s!=="call"&&s!=="optionalCall"||(n=i((...o)=>n.call(e,...o)),e=void 0)}return n}(pr=Pi).defaults={},pr.set=function(t,e,n){var r=n||{},s=pr.defaults,i=r.expires||s.expires,o=r.domain||s.domain,l=r.path!==void 0?r.path:s.path!==void 0?s.path:"/",a=r.secure!==void 0?r.secure:s.secure,u=r.httponly!==void 0?r.httponly:s.httponly,c=r.samesite!==void 0?r.samesite:s.samesite,f=i?new Date(typeof i=="number"?new Date().getTime()+864e5*i:i):0;document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+e.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(f&&f.getTime()>=0?";expires="+f.toUTCString():"")+(o?";domain="+o:"")+(l?";path="+l:"")+(a?";secure":"")+(u?";httponly":"")+(c?";samesite="+c:"")},pr.get=function(t){for(var e=document.cookie.split(";");e.length;){var n=e.pop(),r=n.indexOf("=");if(r=r<0?n.length:r,decodeURIComponent(n.slice(0,r).replace(/^\s+/,""))===t)return decodeURIComponent(n.slice(r+1))}return null},pr.erase=function(t,e){pr.set(t,"",{expires:-1,domain:e&&e.domain,path:e&&e.path,secure:0,httponly:0})},pr.all=function(){for(var t={},e=document.cookie.split(";");e.length;){var n=e.pop(),r=n.indexOf("=");r=r<0?n.length:r,t[decodeURIComponent(n.slice(0,r).replace(/^\s+/,""))]=decodeURIComponent(n.slice(r+1))}return t};const gc=[],Ol=t=>{(e=>{const n=typeof process<"u"&&Kr([process,"access",r=>r.env,"optionalAccess",r=>r.NODE_ENV])==="production";gc.indexOf(e)!==-1||n||(typeof window>"u"&&(e+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(e),gc.push(e))})(`Unable to find the ${t}. No data will be persisted.`)};let Yh=function(t){return t===void 0?"undefined":JSON.stringify(gs(t,[]))},Ha=function(t,e){if(e===void 0&&(e=void 0),typeof t!="string")return t;if(e===void 0&&(e={}),t!=="undefined"){e=Object.fromEntries(pc(pc([],Object.entries(e),!0),Object.entries(Qh),!0));try{return _s(JSON.parse(t),e,{})}catch{return t}}};function On(t,e,n){const r=e.getValue(n);return r!==null&&t.set(r),e.addListener&&e.addListener(n,s=>{t.set(s)}),t.subscribe(s=>{e.setValue(n,s)}),{...t,delete(){e.deleteValue(n)}}}function _c(){}function T_(t=_c,e=_c){const n=[];return{callListeners(r,s){s!==void 0&&n.filter(({key:i})=>i===r).forEach(({listener:i})=>i(s))},addListener(r,s){n.push({key:r,listener:s}),n.length===1&&t()},removeListener(r,s){const i=n.indexOf({key:r,listener:s});i!==-1&&n.splice(i,1),n.length===0&&e()}}}S_();yn();k_();function Xh(t,e=!1){const n=o=>{const l=o.key;o.storageArea===t&&s(l,Ha(o.newValue))},{removeListener:r,callListeners:s,addListener:i}=T_(()=>{e&&typeof window<"u"&&Kr([window,"optionalAccess",o=>o.addEventListener])&&window.addEventListener("storage",n)},()=>{e&&typeof window<"u"&&Kr([window,"optionalAccess",o=>o.removeEventListener])&&window.removeEventListener("storage",n)});return{addListener:i,removeListener:r,getValue(o){const l=t.getItem(o);return Ha(l)},deleteValue(o){t.removeItem(o)},setValue(o,l){t.setItem(o,Yh(l))}}}function yn(t=!1){return typeof window<"u"&&Kr([window,"optionalAccess",e=>e.localStorage])?Xh(window.localStorage,t):(Ol("window.localStorage"),Pl())}function k_(t=!1){return typeof window<"u"&&Kr([window,"optionalAccess",e=>e.sessionStorage])?Xh(window.sessionStorage,t):(Ol("window.sessionStorage"),Pl())}function S_(){return typeof document>"u"||typeof Kr([document,"optionalAccess",t=>t.cookie])!="string"?(Ol("document.cookies"),Pl()):{getValue(t){const e=Pi.get(t);return Ha(e)},deleteValue(t){Pi.erase(t,{samesite:"Strict"})},setValue(t,e){Pi.set(t,Yh(e),{samesite:"Strict"})}}}var vc;function Pl(){return{getValue:()=>null,deleteValue(){},setValue(){}}}(function(t){t[t.LOCAL=0]="LOCAL",t[t.SESSION=1]="SESSION",t[t.SYNC=2]="SYNC"})(vc||(vc={}));var yc,je={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};je.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,n,r,s,i,o=this._tables[0][4],l=this._tables[1],a=t.length,u=1;if(a!==4&&a!==6&&a!==8)throw new je.exception.invalid("invalid aes key size");for(this._key=[s=t.slice(0),i=[]],e=a;e<4*a+28;e++)r=s[e-1],(e%a==0||a===8&&e%a==4)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[255&r],e%a==0&&(r=r<<8^r>>>24^u<<24,u=u<<1^283*(u>>7))),s[e]=s[e-a]^r;for(n=0;e;n++,e--)r=s[3&n?e:e-4],i[n]=e<=4||n<4?r:l[0][o[r>>>24]]^l[1][o[r>>16&255]]^l[2][o[r>>8&255]]^l[3][o[255&r]]},je.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,n,r,s,i,o,l,a=this._tables[0],u=this._tables[1],c=a[4],f=u[4],h=[],m=[];for(t=0;t<256;t++)m[(h[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!c[e];e^=r||1,n=m[n]||1)for(i=(i=n^n<<1^n<<2^n<<3^n<<4)>>8^255&i^99,c[e]=i,f[i]=e,l=16843009*h[s=h[r=h[e]]]^65537*s^257*r^16843008*e,o=257*h[i]^16843008*i,t=0;t<4;t++)a[t][e]=o=o<<24^o>>>8,u[t][i]=l=l<<24^l>>>8;for(t=0;t<5;t++)a[t]=a[t].slice(0),u[t]=u[t].slice(0)},_crypt:function(t,e){if(t.length!==4)throw new je.exception.invalid("invalid aes block size");var n,r,s,i,o=this._key[e],l=t[0]^o[0],a=t[e?3:1]^o[1],u=t[2]^o[2],c=t[e?1:3]^o[3],f=o.length/4-2,h=4,m=[0,0,0,0],g=this._tables[e],_=g[0],v=g[1],I=g[2],k=g[3],S=g[4];for(i=0;i<f;i++)n=_[l>>>24]^v[a>>16&255]^I[u>>8&255]^k[255&c]^o[h],r=_[a>>>24]^v[u>>16&255]^I[c>>8&255]^k[255&l]^o[h+1],s=_[u>>>24]^v[c>>16&255]^I[l>>8&255]^k[255&a]^o[h+2],c=_[c>>>24]^v[l>>16&255]^I[a>>8&255]^k[255&u]^o[h+3],h+=4,l=n,a=r,u=s;for(i=0;i<4;i++)m[e?3&-i:i]=S[l>>>24]<<24^S[a>>16&255]<<16^S[u>>8&255]<<8^S[255&c]^o[h++],n=l,l=a,a=u,u=c,c=n;return m}},je.bitArray={bitSlice:function(t,e,n){return t=je.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),n===void 0?t:je.bitArray.clamp(t,n-e)},extract:function(t,e,n){var r=Math.floor(-e-n&31);return(-32&(e+n-1^e)?t[e/32|0]<<32-r^t[e/32+1|0]>>>r:t[e/32|0]>>>r)&(1<<n)-1},concat:function(t,e){if(t.length===0||e.length===0)return t.concat(e);var n=t[t.length-1],r=je.bitArray.getPartial(n);return r===32?t.concat(e):je.bitArray._shiftRight(e,r,0|n,t.slice(0,t.length-1))},bitLength:function(t){var e,n=t.length;return n===0?0:(e=t[n-1],32*(n-1)+je.bitArray.getPartial(e))},clamp:function(t,e){if(32*t.length<e)return t;var n=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,n>0&&e&&(t[n-1]=je.bitArray.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:function(t,e,n){return t===32?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(je.bitArray.bitLength(t)!==je.bitArray.bitLength(e))return!1;var n,r=0;for(n=0;n<t.length;n++)r|=t[n]^e[n];return r===0},_shiftRight:function(t,e,n,r){var s,i,o;for(r===void 0&&(r=[]);e>=32;e-=32)r.push(n),n=0;if(e===0)return r.concat(t);for(s=0;s<t.length;s++)r.push(n|t[s]>>>e),n=t[s]<<32-e;return i=t.length?t[t.length-1]:0,o=je.bitArray.getPartial(i),r.push(je.bitArray.partial(e+o&31,e+o>32?n:r.pop(),1)),r},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,n;for(e=0;e<t.length;++e)n=t[e],t[e]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return t}},je.codec.utf8String={fromBits:function(t){var e,n,r="",s=je.bitArray.bitLength(t);for(e=0;e<s/8;e++)!(3&e)&&(n=t[e/4]),r+=String.fromCharCode(n>>>8>>>8>>>8),n<<=8;return decodeURIComponent(escape(r))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,n=[],r=0;for(e=0;e<t.length;e++)r=r<<8|t.charCodeAt(e),(3&e)==3&&(n.push(r),r=0);return 3&e&&n.push(je.bitArray.partial(8*(3&e),r)),n}},je.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,n){var r,s="",i=0,o=je.codec.base64._chars,l=0,a=je.bitArray.bitLength(t);for(n&&(o=o.substr(0,62)+"-_"),r=0;6*s.length<a;)s+=o.charAt((l^t[r]>>>i)>>>26),i<6?(l=t[r]<<6-i,i+=26,r++):(l<<=6,i-=6);for(;3&s.length&&!e;)s+="=";return s},toBits:function(t,e){t=t.replace(/\s|=/g,"");var n,r,s=[],i=0,o=je.codec.base64._chars,l=0;for(e&&(o=o.substr(0,62)+"-_"),n=0;n<t.length;n++){if((r=o.indexOf(t.charAt(n)))<0)throw new je.exception.invalid("this isn't base64!");i>26?(i-=26,s.push(l^r>>>i),l=r<<32-i):l^=r<<32-(i+=6)}return 56&i&&s.push(je.bitArray.partial(56&i,l,1)),s}},je.codec.base64url={fromBits:function(t){return je.codec.base64.fromBits(t,1,1)},toBits:function(t){return je.codec.base64.toBits(t,1)}},je.mode.gcm={name:"gcm",encrypt:function(t,e,n,r,s){var i,o=e.slice(0),l=je.bitArray;return s=s||128,r=r||[],i=je.mode.gcm._ctrMode(!0,t,o,r,n,s),l.concat(i.data,i.tag)},decrypt:function(t,e,n,r,s){var i,o,l=e.slice(0),a=je.bitArray,u=a.bitLength(l);if(r=r||[],(s=s||128)<=u?(o=a.bitSlice(l,u-s),l=a.bitSlice(l,0,u-s)):(o=l,l=[]),i=je.mode.gcm._ctrMode(!1,t,l,r,n,s),!a.equal(i.tag,o))throw new je.exception.corrupt("gcm: tag doesn't match");return i.data},_galoisMultiply:function(t,e){var n,r,s,i,o,l=je.bitArray._xor4;for(s=[0,0,0,0],i=e.slice(0),n=0;n<128;n++){for(t[Math.floor(n/32)]&1<<31-n%32&&(s=l(s,i)),o=(1&i[3])!=0,r=3;r>0;r--)i[r]=i[r]>>>1|(1&i[r-1])<<31;i[0]=i[0]>>>1,o&&(i[0]=i[0]^225<<24)}return s},_ghash:function(t,e,n){var r,s,i=n.length;for(r=e.slice(0),s=0;s<i;s+=4)r[0]^=4294967295&n[s],r[1]^=4294967295&n[s+1],r[2]^=4294967295&n[s+2],r[3]^=4294967295&n[s+3],r=je.mode.gcm._galoisMultiply(r,t);return r},_ctrMode:function(t,e,n,r,s,i){var o,l,a,u,c,f,h,m,g,_,v,I,k=je.bitArray;for(g=n.length,_=k.bitLength(n),v=k.bitLength(r),I=k.bitLength(s),o=e.encrypt([0,0,0,0]),I===96?(l=s.slice(0),l=k.concat(l,[1])):(l=je.mode.gcm._ghash(o,[0,0,0,0],s),l=je.mode.gcm._ghash(o,l,[0,0,Math.floor(I/4294967296),4294967295&I])),a=je.mode.gcm._ghash(o,[0,0,0,0],r),f=l.slice(0),h=a.slice(0),t||(h=je.mode.gcm._ghash(o,a,n)),c=0;c<g;c+=4)f[3]++,u=e.encrypt(f),n[c]^=u[0],n[c+1]^=u[1],n[c+2]^=u[2],n[c+3]^=u[3];return n=k.clamp(n,_),t&&(h=je.mode.gcm._ghash(o,a,n)),m=[Math.floor(v/4294967296),4294967295&v,Math.floor(_/4294967296),4294967295&_],h=je.mode.gcm._ghash(o,h,m),u=e.encrypt(l),h[0]^=u[0],h[1]^=u[1],h[2]^=u[2],h[3]^=u[3],{tag:k.bitSlice(h,0,i),data:n}}},function(t){t[t.EXCEPTION=0]="EXCEPTION",t[t.NO_ENCRYPTION=1]="NO_ENCRYPTION",t[t.NO_STORAGE=2]="NO_STORAGE"}(yc||(yc={}));let To=On(cn([]),typeof window!==void 0?yn():{},"page"),rs=On(cn([]),typeof window!==void 0?yn():{},"screenSize"),wc=cn([]),dn=On(cn([]),typeof window!==void 0?yn():{},"userAuth"),rn=On(cn([]),typeof window!==void 0?yn():{},"business"),ko=On(cn([]),typeof window!==void 0?yn():{},"status"),Ys=On(cn([]),typeof window!==void 0?yn():{},"customers"),So=On(cn([]),typeof window!==void 0?yn():{},"loan"),Ll=On(cn([]),typeof window!==void 0?yn():{},"receipts"),Ml=On(cn([]),typeof window!==void 0?yn():{},"team"),D_=On(cn([]),typeof window!==void 0?yn():{},"email"),bc=(t,e)=>{typeof window!==void 0&&To.update(n=>(console.log(t),{pageName:t,data:e}))};function xe(t,e){return e||e==null?"ugx."+Intl.NumberFormat("en-US").format(t):Intl.NumberFormat("en-US").format(t)}function In(t){return t.toDate().toDateString()}function Wi(t,e){return Math.round(t/e*100)}function A_(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return t=e+"/"+n+"/"+r,{today:t,year:r,month:n,day:e}}function Jh(t){var e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return s+"-"+r+"-"+(parseInt(n)+1)}let Nn={admin:"admin",manager:"manager",cashier:"cashier",fieldAgent:"fieldAgent",unallocated:"unallocated"};function $_(t){return t.role==Nn.manager||t.role==Nn.admin}function N_(){const t=new Date().getTimezoneOffset();return new Date(new Date().getTime()-t*60*1e3).toISOString().split("T")[0]}function Qi(t,e){const r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((s-r)/864e5)}function R_(t){let e,n,r=t[2].name+"",s,i,o,l=In(t[2].opened)+"",a,u,c,f=t[2].nin+"",h,m,g,_=t[2].status+"",v,I,k,S=t[2].contact+"",T,P,M,R=t[2].completed+"",O,F,L,Q=t[2].paid+"",te,re,z;return{c(){e=y("tr"),n=y("td"),s=B(r),i=D(),o=y("td"),a=B(l),u=D(),c=y("td"),h=B(f),m=D(),g=y("td"),v=B(_),I=D(),k=y("td"),T=B(S),P=D(),M=y("td"),O=B(R),F=D(),L=y("td"),te=B(Q),this.h()},l(K){e=w(K,"TR",{class:!0,style:!0});var U=b(e);n=w(U,"TD",{class:!0});var Y=b(n);s=j(Y,r),Y.forEach(d),i=A(U),o=w(U,"TD",{class:!0});var V=b(o);a=j(V,l),V.forEach(d),u=A(U),c=w(U,"TD",{class:!0});var W=b(c);h=j(W,f),W.forEach(d),m=A(U),g=w(U,"TD",{class:!0});var ue=b(g);v=j(ue,_),ue.forEach(d),I=A(U),k=w(U,"TD",{class:!0});var oe=b(k);T=j(oe,S),oe.forEach(d),P=A(U),M=w(U,"TD",{class:!0});var ne=b(M);O=j(ne,R),ne.forEach(d),F=A(U),L=w(U,"TD",{class:!0});var ie=b(L);te=j(ie,Q),ie.forEach(d),U.forEach(d),this.h()},h(){E(n,"class","px-6 py-2 text-sm font-medium text-gray-900whitespace-nowrap"),E(o,"class","px-6 py-2 text-sm font-medium text-gray-900whitespace-nowrap"),E(c,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(g,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(k,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(M,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(L,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(e,"class","bg-slate-50 space-y-4"),ht(e,"cursor","pointer")},m(K,U){N(K,e,U),p(e,n),p(n,s),p(e,i),p(e,o),p(o,a),p(e,u),p(e,c),p(c,h),p(e,m),p(e,g),p(g,v),p(e,I),p(e,k),p(k,T),p(e,P),p(e,M),p(M,O),p(e,F),p(e,L),p(L,te),re||(z=pe(e,"click",t[3]),re=!0)},p(K,[U]){U&4&&r!==(r=K[2].name+"")&&me(s,r),U&4&&l!==(l=In(K[2].opened)+"")&&me(a,l),U&4&&f!==(f=K[2].nin+"")&&me(h,f),U&4&&_!==(_=K[2].status+"")&&me(v,_),U&4&&S!==(S=K[2].contact+"")&&me(T,S),U&4&&R!==(R=K[2].completed+"")&&me(O,R),U&4&&Q!==(Q=K[2].paid+"")&&me(te,Q)},i:_e,o:_e,d(K){K&&d(e),re=!1,z()}}}function C_(t,e,n){let{data:r,isDetail:s,userData:i}=e;const o=()=>(n(1,i=r),n(0,s=!0));return t.$$set=l=>{"data"in l&&n(2,r=l.data),"isDetail"in l&&n(0,s=l.isDetail),"userData"in l&&n(1,i=l.userData)},[s,i,r,o]}class O_ extends De{constructor(e){super(),Ae(this,e,C_,R_,$e,{data:2,isDetail:0,userData:1})}}function P_(){return function(e){return e&&!!e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||"Please enter a valid email"}}function L_(){return function(e){return e!=null&&e!==""||"This field is required"}}function M_(t){return function(n,r){if(!t||t.length===0)return{dirty:r,valid:!0};const s=t.find(i=>i(n)!==!0);return{dirty:r,valid:!s,message:s&&s(n)}}}function U_(...t){const{subscribe:e,set:n}=cn({dirty:!1,valid:!1,message:null}),r=M_(t);function s(i,o){function l(a,u){const c=r(a,u);n(c)}return l(o,!1),{update(a){l(a,!0)}}}return[{subscribe:e},s]}function V_(t){let e,n,r,s;return{c(){e=y("input"),this.h()},l(i){e=w(i,"INPUT",{type:!0,min:!0,class:!0,placeholder:!0}),this.h()},h(){E(e,"type","number"),E(e,"min","0"),E(e,"class","max-w-screen rounded w-full bg-white py-2 px-3 leading-tight focus:outline-blue-600 placeholder:font-normal svelte-b8weoj"),E(e,"placeholder",n=t[1]==null?"Please input name":t[1])},m(i,o){N(i,e,o),nn(e,t[0]),r||(s=pe(e,"input",t[12]),r=!0)},p(i,o){o&2&&n!==(n=i[1]==null?"Please input name":i[1])&&E(e,"placeholder",n),o&1&&Wh(e.value)!==i[0]&&nn(e,i[0])},d(i){i&&d(e),r=!1,s()}}}function F_(t){let e,n,r,s;return{c(){e=y("input"),this.h()},l(i){e=w(i,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){E(e,"type","text"),E(e,"class","max-w-screen rounded w-full bg-white py-2 px-3 leading-tight focus:outline-blue-600 placeholder:font-normal svelte-b8weoj"),E(e,"placeholder",n=t[1]==null?"Please input name":t[1])},m(i,o){N(i,e,o),nn(e,t[0]),r||(s=[pe(e,"keypress",function(){hn(t[2])&&t[2].apply(this,arguments)}),pe(e,"input",t[11])],r=!0)},p(i,o){t=i,o&2&&n!==(n=t[1]==null?"Please input name":t[1])&&E(e,"placeholder",n),o&1&&e.value!==t[0]&&nn(e,t[0])},d(i){i&&d(e),r=!1,lt(s)}}}function B_(t){let e,n,r,s;return{c(){e=y("input"),this.h()},l(i){e=w(i,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){E(e,"type","password"),E(e,"class","max-w-screen rounded w-full bg-white py-2 px-3 leading-tight focus:outline-blue-600 placeholder:font-normal svelte-b8weoj"),E(e,"placeholder",n=t[1]==null?"Please input name":t[1])},m(i,o){N(i,e,o),nn(e,t[0]),r||(s=[pe(e,"keypress",function(){hn(t[2])&&t[2].apply(this,arguments)}),pe(e,"input",t[10])],r=!0)},p(i,o){t=i,o&2&&n!==(n=t[1]==null?"Please input name":t[1])&&E(e,"placeholder",n),o&1&&e.value!==t[0]&&nn(e,t[0])},d(i){i&&d(e),r=!1,lt(s)}}}function j_(t){let e,n,r,s,i,o,l,a=t[0].length>0&&t[5].dirty&&!t[5].valid&&Ec(t);return{c(){e=y("input"),s=D(),a&&a.c(),i=Ee(),this.h()},l(u){e=w(u,"INPUT",{type:!0,name:!0,class:!0,placeholder:!0}),s=A(u),a&&a.l(u),i=Ee(),this.h()},h(){E(e,"type","email"),E(e,"name","text1"),E(e,"class","max-w-screen rounded w-full bg-white py-2 px-3 leading-tight focus:outline-blue-600 placeholder:font-normal svelte-b8weoj"),E(e,"placeholder",n=t[1]==null?"Please input name":t[1]),Ii(e,"field-danger",t[0].length>0&&!t[5].valid),Ii(e,"field-success",t[5].valid)},m(u,c){N(u,e,c),nn(e,t[0]),N(u,s,c),a&&a.m(u,c),N(u,i,c),o||(l=[pe(e,"keypress",function(){hn(t[2])&&t[2].apply(this,arguments)}),pe(e,"input",t[8]),pe(e,"keyup",t[9]),i_(r=t[7].call(null,e,t[0]))],o=!0)},p(u,c){t=u,c&2&&n!==(n=t[1]==null?"Please input name":t[1])&&E(e,"placeholder",n),c&1&&e.value!==t[0]&&nn(e,t[0]),r&&hn(r.update)&&c&1&&r.update.call(null,t[0]),c&33&&Ii(e,"field-danger",t[0].length>0&&!t[5].valid),c&32&&Ii(e,"field-success",t[5].valid),t[0].length>0&&t[5].dirty&&!t[5].valid?a?a.p(t,c):(a=Ec(t),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(u){u&&d(e),u&&d(s),a&&a.d(u),u&&d(i),o=!1,lt(l)}}}function Ec(t){let e,n=t[5].message+"",r;return{c(){e=y("span"),r=B(n),this.h()},l(s){e=w(s,"SPAN",{class:!0});var i=b(e);r=j(i,n),i.forEach(d),this.h()},h(){E(e,"class","validation-hint text-sm svelte-b8weoj")},m(s,i){N(s,e,i),p(e,r)},p(s,i){i&32&&n!==(n=s[5].message+"")&&me(r,n)},d(s){s&&d(e)}}}function x_(t){let e,n;function r(o,l){if(l&2&&(e=null),o[4]=="email")return j_;if(e==null&&(e=o[1].indexOf("password")>-1),e)return B_;if(o[3]==null||o[3]==!0)return F_;if(o[4]=="number")return V_}let s=r(t,-1),i=s&&s(t);return{c(){i&&i.c(),n=Ee()},l(o){i&&i.l(o),n=Ee()},m(o,l){i&&i.m(o,l),N(o,n,l)},p(o,[l]){s===(s=r(o,l))&&i?i.p(o,l):(i&&i.d(1),i=s&&s(o),i&&(i.c(),i.m(n.parentNode,n)))},i:_e,o:_e,d(o){i&&i.d(o),o&&d(n)}}}function q_(t,e,n){let r,{value:s=""}=e,{placeholder:i=""}=e,{keydown:o}=e,{isText:l}=e,{type:a}=e;const[u,c]=U_(L_(),P_());Ge(t,u,v=>n(5,r=v));function f(){s=this.value,n(0,s)}const h=()=>{D_.update(v=>r.valid)};function m(){s=this.value,n(0,s)}function g(){s=this.value,n(0,s)}function _(){s=Wh(this.value),n(0,s)}return t.$$set=v=>{"value"in v&&n(0,s=v.value),"placeholder"in v&&n(1,i=v.placeholder),"keydown"in v&&n(2,o=v.keydown),"isText"in v&&n(3,l=v.isText),"type"in v&&n(4,a=v.type)},u.valid,[s,i,o,l,a,r,u,c,f,h,m,g,_]}class Zt extends De{constructor(e){super(),Ae(this,e,q_,x_,$e,{value:0,placeholder:1,keydown:2,isText:3,type:4})}}function Ic(t,e,n){const r=t.slice();return r[3]=e[n],r}function Tc(t){let e,n=t[3]+"",r,s;return{c(){e=y("th"),r=B(n),s=D(),this.h()},l(i){e=w(i,"TH",{scope:!0,class:!0});var o=b(e);r=j(o,n),s=A(o),o.forEach(d),this.h()},h(){E(e,"scope","col"),E(e,"class","text-sm font-medium px-6 py-3 text-left")},m(i,o){N(i,e,o),p(e,r),p(e,s)},p(i,o){o&1&&n!==(n=i[3]+"")&&me(r,n)},d(i){i&&d(e)}}}function H_(t){let e,n,r,s,i,o,l,a,u,c,f=t[0],h=[];for(let _=0;_<f.length;_+=1)h[_]=Tc(Ic(t,f,_));const m=t[2].default,g=Al(m,t,t[1],null);return{c(){e=y("div"),n=y("div"),r=y("div"),s=y("div"),i=y("table"),o=y("thead"),l=y("tr");for(let _=0;_<h.length;_+=1)h[_].c();a=D(),u=y("tbody"),g&&g.c(),this.h()},l(_){e=w(_,"DIV",{class:!0});var v=b(e);n=w(v,"DIV",{class:!0});var I=b(n);r=w(I,"DIV",{class:!0});var k=b(r);s=w(k,"DIV",{class:!0});var S=b(s);i=w(S,"TABLE",{class:!0});var T=b(i);o=w(T,"THEAD",{class:!0});var P=b(o);l=w(P,"TR",{});var M=b(l);for(let O=0;O<h.length;O+=1)h[O].l(M);M.forEach(d),P.forEach(d),a=A(T),u=w(T,"TBODY",{});var R=b(u);g&&g.l(R),R.forEach(d),T.forEach(d),S.forEach(d),k.forEach(d),I.forEach(d),v.forEach(d),this.h()},h(){E(o,"class","border-b svelte-12vm1wi"),E(i,"class","min-w-full svelte-12vm1wi"),E(s,"class","overflow-hidden"),E(r,"class","py-2 inline-block min-w-full sm:px-6 lg:px-8"),E(n,"class","overflow-x-auto sm:-mx-6 lg:-mx-8"),E(e,"class","flex flex-col")},m(_,v){N(_,e,v),p(e,n),p(n,r),p(r,s),p(s,i),p(i,o),p(o,l);for(let I=0;I<h.length;I+=1)h[I]&&h[I].m(l,null);p(i,a),p(i,u),g&&g.m(u,null),c=!0},p(_,[v]){if(v&1){f=_[0];let I;for(I=0;I<f.length;I+=1){const k=Ic(_,f,I);h[I]?h[I].p(k,v):(h[I]=Tc(k),h[I].c(),h[I].m(l,null))}for(;I<h.length;I+=1)h[I].d(1);h.length=f.length}g&&g.p&&(!c||v&2)&&$l(g,m,_,_[1],c?Rl(m,_[1],v,null):Nl(_[1]),null)},i(_){c||($(g,_),c=!0)},o(_){C(g,_),c=!1},d(_){_&&d(e),pn(h,_),g&&g.d(_)}}}function z_(t,e,n){let{$$slots:r={},$$scope:s}=e,{headers:i}=e;return t.$$set=o=>{"headers"in o&&n(0,i=o.headers),"$$scope"in o&&n(1,s=o.$$scope)},[i,s,r]}class Ul extends De{constructor(e){super(),Ae(this,e,z_,H_,$e,{headers:0})}}function K_(t){let e,n;return{c(){e=y("h1"),n=B(t[0]),this.h()},l(r){e=w(r,"H1",{class:!0});var s=b(e);n=j(s,t[0]),s.forEach(d),this.h()},h(){E(e,"class","text-xl font-semibold")},m(r,s){N(r,e,s),p(e,n)},p(r,[s]){s&1&&me(n,r[0])},i:_e,o:_e,d(r){r&&d(e)}}}function G_(t,e,n){let{title:r=""}=e;return t.$$set=s=>{"title"in s&&n(0,r=s.title)},[r]}class W_ extends De{constructor(e){super(),Ae(this,e,G_,K_,$e,{title:0})}}function Q_(t){let e,n;return{c(){e=y("h1"),n=B(t[0]),this.h()},l(r){e=w(r,"H1",{class:!0});var s=b(e);n=j(s,t[0]),s.forEach(d),this.h()},h(){E(e,"class","text-xl font-medium")},m(r,s){N(r,e,s),p(e,n)},p(r,[s]){s&1&&me(n,r[0])},i:_e,o:_e,d(r){r&&d(e)}}}function Y_(t,e,n){let{title:r=""}=e;return t.$$set=s=>{"title"in s&&n(0,r=s.title)},[r]}class Rn extends De{constructor(e){super(),Ae(this,e,Y_,Q_,$e,{title:0})}}function kc(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P,M,R,O;const F=t[10].default,L=Al(F,t,t[9],null),Q=[J_,X_],te=[];function re(z,K){return z[0]==!0?0:1}return k=re(t),S=te[k]=Q[k](t),{c(){e=y("div"),n=y("div"),r=y("div"),s=y("div"),i=y("h3"),o=B(t[2]),l=D(),a=y("button"),u=y("span"),c=B("×"),f=D(),h=y("div"),L&&L.c(),m=D(),g=y("div"),_=y("button"),v=B("Close"),I=D(),S.c(),T=D(),P=y("div"),this.h()},l(z){e=w(z,"DIV",{class:!0});var K=b(e);n=w(K,"DIV",{class:!0});var U=b(n);r=w(U,"DIV",{class:!0});var Y=b(r);s=w(Y,"DIV",{class:!0});var V=b(s);i=w(V,"H3",{class:!0});var W=b(i);o=j(W,t[2]),W.forEach(d),l=A(V),a=w(V,"BUTTON",{class:!0});var ue=b(a);u=w(ue,"SPAN",{class:!0});var oe=b(u);c=j(oe,"×"),oe.forEach(d),ue.forEach(d),V.forEach(d),f=A(Y),h=w(Y,"DIV",{class:!0});var ne=b(h);L&&L.l(ne),ne.forEach(d),m=A(Y),g=w(Y,"DIV",{class:!0});var ie=b(g);_=w(ie,"BUTTON",{class:!0,type:!0});var ce=b(_);v=j(ce,"Close"),ce.forEach(d),I=A(ie),S.l(ie),ie.forEach(d),Y.forEach(d),U.forEach(d),K.forEach(d),T=A(z),P=w(z,"DIV",{class:!0}),b(P).forEach(d),this.h()},h(){E(i,"class","text-xl font-semibold"),E(u,"class","text-slate-500 h-6 w-6 text-2xl block "),E(a,"class","p-1 ml-auto bg-transparent border-0 text-slate-600 float-right text-3xl leading-none font-semibold outline-none focus:outline-none"),E(s,"class","flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t"),E(h,"class","relative p-6 flex-auto"),E(_,"class","text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"),E(_,"type","button"),E(g,"class","flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b"),E(r,"class","border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none"),E(n,"class","relative w-auto my-6 mx-auto max-w-3xl"),E(e,"class","overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex"),E(P,"class","opacity-25 fixed inset-0 z-40 bg-black")},m(z,K){N(z,e,K),p(e,n),p(n,r),p(r,s),p(s,i),p(i,o),p(s,l),p(s,a),p(a,u),p(u,c),p(r,f),p(r,h),L&&L.m(h,null),p(r,m),p(r,g),p(g,_),p(_,v),p(g,I),te[k].m(g,null),N(z,T,K),N(z,P,K),M=!0,R||(O=[pe(a,"click",t[8]),pe(_,"click",t[12])],R=!0)},p(z,K){(!M||K&4)&&me(o,z[2]),L&&L.p&&(!M||K&512)&&$l(L,F,z,z[9],M?Rl(F,z[9],K,null):Nl(z[9]),null);let U=k;k=re(z),k===U?te[k].p(z,K):(He(),C(te[U],1,1,()=>{te[U]=null}),ze(),S=te[k],S?S.p(z,K):(S=te[k]=Q[k](z),S.c()),$(S,1),S.m(g,null))},i(z){M||($(L,z),$(S),M=!0)},o(z){C(L,z),C(S),M=!1},d(z){z&&d(e),L&&L.d(z),te[k].d(),z&&d(T),z&&d(P),R=!1,lt(O)}}}function X_(t){let e,n,r,s,i,o,l;return s=new Yt({props:{title:t[5],click:t[13]}}),{c(){e=y("button"),n=B("Back"),r=D(),x(s.$$.fragment),this.h()},l(a){e=w(a,"BUTTON",{class:!0,type:!0});var u=b(e);n=j(u,"Back"),u.forEach(d),r=A(a),G(s.$$.fragment,a),this.h()},h(){E(e,"class","text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"),E(e,"type","button")},m(a,u){N(a,e,u),p(e,n),N(a,r,u),q(s,a,u),i=!0,o||(l=pe(e,"click",function(){hn(t[1])&&t[1].apply(this,arguments)}),o=!0)},p(a,u){t=a;const c={};u&32&&(c.title=t[5]),u&80&&(c.click=t[13]),s.$set(c)},i(a){i||($(s.$$.fragment,a),i=!0)},o(a){C(s.$$.fragment,a),i=!1},d(a){a&&d(e),a&&d(r),H(s,a),o=!1,l()}}}function J_(t){let e,n;return e=new Yt({props:{title:"Next",click:t[1]}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s&2&&(i.click=r[1]),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function Z_(t){let e,n,r,s,i,o,l;n=new Yt({props:{click:t[8],title:t[3]}});let a=t[7]&&kc(t);return{c(){e=y("div"),x(n.$$.fragment),r=D(),a&&a.c(),s=Ee(),this.h()},l(u){e=w(u,"DIV",{class:!0,type:!0});var c=b(e);G(n.$$.fragment,c),c.forEach(d),r=A(u),a&&a.l(u),s=Ee(),this.h()},h(){E(e,"class","ease-linear transition-all duration-150"),E(e,"type","button")},m(u,c){N(u,e,c),q(n,e,null),N(u,r,c),a&&a.m(u,c),N(u,s,c),i=!0,o||(l=pe(e,"keypress",t[11]),o=!0)},p(u,[c]){const f={};c&8&&(f.title=u[3]),n.$set(f),u[7]?a?(a.p(u,c),c&128&&$(a,1)):(a=kc(u),a.c(),$(a,1),a.m(s.parentNode,s)):a&&(He(),C(a,1,1,()=>{a=null}),ze())},i(u){i||($(n.$$.fragment,u),$(a),i=!0)},o(u){C(n.$$.fragment,u),C(a),i=!1},d(u){u&&d(e),H(n),u&&d(r),a&&a.d(u),u&&d(s),o=!1,l()}}}function ev(t,e,n){let{$$slots:r={},$$scope:s}=e,i=!1,{nextButton:o,nextFunc:l,modalTitle:a,title:u,close:c,createTitle:f,action:h}=e;function m(){n(7,i=!i)}function g(I){ot.call(this,t,I)}const _=()=>{m(),c()},v=()=>{h(),m(),c()};return t.$$set=I=>{"nextButton"in I&&n(0,o=I.nextButton),"nextFunc"in I&&n(1,l=I.nextFunc),"modalTitle"in I&&n(2,a=I.modalTitle),"title"in I&&n(3,u=I.title),"close"in I&&n(4,c=I.close),"createTitle"in I&&n(5,f=I.createTitle),"action"in I&&n(6,h=I.action),"$$scope"in I&&n(9,s=I.$$scope)},[o,l,a,u,c,f,h,i,m,s,r,g,_,v]}class Xs extends De{constructor(e){super(),Ae(this,e,ev,Z_,$e,{nextButton:0,nextFunc:1,modalTitle:2,title:3,close:4,createTitle:5,action:6})}}function tv(t){const e=cn([]);function n(i,o="default",l){e.update(a=>[...a,{id:nv(),type:o,message:i,timeout:l}])}const r=h_(e,(i,o)=>{if(o(i),i.length>0){const l=setTimeout(()=>{e.update(a=>(a.shift(),a))},i[0].timeout);return()=>{clearTimeout(l)}}}),{subscribe:s}=r;return{subscribe:s,send:n,default:(i,o)=>n(i,"default",o),danger:(i,o)=>n(i,"danger",o),warning:(i,o)=>n(i,"warning",o),info:(i,o)=>n(i,"info",o),success:(i,o)=>n(i,"success",o)}}function nv(){return"_"+Math.random().toString(36).substr(2,9)}const Lr=tv();function tn(t,e){switch(t){case"i":Lr.info(e,3e3);break;case"d":Lr.danger(e,3e3);break;case"s":Lr.success(e,3e3);break;case"w":Lr.warning(e,3e3);break;default:Lr.default(e,2e3);break}}function rv(t){let e,n;return e=new Xs({props:{createTitle:"continue",title:"Add Image",modalTitle:"Upload an Image",nextButton:t[5]<1,nextFunc:t[14],close:t[15],action:lv,$$slots:{default:[ov]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s&32&&(i.nextButton=r[5]<1),s&32&&(i.close=r[15]),s&65561&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function sv(t){let e,n,r,s,i,o,l,a,u,c,f;return{c(){e=y("div"),n=y("div"),r=y("img"),o=D(),l=y("div"),a=y("span"),u=B("Click image to remove it"),this.h()},l(h){e=w(h,"DIV",{});var m=b(e);n=w(m,"DIV",{class:!0});var g=b(n);r=w(g,"IMG",{style:!0,class:!0,src:!0,alt:!0}),g.forEach(d),o=A(m),l=w(m,"DIV",{class:!0});var _=b(l);a=w(_,"SPAN",{});var v=b(a);u=j(v,"Click image to remove it"),v.forEach(d),_.forEach(d),m.forEach(d),this.h()},h(){ht(r,"object-fit","cover"),E(r,"class",s=(t[3]==0?"w-10 h-10":"w-20 h-20")+" p-1 rounded-full hover:blur-sm hover:ring-red-600 ring-2 ring-slate-800 dark:ring-gray-500"),Hr(r.src,i=t[0])||E(r,"src",i),E(r,"alt","Bordered avatar"),E(n,"class","flex justify-center"),E(l,"class","text-xs pt-2")},m(h,m){N(h,e,m),p(e,n),p(n,r),p(e,o),p(e,l),p(l,a),p(a,u),c||(f=[pe(r,"keypress",t[8]),pe(r,"click",t[10])],c=!0)},p(h,m){m&8&&s!==(s=(h[3]==0?"w-10 h-10":"w-20 h-20")+" p-1 rounded-full hover:blur-sm hover:ring-red-600 ring-2 ring-slate-800 dark:ring-gray-500")&&E(r,"class",s),m&1&&!Hr(r.src,i=h[0])&&E(r,"src",i)},i:_e,o:_e,d(h){h&&d(e),c=!1,lt(f)}}}function iv(t){let e,n,r,s,i;return{c(){e=y("img"),this.h()},l(o){e=w(o,"IMG",{style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){ht(e,"object-fit","cover"),E(e,"class",n=(t[3]==0?"w-10 h-10":"w-20 h-20")+" p-1 rounded-full ring-2 ring-slate-800 dark:ring-gray-500"),Hr(e.src,r=t[1])||E(e,"src",r),E(e,"alt","Bordered avatar")},m(o,l){N(o,e,l),s||(i=pe(e,"keypress",t[7]),s=!0)},p(o,l){l&8&&n!==(n=(o[3]==0?"w-10 h-10":"w-20 h-20")+" p-1 rounded-full ring-2 ring-slate-800 dark:ring-gray-500")&&E(e,"class",n),l&2&&!Hr(e.src,r=o[1])&&E(e,"src",r)},i:_e,o:_e,d(o){o&&d(e),s=!1,i()}}}function ov(t){let e,n,r,s,i,o,l,a;return{c(){e=y("div"),n=y("input"),r=D(),s=y("img"),this.h()},l(u){e=w(u,"DIV",{class:!0});var c=b(e);n=w(c,"INPUT",{style:!0,type:!0,accept:!0}),r=A(c),s=w(c,"IMG",{style:!0,class:!0,src:!0,alt:!0}),c.forEach(d),this.h()},h(){ht(n,"display","none"),E(n,"type","file"),E(n,"accept",".jpg, .jpeg, .png"),ht(s,"object-fit","cover"),E(s,"class",i=(t[3]==0?"w-10 h-10":"w-20 h-20")+" p-1 rounded-full ring-2 ring-slate-800 dark:ring-gray-500"),Hr(s.src,o=t[0])||E(s,"src",o),E(s,"alt","Bordered avatar"),E(e,"class","relative flex justify-center")},m(u,c){N(u,e,c),p(e,n),t[12](n),p(e,r),p(e,s),l||(a=[pe(n,"change",t[11]),pe(s,"keypress",t[9]),pe(s,"click",t[13])],l=!0)},p(u,c){c&8&&i!==(i=(u[3]==0?"w-10 h-10":"w-20 h-20")+" p-1 rounded-full ring-2 ring-slate-800 dark:ring-gray-500")&&E(s,"class",i),c&1&&!Hr(s.src,o=u[0])&&E(s,"src",o)},d(u){u&&d(e),t[12](null),l=!1,lt(a)}}}function av(t){let e,n,r,s;const i=[iv,sv,rv],o=[];function l(a,u){return a[1]!="undefined"&&a[1].length>0&&(a[2]!="undefined"||a[2]==!1)?0:a[0]!=null?1:2}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ee()},l(a){n.l(a),r=Ee()},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,[u]){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}const lv=()=>{};function uv(t,e,n){let r,{src:s,upload:i,avatar:o}=e;const l=S=>{let T=S.target.files[0],P=new FileReader;P.readAsDataURL(T),P.onload=M=>{n(0,o=M.target.result)}};let{size:a=0}=e,u=1;function c(S){ot.call(this,t,S)}function f(S){ot.call(this,t,S)}function h(S){ot.call(this,t,S)}const m=()=>{n(0,o=void 0),tn("d","Image removed")},g=S=>l(S);function _(S){fe[S?"unshift":"push"](()=>{r=S,n(4,r)})}const v=()=>{r.click()},I=()=>void 0,k=()=>n(5,u=1);return t.$$set=S=>{"src"in S&&n(1,s=S.src),"upload"in S&&n(2,i=S.upload),"avatar"in S&&n(0,o=S.avatar),"size"in S&&n(3,a=S.size)},[o,s,i,a,r,u,l,c,f,h,m,g,_,v,I,k]}class gn extends De{constructor(e){super(),Ae(this,e,uv,av,$e,{src:1,upload:2,avatar:0,size:3})}}function cv(t){let e,n,r,s,i,o,l,a;function u(f){t[4](f)}let c={type:t[1],placeholder:t[2],isText:t[3]};return t[0]!==void 0&&(c.value=t[0]),r=new Zt({props:c}),fe.push(()=>he(r,"value",u)),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),i=D(),o=y("label"),l=B(t[2]),this.h()},l(f){e=w(f,"DIV",{class:!0});var h=b(e);n=w(h,"DIV",{class:!0});var m=b(n);G(r.$$.fragment,m),m.forEach(d),i=A(h),o=w(h,"LABEL",{for:!0,class:!0});var g=b(o);l=j(g,t[2]),g.forEach(d),h.forEach(d),this.h()},h(){E(n,"class","w-80"),E(o,"for","input"),E(o,"class","text-sm"),E(e,"class","py-2")},m(f,h){N(f,e,h),p(e,n),q(r,n,null),p(e,i),p(e,o),p(o,l),a=!0},p(f,[h]){const m={};h&2&&(m.type=f[1]),h&4&&(m.placeholder=f[2]),h&8&&(m.isText=f[3]),!s&&h&1&&(s=!0,m.value=f[0],de(()=>s=!1)),r.$set(m),(!a||h&4)&&me(l,f[2])},i(f){a||($(r.$$.fragment,f),a=!0)},o(f){C(r.$$.fragment,f),a=!1},d(f){f&&d(e),H(r)}}}function fv(t,e,n){let{type:r,label:s,isText:i,value:o}=e;function l(a){o=a,n(0,o)}return t.$$set=a=>{"type"in a&&n(1,r=a.type),"label"in a&&n(2,s=a.label),"isText"in a&&n(3,i=a.isText),"value"in a&&n(0,o=a.value)},[o,r,s,i,l]}class Pt extends De{constructor(e){super(),Ae(this,e,fv,cv,$e,{type:1,label:2,isText:3,value:0})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},hv=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],a=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ed={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,a=s+2<t.length,u=a?t[s+2]:0,c=i>>2,f=(i&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;a||(m=64,o||(h=64)),r.push(n[c],n[f],n[h],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zh(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new dv;const h=i<<2|l>>4;if(r.push(h),u!==64){const m=l<<4&240|u>>2;if(r.push(m),f!==64){const g=u<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pv=function(t){const e=Zh(t);return ed.encodeByteArray(e,!0)},Yi=function(t){return pv(t).replace(/\./g,"")},td=function(t){try{return ed.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=()=>mv().__FIREBASE_DEFAULTS__,_v=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&td(t[1]);return e&&JSON.parse(e)},Do=()=>{try{return gv()||_v()||vv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nd=t=>{var e,n;return(n=(e=Do())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rd=t=>{const e=nd(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yv=()=>{var t;return(t=Do())===null||t===void 0?void 0:t.config},sd=t=>{var e;return(e=Do())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Yi(JSON.stringify(n)),Yi(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function Ev(){var t;const e=(t=Do())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Iv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Tv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kv(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Sv(){try{return typeof indexedDB=="object"}catch{return!1}}function Dv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="FirebaseError";class Pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Av,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Js.prototype.create)}}class Js{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?$v(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Pn(s,l,r)}}function $v(t,e){return t.replace(Nv,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Nv=/\{\$([^}]+)}/g;function Rv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Sc(i)&&Sc(o)){if(!Xi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sc(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vs(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ys(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Cv(t,e){const n=new Ov(t,e);return n.subscribe.bind(n)}class Ov{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Pv(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ya),s.error===void 0&&(s.error=ya),s.complete===void 0&&(s.complete=ya);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pv(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ya(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){return t&&t._delegate?t._delegate:t}class ir{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uv(e))try{this.getOrInitializeService({instanceIdentifier:mr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mr){return this.instances.has(e)}getOptions(e=mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mv(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mr){return this.component?this.component.multipleInstances?e:mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mv(t){return t===mr?void 0:t}function Uv(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const Fv={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},Bv=Ze.INFO,jv={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},xv=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=jv[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vl{constructor(e){this.name=e,this._logLevel=Bv,this._logHandler=xv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const qv=(t,e)=>e.some(n=>t instanceof n);let Dc,Ac;function Hv(){return Dc||(Dc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zv(){return Ac||(Ac=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const od=new WeakMap,za=new WeakMap,ad=new WeakMap,wa=new WeakMap,Fl=new WeakMap;function Kv(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&od.set(n,t)}).catch(()=>{}),Fl.set(e,t),e}function Gv(t){if(za.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});za.set(t,e)}let Ka={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return za.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ad.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wv(t){Ka=t(Ka)}function Qv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ba(this),e,...n);return ad.set(r,e.sort?e.sort():[e]),nr(r)}:zv().includes(t)?function(...e){return t.apply(ba(this),e),nr(od.get(this))}:function(...e){return nr(t.apply(ba(this),e))}}function Yv(t){return typeof t=="function"?Qv(t):(t instanceof IDBTransaction&&Gv(t),qv(t,Hv())?new Proxy(t,Ka):t)}function nr(t){if(t instanceof IDBRequest)return Kv(t);if(wa.has(t))return wa.get(t);const e=Yv(t);return e!==t&&(wa.set(t,e),Fl.set(e,t)),e}const ba=t=>Fl.get(t);function Xv(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=nr(o);return r&&o.addEventListener("upgradeneeded",a=>{r(nr(o.result),a.oldVersion,a.newVersion,nr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),l.then(a=>{i&&a.addEventListener("close",()=>i()),s&&a.addEventListener("versionchange",()=>s())}).catch(()=>{}),l}const Jv=["get","getKey","getAll","getAllKeys","count"],Zv=["put","add","delete","clear"],Ea=new Map;function $c(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ea.get(e))return Ea.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Zv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Jv.includes(n)))return;const i=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&a.done]))[0]};return Ea.set(e,i),i}Wv(t=>({...t,get:(e,n,r)=>$c(e,n)||t.get(e,n,r),has:(e,n)=>!!$c(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ty(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ty(t){const e=t.getComponent();return e?.type==="VERSION"}const Ga="@firebase/app",Nc="0.9.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Vl("@firebase/app"),ny="@firebase/app-compat",ry="@firebase/analytics-compat",sy="@firebase/analytics",iy="@firebase/app-check-compat",oy="@firebase/app-check",ay="@firebase/auth",ly="@firebase/auth-compat",uy="@firebase/database",cy="@firebase/database-compat",fy="@firebase/functions",hy="@firebase/functions-compat",dy="@firebase/installations",py="@firebase/installations-compat",my="@firebase/messaging",gy="@firebase/messaging-compat",_y="@firebase/performance",vy="@firebase/performance-compat",yy="@firebase/remote-config",wy="@firebase/remote-config-compat",by="@firebase/storage",Ey="@firebase/storage-compat",Iy="@firebase/firestore",Ty="@firebase/firestore-compat",ky="firebase",Sy="9.18.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="[DEFAULT]",Dy={[Ga]:"fire-core",[ny]:"fire-core-compat",[sy]:"fire-analytics",[ry]:"fire-analytics-compat",[oy]:"fire-app-check",[iy]:"fire-app-check-compat",[ay]:"fire-auth",[ly]:"fire-auth-compat",[uy]:"fire-rtdb",[cy]:"fire-rtdb-compat",[fy]:"fire-fn",[hy]:"fire-fn-compat",[dy]:"fire-iid",[py]:"fire-iid-compat",[my]:"fire-fcm",[gy]:"fire-fcm-compat",[_y]:"fire-perf",[vy]:"fire-perf-compat",[yy]:"fire-rc",[wy]:"fire-rc-compat",[by]:"fire-gcs",[Ey]:"fire-gcs-compat",[Iy]:"fire-fst",[Ty]:"fire-fst-compat","fire-js":"fire-js",[ky]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Map,Qa=new Map;function Ay(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tr(t){const e=t.name;if(Qa.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Qa.set(e,t);for(const n of Ji.values())Ay(n,t);return!0}function $o(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},rr=new Js("app","Firebase",$y);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=Sy;function ld(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Wa,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw rr.create("bad-app-name",{appName:String(s)});if(n||(n=yv()),!n)throw rr.create("no-options");const i=Ji.get(s);if(i){if(Xi(n,i.options)&&Xi(r,i.config))return i;throw rr.create("duplicate-app",{appName:s})}const o=new Vv(s);for(const a of Qa.values())o.addComponent(a);const l=new Ny(n,r,o);return Ji.set(s,l),l}function Bl(t=Wa){const e=Ji.get(t);if(!e&&t===Wa)return ld();if(!e)throw rr.create("no-app",{appName:t});return e}function kn(t,e,n){var r;let s=(r=Dy[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(l.join(" "));return}Tr(new ir(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="firebase-heartbeat-database",Cy=1,Os="firebase-heartbeat-store";let Ia=null;function ud(){return Ia||(Ia=Xv(Ry,Cy,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Os)}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),Ia}async function Oy(t){try{return(await ud()).transaction(Os).objectStore(Os).get(cd(t))}catch(e){if(e instanceof Pn)Ir.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(n.message)}}}async function Rc(t,e){try{const r=(await ud()).transaction(Os,"readwrite");return await r.objectStore(Os).put(e,cd(t)),r.done}catch(n){if(n instanceof Pn)Ir.warn(n.message);else{const r=rr.create("idb-set",{originalErrorMessage:n?.message});Ir.warn(r.message)}}}function cd(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=1024,Ly=30*24*60*60*1e3;class My{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Vy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Cc();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=Ly}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Cc(),{heartbeatsToSend:n,unsentEntries:r}=Uy(this._heartbeatsCache.heartbeats),s=Yi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Cc(){return new Date().toISOString().substring(0,10)}function Uy(t,e=Py){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Oc(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Oc(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Vy{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sv()?Dv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Oy(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rc(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rc(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Oc(t){return Yi(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t){Tr(new ir("platform-logger",e=>new ey(e),"PRIVATE")),Tr(new ir("heartbeat",e=>new My(e),"PRIVATE")),kn(Ga,Nc,t),kn(Ga,Nc,"esm2017"),kn("fire-js","")}Fy("");var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ke,jl=jl||{},Ve=By||self;function Zi(){}function No(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ei(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function jy(t){return Object.prototype.hasOwnProperty.call(t,Ta)&&t[Ta]||(t[Ta]=++xy)}var Ta="closure_uid_"+(1e9*Math.random()>>>0),xy=0;function qy(t,e,n){return t.call.apply(t.bind,arguments)}function Hy(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function jt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?jt=qy:jt=Hy,jt.apply(null,arguments)}function Ti(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Mt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,s,i){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[s].apply(r,o)}}function cr(){this.s=this.s,this.o=this.o}var zy=0;cr.prototype.s=!1;cr.prototype.na=function(){!this.s&&(this.s=!0,this.M(),zy!=0)&&jy(this)};cr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function xl(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Pc(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(No(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var Ky=function(){if(!Ve.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ve.addEventListener("test",Zi,e),Ve.removeEventListener("test",Zi,e)}catch{}return t}();function eo(t){return/^[\s\xa0]*$/.test(t)}var Lc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ka(t,e){return t<e?-1:t>e?1:0}function Ro(){var t=Ve.navigator;return t&&(t=t.userAgent)?t:""}function En(t){return Ro().indexOf(t)!=-1}function ql(t){return ql[" "](t),t}ql[" "]=Zi;function Gy(t){var e=Yy;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var Wy=En("Opera"),Gr=En("Trident")||En("MSIE"),hd=En("Edge"),Ya=hd||Gr,dd=En("Gecko")&&!(Ro().toLowerCase().indexOf("webkit")!=-1&&!En("Edge"))&&!(En("Trident")||En("MSIE"))&&!En("Edge"),Qy=Ro().toLowerCase().indexOf("webkit")!=-1&&!En("Edge");function pd(){var t=Ve.document;return t?t.documentMode:void 0}var to;e:{var Sa="",Da=function(){var t=Ro();if(dd)return/rv:([^\);]+)(\)|;)/.exec(t);if(hd)return/Edge\/([\d\.]+)/.exec(t);if(Gr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Qy)return/WebKit\/(\S+)/.exec(t);if(Wy)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Da&&(Sa=Da?Da[1]:""),Gr){var Aa=pd();if(Aa!=null&&Aa>parseFloat(Sa)){to=String(Aa);break e}}to=Sa}var Yy={};function Xy(){return Gy(function(){let t=0;const e=Lc(String(to)).split("."),n=Lc("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=ka(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||ka(s[2].length==0,i[2].length==0)||ka(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var Xa;if(Ve.document&&Gr){var Mc=pd();Xa=Mc||parseInt(to,10)||void 0}else Xa=void 0;var Jy=Xa;function Ps(t,e){if(xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(dd){e:{try{ql(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Zy[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ps.X.h.call(this)}}Mt(Ps,xt);var Zy={2:"touch",3:"pen",4:"mouse"};Ps.prototype.h=function(){Ps.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ti="closure_listenable_"+(1e6*Math.random()|0),e0=0;function t0(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=s,this.key=++e0,this.ba=this.ea=!1}function Co(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Hl(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function md(t){const e={};for(const n in t)e[n]=t[n];return e}const Uc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gd(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Uc.length;i++)n=Uc[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Oo(t){this.src=t,this.g={},this.h=0}Oo.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Za(t,e,r,s);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new t0(e,this.src,i,!!r,s),e.ea=n,t.push(e)),e};function Ja(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=fd(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Co(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Za(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==r)return s}return-1}var zl="closure_lm_"+(1e6*Math.random()|0),$a={};function _d(t,e,n,r,s){if(r&&r.once)return yd(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)_d(t,e[i],n,r,s);return null}return n=Wl(n),t&&t[ti]?t.N(e,n,ei(r)?!!r.capture:!!r,s):vd(t,e,n,!1,r,s)}function vd(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=ei(s)?!!s.capture:!!s,l=Gl(t);if(l||(t[zl]=l=new Oo(t)),n=l.add(e,n,r,o,i),n.proxy)return n;if(r=n0(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ky||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(bd(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function n0(){function t(n){return e.call(t.src,t.listener,n)}const e=r0;return t}function yd(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)yd(t,e[i],n,r,s);return null}return n=Wl(n),t&&t[ti]?t.O(e,n,ei(r)?!!r.capture:!!r,s):vd(t,e,n,!0,r,s)}function wd(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)wd(t,e[i],n,r,s);else r=ei(r)?!!r.capture:!!r,n=Wl(n),t&&t[ti]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Za(i,n,r,s),-1<n&&(Co(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Gl(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Za(e,n,r,s)),(n=-1<t?e[t]:null)&&Kl(n))}function Kl(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[ti])Ja(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Gl(e))?(Ja(n,t),n.h==0&&(n.src=null,e[zl]=null)):Co(t)}}}function bd(t){return t in $a?$a[t]:$a[t]="on"+t}function r0(t,e){if(t.ba)t=!0;else{e=new Ps(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&Kl(t),t=n.call(r,e)}return t}function Gl(t){return t=t[zl],t instanceof Oo?t:null}var Na="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wl(t){return typeof t=="function"?t:(t[Na]||(t[Na]=function(e){return t.handleEvent(e)}),t[Na])}function $t(){cr.call(this),this.i=new Oo(this),this.P=this,this.I=null}Mt($t,cr);$t.prototype[ti]=!0;$t.prototype.removeEventListener=function(t,e,n,r){wd(this,t,e,n,r)};function Lt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new xt(e,t);else if(e instanceof xt)e.target=e.target||t;else{var s=e;e=new xt(r,t),gd(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=ki(o,r,!0,e)&&s}if(o=e.g=t,s=ki(o,r,!0,e)&&s,s=ki(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=ki(o,r,!1,e)&&s}$t.prototype.M=function(){if($t.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Co(n[r]);delete t.g[e],t.h--}}this.I=null};$t.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};$t.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ki(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var l=o.listener,a=o.ha||o.src;o.ea&&Ja(t.i,o),s=l.call(a,r)!==!1&&s}}return s&&!r.defaultPrevented}var Ql=Ve.JSON.stringify;function s0(){var t=Td;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class i0{constructor(){this.h=this.g=null}add(e,n){const r=Ed.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Ed=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new o0,t=>t.reset());class o0{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function a0(t){Ve.setTimeout(()=>{throw t},0)}function Id(t,e){el||l0(),tl||(el(),tl=!0),Td.add(t,e)}var el;function l0(){var t=Ve.Promise.resolve(void 0);el=function(){t.then(u0)}}var tl=!1,Td=new i0;function u0(){for(var t;t=s0();){try{t.h.call(t.g)}catch(n){a0(n)}var e=Ed;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}tl=!1}function Po(t,e){$t.call(this),this.h=t||1,this.g=e||Ve,this.j=jt(this.lb,this),this.l=Date.now()}Mt(Po,$t);ke=Po.prototype;ke.ca=!1;ke.R=null;ke.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Lt(this,"tick"),this.ca&&(Yl(this),this.start()))}};ke.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Yl(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}ke.M=function(){Po.X.M.call(this),Yl(this),delete this.g};function Xl(t,e,n){if(typeof t=="function")n&&(t=jt(t,n));else if(t&&typeof t.handleEvent=="function")t=jt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ve.setTimeout(t,e||0)}function kd(t){t.g=Xl(()=>{t.g=null,t.i&&(t.i=!1,kd(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class c0 extends cr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kd(this)}M(){super.M(),this.g&&(Ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(t){cr.call(this),this.h=t,this.g={}}Mt(Ls,cr);var Vc=[];function Sd(t,e,n,r){Array.isArray(n)||(n&&(Vc[0]=n.toString()),n=Vc);for(var s=0;s<n.length;s++){var i=_d(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Dd(t){Hl(t.g,function(e,n){this.g.hasOwnProperty(n)&&Kl(e)},t),t.g={}}Ls.prototype.M=function(){Ls.X.M.call(this),Dd(this)};Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lo(){this.g=!0}Lo.prototype.Aa=function(){this.g=!1};function f0(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",l=i.split("&"),a=0;a<l.length;a++){var u=l[a].split("=");if(1<u.length){var c=u[0];u=u[1];var f=c.split("_");o=2<=f.length&&f[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function h0(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Vr(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+p0(t,n)+(r?" "+r:"")})}function d0(t,e){t.info(function(){return"TIMEOUT: "+e})}Lo.prototype.info=function(){};function p0(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Ql(n)}catch{return e}}var Rr={},Fc=null;function Mo(){return Fc=Fc||new $t}Rr.Pa="serverreachability";function Ad(t){xt.call(this,Rr.Pa,t)}Mt(Ad,xt);function Ms(t){const e=Mo();Lt(e,new Ad(e))}Rr.STAT_EVENT="statevent";function $d(t,e){xt.call(this,Rr.STAT_EVENT,t),this.stat=e}Mt($d,xt);function Qt(t){const e=Mo();Lt(e,new $d(e,t))}Rr.Qa="timingevent";function Nd(t,e){xt.call(this,Rr.Qa,t),this.size=e}Mt(Nd,xt);function ni(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ve.setTimeout(function(){t()},e)}var Uo={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Rd={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Jl(){}Jl.prototype.h=null;function Bc(t){return t.h||(t.h=t.i())}function Cd(){}var ri={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Zl(){xt.call(this,"d")}Mt(Zl,xt);function eu(){xt.call(this,"c")}Mt(eu,xt);var nl;function Vo(){}Mt(Vo,Jl);Vo.prototype.g=function(){return new XMLHttpRequest};Vo.prototype.i=function(){return{}};nl=new Vo;function si(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Ls(this),this.O=m0,t=Ya?125:void 0,this.T=new Po(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Od}function Od(){this.i=null,this.g="",this.h=!1}var m0=45e3,rl={},no={};ke=si.prototype;ke.setTimeout=function(t){this.O=t};function sl(t,e,n){t.K=1,t.v=Bo(Bn(e)),t.s=n,t.P=!0,Pd(t,null)}function Pd(t,e){t.F=Date.now(),ii(t),t.A=Bn(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),xd(n.i,"t",r),t.C=0,n=t.l.H,t.h=new Od,t.g=up(t.l,n?e:null,!t.s),0<t.N&&(t.L=new c0(jt(t.La,t,t.g),t.N)),Sd(t.S,t.g,"readystatechange",t.ib),e=t.H?md(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Ms(),f0(t.j,t.u,t.A,t.m,t.U,t.s)}ke.ib=function(t){t=t.target;const e=this.L;e&&Ln(t)==3?e.l():this.La(t)};ke.La=function(t){try{if(t==this.g)e:{const c=Ln(this.g);var e=this.g.Ea();const f=this.g.aa();if(!(3>c)&&(c!=3||Ya||this.g&&(this.h.h||this.g.fa()||Hc(this.g)))){this.I||c!=4||e==7||(e==8||0>=f?Ms(3):Ms(2)),Fo(this);var n=this.g.aa();this.Y=n;t:if(Ld(this)){var r=Hc(this.g);t="";var s=r.length,i=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gr(this),Ts(this);var o="";break t}this.h.i=new Ve.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,h0(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,a=this.g;if((l=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eo(l)){var u=l;break t}}u=null}if(n=u)Vr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,il(this,n);else{this.i=!1,this.o=3,Qt(12),gr(this),Ts(this);break e}}this.P?(Md(this,c,o),Ya&&this.i&&c==3&&(Sd(this.S,this.T,"tick",this.hb),this.T.start())):(Vr(this.j,this.m,o,null),il(this,o)),c==4&&gr(this),this.i&&!this.I&&(c==4?ip(this.l,this):(this.i=!1,ii(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Qt(12)):(this.o=0,Qt(13)),gr(this),Ts(this)}}}catch{}finally{}};function Ld(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function Md(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=g0(t,n),s==no){e==4&&(t.o=4,Qt(14),r=!1),Vr(t.j,t.m,null,"[Incomplete Response]");break}else if(s==rl){t.o=4,Qt(15),Vr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Vr(t.j,t.m,s,null),il(t,s);Ld(t)&&s!=no&&s!=rl&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Qt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),au(e),e.K=!0,Qt(11))):(Vr(t.j,t.m,n,"[Invalid Chunked Response]"),gr(t),Ts(t))}ke.hb=function(){if(this.g){var t=Ln(this.g),e=this.g.fa();this.C<e.length&&(Fo(this),Md(this,t,e),this.i&&t!=4&&ii(this))}};function g0(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?no:(n=Number(e.substring(n,r)),isNaN(n)?rl:(r+=1,r+n>e.length?no:(e=e.substr(r,n),t.C=r+n,e)))}ke.cancel=function(){this.I=!0,gr(this)};function ii(t){t.V=Date.now()+t.O,Ud(t,t.O)}function Ud(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ni(jt(t.gb,t),e)}function Fo(t){t.B&&(Ve.clearTimeout(t.B),t.B=null)}ke.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(d0(this.j,this.A),this.K!=2&&(Ms(),Qt(17)),gr(this),this.o=2,Ts(this)):Ud(this,this.V-t)};function Ts(t){t.l.G==0||t.I||ip(t.l,t)}function gr(t){Fo(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Yl(t.T),Dd(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function il(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||ol(n.h,t))){if(!t.J&&ol(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)io(n),qo(n);else break e;ou(n),Qt(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&n.A==0&&!n.v&&(n.v=ni(jt(n.cb,n),6e3));if(1>=zd(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else _r(n,11)}else if((t.J||n.g==t)&&io(n),!eo(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.T=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.I=u[1],n.ka=u[2];const c=u[3];c!=null&&(n.ma=c,n.j.info("VER="+n.ma));const f=u[4];f!=null&&(n.Ca=f,n.j.info("SVER="+n.Ca));const h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.h;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(tu(i,i.h),i.h=null))}if(r.D){const _=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.za=_,ft(r.F,r.D,_))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=lp(r,r.H?r.ka:null,r.V),o.J){Kd(r.h,o);var l=o,a=r.J;a&&l.setTimeout(a),l.B&&(Fo(l),ii(l)),r.g=o}else rp(r);0<n.i.length&&Ho(n)}else u[0]!="stop"&&u[0]!="close"||_r(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?_r(n,7):iu(n):u[0]!="noop"&&n.l&&n.l.wa(u),n.A=0)}}Ms(4)}catch{}}function _0(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(No(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function v0(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(No(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Vd(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(No(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=v0(t),r=_0(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var Fd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function y0(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function yr(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof yr){this.h=e!==void 0?e:t.h,ro(this,t.j),this.s=t.s,this.g=t.g,so(this,t.m),this.l=t.l,e=t.i;var n=new Us;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),jc(this,n),this.o=t.o}else t&&(n=String(t).match(Fd))?(this.h=!!e,ro(this,n[1]||"",!0),this.s=ws(n[2]||""),this.g=ws(n[3]||"",!0),so(this,n[4]),this.l=ws(n[5]||"",!0),jc(this,n[6]||"",!0),this.o=ws(n[7]||"")):(this.h=!!e,this.i=new Us(null,this.h))}yr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(bs(e,xc,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(bs(e,xc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(bs(n,n.charAt(0)=="/"?E0:b0,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",bs(n,T0)),t.join("")};function Bn(t){return new yr(t)}function ro(t,e,n){t.j=n?ws(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function so(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function jc(t,e,n){e instanceof Us?(t.i=e,k0(t.i,t.h)):(n||(e=bs(e,I0)),t.i=new Us(e,t.h))}function ft(t,e,n){t.i.set(e,n)}function Bo(t){return ft(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ws(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function bs(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,w0),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function w0(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var xc=/[#\/\?@]/g,b0=/[#\?:]/g,E0=/[#\?]/g,I0=/[#\?@]/g,T0=/#/g;function Us(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fr(t){t.g||(t.g=new Map,t.h=0,t.i&&y0(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ke=Us.prototype;ke.add=function(t,e){fr(this),this.i=null,t=is(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Bd(t,e){fr(t),e=is(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function jd(t,e){return fr(t),e=is(t,e),t.g.has(e)}ke.forEach=function(t,e){fr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};ke.oa=function(){fr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};ke.W=function(t){fr(this);let e=[];if(typeof t=="string")jd(this,t)&&(e=e.concat(this.g.get(is(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ke.set=function(t,e){return fr(this),this.i=null,t=is(this,t),jd(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ke.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function xd(t,e,n){Bd(t,e),0<n.length&&(t.i=null,t.g.set(is(t,e),xl(n)),t.h+=n.length)}ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function is(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function k0(t,e){e&&!t.j&&(fr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Bd(this,r),xd(this,s,n))},t)),t.j=e}var S0=class{constructor(e,n){this.h=e,this.g=n}};function qd(t){this.l=t||D0,Ve.PerformanceNavigationTiming?(t=Ve.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ve.g&&Ve.g.Ga&&Ve.g.Ga()&&Ve.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var D0=10;function Hd(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function zd(t){return t.h?1:t.g?t.g.size:0}function ol(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function tu(t,e){t.g?t.g.add(e):t.h=e}function Kd(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}qd.prototype.cancel=function(){if(this.i=Gd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Gd(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return xl(t.i)}function nu(){}nu.prototype.stringify=function(t){return Ve.JSON.stringify(t,void 0)};nu.prototype.parse=function(t){return Ve.JSON.parse(t,void 0)};function A0(){this.g=new nu}function $0(t,e,n){const r=n||"";try{Vd(t,function(s,i){let o=s;ei(s)&&(o=Ql(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function N0(t,e){const n=new Lo;if(Ve.Image){const r=new Image;r.onload=Ti(Si,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ti(Si,n,r,"TestLoadImage: error",!1,e),r.onabort=Ti(Si,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ti(Si,n,r,"TestLoadImage: timeout",!1,e),Ve.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Si(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function oi(t){this.l=t.ac||null,this.j=t.jb||!1}Mt(oi,Jl);oi.prototype.g=function(){return new jo(this.l,this.j)};oi.prototype.i=function(t){return function(){return t}}({});function jo(t,e){$t.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=ru,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mt(jo,$t);var ru=0;ke=jo.prototype;ke.open=function(t,e){if(this.readyState!=ru)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vs(this)};ke.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ve).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=ru};ke.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ve.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wd(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function Wd(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}ke.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ai(this):Vs(this),this.readyState==3&&Wd(this)}};ke.Va=function(t){this.g&&(this.response=this.responseText=t,ai(this))};ke.Ua=function(t){this.g&&(this.response=t,ai(this))};ke.ga=function(){this.g&&ai(this)};function ai(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vs(t)}ke.setRequestHeader=function(t,e){this.v.append(t,e)};ke.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ke.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Vs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var R0=Ve.JSON.parse;function dt(t){$t.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Qd,this.K=this.L=!1}Mt(dt,$t);var Qd="",C0=/^https?$/i,O0=["POST","PUT"];ke=dt.prototype;ke.Ka=function(t){this.L=t};ke.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nl.g(),this.C=this.u?Bc(this.u):Bc(nl),this.g.onreadystatechange=jt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){qc(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=Ve.FormData&&t instanceof Ve.FormData,!(0<=fd(O0,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Jd(this),0<this.B&&((this.K=P0(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jt(this.qa,this)):this.A=Xl(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){qc(this,i)}};function P0(t){return Gr&&Xy()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ke.qa=function(){typeof jl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lt(this,"timeout"),this.abort(8))};function qc(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Yd(t),xo(t)}function Yd(t){t.D||(t.D=!0,Lt(t,"complete"),Lt(t,"error"))}ke.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Lt(this,"complete"),Lt(this,"abort"),xo(this))};ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xo(this,!0)),dt.X.M.call(this)};ke.Ha=function(){this.s||(this.F||this.v||this.l?Xd(this):this.fb())};ke.fb=function(){Xd(this)};function Xd(t){if(t.h&&typeof jl<"u"&&(!t.C[1]||Ln(t)!=4||t.aa()!=2)){if(t.v&&Ln(t)==4)Xl(t.Ha,0,t);else if(Lt(t,"readystatechange"),Ln(t)==4){t.h=!1;try{const l=t.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=l===0){var s=String(t.H).match(Fd)[1]||null;if(!s&&Ve.self&&Ve.self.location){var i=Ve.self.location.protocol;s=i.substr(0,i.length-1)}r=!C0.test(s?s.toLowerCase():"")}n=r}if(n)Lt(t,"complete"),Lt(t,"success");else{t.m=6;try{var o=2<Ln(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",Yd(t)}}finally{xo(t)}}}}function xo(t,e){if(t.g){Jd(t);const n=t.g,r=t.C[0]?Zi:null;t.g=null,t.C=null,e||Lt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Jd(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ve.clearTimeout(t.A),t.A=null)}function Ln(t){return t.g?t.g.readyState:0}ke.aa=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}};ke.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};ke.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),R0(e)}};function Hc(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Qd:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ke.Ea=function(){return this.m};ke.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Zd(t){let e="";return Hl(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function su(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Zd(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ft(t,e,n))}function ds(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ep(t){this.Ca=0,this.i=[],this.j=new Lo,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ds("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ds("baseRetryDelayMs",5e3,t),this.bb=ds("retryDelaySeedMs",1e4,t),this.$a=ds("forwardChannelMaxRetries",2,t),this.ta=ds("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new qd(t&&t.concurrentRequestLimit),this.Fa=new A0,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}ke=ep.prototype;ke.ma=8;ke.G=1;function iu(t){if(tp(t),t.G==3){var e=t.U++,n=Bn(t.F);ft(n,"SID",t.I),ft(n,"RID",e),ft(n,"TYPE","terminate"),li(t,n),e=new si(t,t.j,e,void 0),e.K=2,e.v=Bo(Bn(n)),n=!1,Ve.navigator&&Ve.navigator.sendBeacon&&(n=Ve.navigator.sendBeacon(e.v.toString(),"")),!n&&Ve.Image&&(new Image().src=e.v,n=!0),n||(e.g=up(e.l,null),e.g.da(e.v)),e.F=Date.now(),ii(e)}ap(t)}function qo(t){t.g&&(au(t),t.g.cancel(),t.g=null)}function tp(t){qo(t),t.u&&(Ve.clearTimeout(t.u),t.u=null),io(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Ve.clearTimeout(t.m),t.m=null)}function Ho(t){Hd(t.h)||t.m||(t.m=!0,Id(t.Ja,t),t.C=0)}function L0(t,e){return zd(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=ni(jt(t.Ja,t,e),op(t,t.C)),t.C++,!0)}ke.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new si(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=md(i),gd(i,this.S)):i=this.S),this.o!==null||this.N||(s.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=np(this,s,e),n=Bn(this.F),ft(n,"RID",t),ft(n,"CVER",22),this.D&&ft(n,"X-HTTP-Session-Id",this.D),li(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(Zd(i)))+"&"+e:this.o&&su(n,this.o,i)),tu(this.h,s),this.Ya&&ft(n,"TYPE","init"),this.O?(ft(n,"$req",e),ft(n,"SID","null"),s.Z=!0,sl(s,n,null)):sl(s,n,e),this.G=2}}else this.G==3&&(t?zc(this,t):this.i.length==0||Hd(this.h)||zc(this))};function zc(t,e){var n;e?n=e.m:n=t.U++;const r=Bn(t.F);ft(r,"SID",t.I),ft(r,"RID",n),ft(r,"AID",t.T),li(t,r),t.o&&t.s&&su(r,t.o,t.s),n=new si(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=np(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),tu(t.h,n),sl(n,r,e)}function li(t,e){t.ia&&Hl(t.ia,function(n,r){ft(e,r,n)}),t.l&&Vd({},function(n,r){ft(e,r,n)})}function np(t,e,n){n=Math.min(t.i.length,n);var r=t.l?jt(t.l.Ra,t.l,t):null;e:{var s=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let l=!0;for(let a=0;a<n;a++){let u=s[a].h;const c=s[a].g;if(u-=i,0>u)i=Math.max(0,s[a].h-100),l=!1;else try{$0(c,o,"req"+u+"_")}catch{r&&r(c)}}if(l){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function rp(t){t.g||t.u||(t.Z=1,Id(t.Ia,t),t.A=0)}function ou(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=ni(jt(t.Ia,t),op(t,t.A)),t.A++,!0)}ke.Ia=function(){if(this.u=null,sp(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=ni(jt(this.eb,this),t)}};ke.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Qt(10),qo(this),sp(this))};function au(t){t.B!=null&&(Ve.clearTimeout(t.B),t.B=null)}function sp(t){t.g=new si(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Bn(t.sa);ft(e,"RID","rpc"),ft(e,"SID",t.I),ft(e,"CI",t.L?"0":"1"),ft(e,"AID",t.T),ft(e,"TYPE","xmlhttp"),li(t,e),t.o&&t.s&&su(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Bo(Bn(e)),n.s=null,n.P=!0,Pd(n,t)}ke.cb=function(){this.v!=null&&(this.v=null,qo(this),ou(this),Qt(19))};function io(t){t.v!=null&&(Ve.clearTimeout(t.v),t.v=null)}function ip(t,e){var n=null;if(t.g==e){io(t),au(t),t.g=null;var r=2}else if(ol(t.h,e))n=e.D,Kd(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=Mo(),Lt(r,new Nd(r,n)),Ho(t)}else rp(t);else if(s=e.o,s==3||s==0&&0<t.pa||!(r==1&&L0(t,e)||r==2&&ou(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:_r(t,5);break;case 4:_r(t,10);break;case 3:_r(t,6);break;default:_r(t,2)}}}function op(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function _r(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=jt(t.kb,t);n||(n=new yr("//www.google.com/images/cleardot.gif"),Ve.location&&Ve.location.protocol=="http"||ro(n,"https"),Bo(n)),N0(n.toString(),r)}else Qt(2);t.G=0,t.l&&t.l.va(e),ap(t),tp(t)}ke.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function ap(t){if(t.G=0,t.la=[],t.l){const e=Gd(t.h);(e.length!=0||t.i.length!=0)&&(Pc(t.la,e),Pc(t.la,t.i),t.h.i.length=0,xl(t.i),t.i.length=0),t.l.ua()}}function lp(t,e,n){var r=n instanceof yr?Bn(n):new yr(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),so(r,r.m);else{var s=Ve.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new yr(null,void 0);r&&ro(i,r),e&&(i.g=e),s&&so(i,s),n&&(i.l=n),r=i}return n=t.D,e=t.za,n&&e&&ft(r,n,e),ft(r,"VER",t.ma),li(t,r),r}function up(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new dt(new oi({jb:!0})):new dt(t.ra),e.Ka(t.H),e}function cp(){}ke=cp.prototype;ke.xa=function(){};ke.wa=function(){};ke.va=function(){};ke.ua=function(){};ke.Ra=function(){};function oo(){if(Gr&&!(10<=Number(Jy)))throw Error("Environmental error: no available transport.")}oo.prototype.g=function(t,e){return new un(t,e)};function un(t,e){$t.call(this),this.g=new ep(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!eo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!eo(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new os(this)}Mt(un,$t);un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Qt(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=lp(t,null,t.V),Ho(t)};un.prototype.close=function(){iu(this.g)};un.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ql(t),t=n);e.i.push(new S0(e.ab++,t)),e.G==3&&Ho(e)};un.prototype.M=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,un.X.M.call(this)};function fp(t){Zl.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Mt(fp,Zl);function hp(){eu.call(this),this.status=1}Mt(hp,eu);function os(t){this.g=t}Mt(os,cp);os.prototype.xa=function(){Lt(this.g,"a")};os.prototype.wa=function(t){Lt(this.g,new fp(t))};os.prototype.va=function(t){Lt(this.g,new hp)};os.prototype.ua=function(){Lt(this.g,"b")};oo.prototype.createWebChannel=oo.prototype.g;un.prototype.send=un.prototype.u;un.prototype.open=un.prototype.m;un.prototype.close=un.prototype.close;Uo.NO_ERROR=0;Uo.TIMEOUT=8;Uo.HTTP_ERROR=6;Rd.COMPLETE="complete";Cd.EventType=ri;ri.OPEN="a";ri.CLOSE="b";ri.ERROR="c";ri.MESSAGE="d";$t.prototype.listen=$t.prototype.N;dt.prototype.listenOnce=dt.prototype.O;dt.prototype.getLastError=dt.prototype.Oa;dt.prototype.getLastErrorCode=dt.prototype.Ea;dt.prototype.getStatus=dt.prototype.aa;dt.prototype.getResponseJson=dt.prototype.Sa;dt.prototype.getResponseText=dt.prototype.fa;dt.prototype.send=dt.prototype.da;dt.prototype.setWithCredentials=dt.prototype.Ka;var M0=function(){return new oo},U0=function(){return Mo()},Ra=Uo,V0=Rd,F0=Rr,Kc={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},B0=oi,Di=Cd,j0=dt;const Gc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let as="9.18.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new Vl("@firebase/firestore");function Wc(){return kr.logLevel}function Se(t,...e){if(kr.logLevel<=Ze.DEBUG){const n=e.map(lu);kr.debug(`Firestore (${as}): ${t}`,...n)}}function jn(t,...e){if(kr.logLevel<=Ze.ERROR){const n=e.map(lu);kr.error(`Firestore (${as}): ${t}`,...n)}}function al(t,...e){if(kr.logLevel<=Ze.WARN){const n=e.map(lu);kr.warn(`Firestore (${as}): ${t}`,...n)}}function lu(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t="Unexpected state"){const e=`FIRESTORE (${as}) INTERNAL ASSERTION FAILED: `+t;throw jn(e),new Error(e)}function at(t,e){t||Ue()}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class q0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H0{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let i=new Vn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const a=i;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},l=a=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string"),new dp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string"),new Vt(e)}}class z0{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(at(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class K0{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s}getToken(){return Promise.resolve(new z0(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W0{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=i=>{i.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?s(i):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(at(typeof n.token=="string"),this.A=n.token,new G0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Q0(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function tt(t,e){return t<e?-1:t>e?1:0}function Wr(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ie(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Tt(0,0))}static max(){return new Be(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(),r===void 0?r=e.length-n:r>e.length-n&&Ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ut extends Fs{construct(e,n,r){return new ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const Y0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends Fs{construct(e,n,r){return new Bt(e,n,r)}static isValidIdentifier(e){return Y0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ie(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ie(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new Ie(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Ie(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(ut.fromString(e))}static fromName(e){return new Ne(ut.fromString(e).popFirst(5))}static empty(){return new Ne(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new ut(e.slice()))}}function X0(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Be.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new or(s,Ne.empty(),e)}function J0(t){return new or(t.readTime,t.key,-1)}class or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new or(Be.min(),Ne.empty(),-1)}static max(){return new or(Be.max(),Ne.empty(),-1)}}function Z0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ui(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==e1)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):le.reject(n)}static resolve(e){return new le((n,r)=>{n(e)})}static reject(e){return new le((n,r)=>{r(e)})}static waitFor(e){return new le((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},a=>r(a))}),o=!0,i===s&&n()})}static or(e){let n=le.resolve(!1);for(const r of e)n=n.next(s=>s?le.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new le((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let a=0;a<i;a++){const u=a;n(e[u]).next(c=>{o[u]=c,++l,l===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new le((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ci(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}uu.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n,r,s,i,o,l,a){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.useFetchStreams=a}}class Bs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){return t==null}function ao(t){return t===0&&1/t==-1/0}function r1(t){return typeof t=="number"&&Number.isInteger(t)&&!ao(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw s instanceof DOMException?new s1("Invalid base64 string: "+s):s}}(e);return new zt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const i1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(at(!!t),typeof t=="string"){let e=0;const n=i1.exec(t);if(at(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _p(t){const e=t.mapValue.fields.__previous_value__;return gp(e)?_p(e):e}function js(t){const e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gp(t)?4:o1(t)?9007199254740991:10:Ue()}function Cn(t,e){if(t===e)return!0;const n=Sr(t);if(n!==Sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return js(t).isEqual(js(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=ar(r.timestampValue),o=ar(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Qr(r.bytesValue).isEqual(Qr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return vt(r.geoPointValue.latitude)===vt(s.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return vt(r.integerValue)===vt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=vt(r.doubleValue),o=vt(s.doubleValue);return i===o?ao(i)===ao(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Wr(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Qc(i)!==Qc(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Cn(i[l],o[l])))return!1;return!0}(t,e);default:return Ue()}}function xs(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function Yr(t,e){if(t===e)return 0;const n=Sr(t),r=Sr(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=vt(s.integerValue||s.doubleValue),l=vt(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Yc(t.timestampValue,e.timestampValue);case 4:return Yc(js(t),js(e));case 5:return tt(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Qr(s),l=Qr(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let a=0;a<o.length&&a<l.length;a++){const u=tt(o[a],l[a]);if(u!==0)return u}return tt(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=tt(vt(s.latitude),vt(i.latitude));return o!==0?o:tt(vt(s.longitude),vt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],l=i.values||[];for(let a=0;a<o.length&&a<l.length;++a){const u=Yr(o[a],l[a]);if(u)return u}return tt(o.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Ai.mapValue&&i===Ai.mapValue)return 0;if(s===Ai.mapValue)return 1;if(i===Ai.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),a=i.fields||{},u=Object.keys(a);l.sort(),u.sort();for(let c=0;c<l.length&&c<u.length;++c){const f=tt(l[c],u[c]);if(f!==0)return f;const h=Yr(o[l[c]],a[u[c]]);if(h!==0)return h}return tt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ue()}}function Yc(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tt(t,e);const n=ar(t),r=ar(e),s=tt(n.seconds,r.seconds);return s!==0?s:tt(n.nanos,r.nanos)}function Xr(t){return ll(t)}function ll(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=ar(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ne.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=ll(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const l of s)o?o=!1:i+=",",i+=`${l}:${ll(r.fields[l])}`;return i+"}"}(t.mapValue):Ue();var e,n}function Xc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ul(t){return!!t&&"integerValue"in t}function cu(t){return!!t&&"arrayValue"in t}function Jc(t){return!!t&&"nullValue"in t}function Zc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Li(t){return!!t&&"mapValue"in t}function ks(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ks(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ks(t.arrayValue.values[n]);return e}return Object.assign({},t)}function o1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.position=e,this.inclusive=n}}function ef(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Ne.comparator(Ne.fromName(o.referenceValue),n.key):r=Yr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function tf(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{}class wt extends vp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new l1(e,n,r):n==="array-contains"?new f1(e,r):n==="in"?new h1(e,r):n==="not-in"?new d1(e,r):n==="array-contains-any"?new p1(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new u1(e,r):new c1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yr(n,this.value)):n!==null&&Sr(this.value)===Sr(n)&&this.matchesComparison(Yr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _n extends vp{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new _n(e,n)}matches(e){return yp(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function yp(t){return t.op==="and"}function wp(t){return a1(t)&&yp(t)}function a1(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function cl(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Xr(t.value);if(wp(t))return t.filters.map(e=>cl(e)).join(",");{const e=t.filters.map(n=>cl(n)).join(",");return`${t.op}(${e})`}}function bp(t,e){return t instanceof wt?function(n,r){return r instanceof wt&&n.op===r.op&&n.field.isEqual(r.field)&&Cn(n.value,r.value)}(t,e):t instanceof _n?function(n,r){return r instanceof _n&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&bp(i,r.filters[o]),!0):!1}(t,e):void Ue()}function Ep(t){return t instanceof wt?function(e){return`${e.field.canonicalString()} ${e.op} ${Xr(e.value)}`}(t):t instanceof _n?function(e){return e.op.toString()+" {"+e.getFilters().map(Ep).join(" ,")+"}"}(t):"Filter"}class l1 extends wt{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class u1 extends wt{constructor(e,n){super(e,"in",n),this.keys=Ip("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class c1 extends wt{constructor(e,n){super(e,"not-in",n),this.keys=Ip("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ip(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class f1 extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cu(n)&&xs(n.arrayValue,this.value)}}class h1 extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xs(this.value.arrayValue,n)}}class d1 extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xs(this.value.arrayValue,n)}}class p1 extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n="asc"){this.field=e,this.dir=n}}function m1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $i(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $i(this.root,e,this.comparator,!1)}getReverseIterator(){return new $i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $i(this.root,e,this.comparator,!0)}}class $i{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ot.RED,this.left=s??Ot.EMPTY,this.right=i??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Ot(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nf(this.data.getIterator())}getIteratorFrom(e){return new nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class nf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new an([])}unionWith(e){let n=new kt(Bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wr(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Li(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ks(n)}setAll(e){let n=Bt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const a=this.getFieldsMap(n);this.applyChanges(a,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ks(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Li(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Li(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Cr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new en(ks(this.value))}}function Tp(t){const e=[];return Cr(t.fields,(n,r)=>{const s=new Bt([n]);if(Li(r)){const i=Tp(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ft(e,0,Be.min(),Be.min(),Be.min(),en.empty(),0)}static newFoundDocument(e,n,r,s){return new Ft(e,1,n,Be.min(),r,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,Be.min(),Be.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,Be.min(),Be.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this._t=null}}function rf(t,e=null,n=[],r=[],s=null,i=null,o=null){return new g1(t,e,n,r,s,i,o)}function fu(t){const e=qe(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cl(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),zo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xr(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xr(r)).join(",")),e._t=n}return e._t}function hu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!m1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bp(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tf(t.startAt,e.startAt)&&tf(t.endAt,e.endAt)}function fl(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=a,this.wt=null,this.gt=null,this.startAt,this.endAt}}function _1(t,e,n,r,s,i,o,l){return new fi(t,e,n,r,s,i,o,l)}function Ko(t){return new fi(t)}function sf(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kp(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function du(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Sp(t){return t.collectionGroup!==null}function Br(t){const e=qe(t);if(e.wt===null){e.wt=[];const n=du(e),r=kp(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Ss(n)),e.wt.push(new Ss(Bt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.wt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ss(Bt.keyField(),i))}}}return e.wt}function xn(t){const e=qe(t);if(!e.gt)if(e.limitType==="F")e.gt=rf(e.path,e.collectionGroup,Br(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Br(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Ss(i.field,o))}const r=e.endAt?new lo(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new lo(e.startAt.position,e.startAt.inclusive):null;e.gt=rf(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.gt}function hl(t,e){e.getFirstInequalityField(),du(t);const n=t.filters.concat([e]);return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dl(t,e,n){return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Go(t,e){return hu(xn(t),xn(e))&&t.limitType===e.limitType}function Dp(t){return`${fu(xn(t))}|lt:${t.limitType}`}function pl(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Ep(r)).join(", ")}]`),zo(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xr(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xr(r)).join(",")),`Target(${n})`}(xn(t))}; limitType=${t.limitType})`}function Wo(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Ne.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of Br(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const l=ef(s,i,o);return s.inclusive?l<=0:l<0}(n.startAt,Br(n),r)||n.endAt&&!function(s,i,o){const l=ef(s,i,o);return s.inclusive?l>=0:l>0}(n.endAt,Br(n),r))}(t,e)}function v1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ap(t){return(e,n)=>{let r=!1;for(const s of Br(t)){const i=y1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function y1(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(s,i,o){const l=i.data.field(s),a=o.data.field(s);return l!==null&&a!==null?Yr(l,a):Ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ao(e)?"-0":e}}function Np(t){return{integerValue:""+t}}function w1(t,e){return r1(e)?Np(e):$p(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this._=void 0}}function b1(t,e,n){return t instanceof uo?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof qs?Cp(t,e):t instanceof Hs?Op(t,e):function(r,s){const i=Rp(r,s),o=of(i)+of(r.It);return ul(i)&&ul(r.It)?Np(o):$p(r.Tt,o)}(t,e)}function E1(t,e,n){return t instanceof qs?Cp(t,e):t instanceof Hs?Op(t,e):n}function Rp(t,e){return t instanceof co?ul(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class uo extends Qo{}class qs extends Qo{constructor(e){super(),this.elements=e}}function Cp(t,e){const n=Pp(e);for(const r of t.elements)n.some(s=>Cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hs extends Qo{constructor(e){super(),this.elements=e}}function Op(t,e){let n=Pp(e);for(const r of t.elements)n=n.filter(s=>!Cn(s,r));return{arrayValue:{values:n}}}class co extends Qo{constructor(e,n){super(),this.Tt=e,this.It=n}}function of(t){return vt(t.integerValue||t.doubleValue)}function Pp(t){return cu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function I1(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof qs&&r instanceof qs||n instanceof Hs&&r instanceof Hs?Wr(n.elements,r.elements,Cn):n instanceof co&&r instanceof co?Cn(n.It,r.It):n instanceof uo&&r instanceof uo}(t.transform,e.transform)}class T1{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mi(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yo{}function Lp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Up(t.key,Sn.none()):new hi(t.key,t.data,Sn.none());{const n=t.data,r=en.empty();let s=new kt(Bt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new hr(t.key,r,new an(s.toArray()),Sn.none())}}function k1(t,e,n){t instanceof hi?function(r,s,i){const o=r.value.clone(),l=lf(r.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof hr?function(r,s,i){if(!Mi(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=lf(r.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(Mp(r)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Ds(t,e,n,r){return t instanceof hi?function(s,i,o,l){if(!Mi(s.precondition,i))return o;const a=s.value.clone(),u=uf(s.fieldTransforms,l,i);return a.setAll(u),i.convertToFoundDocument(i.version,a).setHasLocalMutations(),null}(t,e,n,r):t instanceof hr?function(s,i,o,l){if(!Mi(s.precondition,i))return o;const a=uf(s.fieldTransforms,l,i),u=i.data;return u.setAll(Mp(s)),u.setAll(a),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return Mi(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function S1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Rp(r.transform,s||null);i!=null&&(n===null&&(n=en.empty()),n.set(r.field,i))}return n||null}function af(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Wr(n,r,(s,i)=>I1(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hi extends Yo{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hr extends Yo{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mp(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lf(t,e,n){const r=new Map;at(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,E1(o,l,n[s]))}return r}function uf(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,b1(i,o,e))}return r}class Up extends Yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D1 extends Yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Qe;function $1(t){switch(t){default:return Ue();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function Vp(t){if(t===void 0)return jn("GRPC error has no .code"),se.UNKNOWN;switch(t){case _t.OK:return se.OK;case _t.CANCELLED:return se.CANCELLED;case _t.UNKNOWN:return se.UNKNOWN;case _t.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case _t.INTERNAL:return se.INTERNAL;case _t.UNAVAILABLE:return se.UNAVAILABLE;case _t.UNAUTHENTICATED:return se.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case _t.NOT_FOUND:return se.NOT_FOUND;case _t.ALREADY_EXISTS:return se.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return se.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case _t.ABORTED:return se.ABORTED;case _t.OUT_OF_RANGE:return se.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return se.UNIMPLEMENTED;case _t.DATA_LOSS:return se.DATA_LOSS;default:return Ue()}}(Qe=_t||(_t={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Cr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return mp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=new St(Ne.comparator);function qn(){return N1}const Fp=new St(Ne.comparator);function Es(...t){let e=Fp;for(const n of t)e=e.insert(n.key,n);return e}function Bp(t){let e=Fp;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vr(){return As()}function jp(){return As()}function As(){return new ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const R1=new St(Ne.comparator),C1=new kt(Ne.comparator);function We(...t){let e=C1;for(const n of t)e=e.add(n);return e}const O1=new kt(tt);function xp(){return O1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,di.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xo(Be.min(),s,xp(),qn(),We())}}class di{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new di(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,r,s){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=s}}class qp{constructor(e,n){this.targetId=e,this.Rt=n}}class Hp{constructor(e,n,r=zt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cf{constructor(){this.Pt=0,this.vt=hf(),this.bt=zt.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return this.Pt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=We(),n=We(),r=We();return this.vt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ue()}}),new di(this.bt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=hf()}$t(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class P1{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=qn(),this.Kt=ff(),this.Gt=new kt(tt)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:Ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,s)=>{this.Jt(s)&&n(s)})}Zt(e){const n=e.targetId,r=e.Rt.count,s=this.Xt(n);if(s){const i=s.target;if(fl(i))if(r===0){const o=new Ne(i.path);this.zt(n,o,Ft.newNoDocument(o,Be.min()))}else at(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((i,o)=>{const l=this.Xt(o);if(l){if(i.current&&fl(l.target)){const a=new Ne(l.target.path);this.Ut.get(a)!==null||this.ne(o,a)||this.zt(o,a,Ft.newNoDocument(a,e))}i.Ct&&(n.set(o,i.Nt()),i.kt())}});let r=We();this.Kt.forEach((i,o)=>{let l=!0;o.forEachWhile(a=>{const u=this.Xt(a);return!u||u.purpose===2||(l=!1,!1)}),l&&(r=r.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const s=new Xo(e,n,this.Gt,this.Ut,r);return this.Ut=qn(),this.Kt=ff(),this.Gt=new kt(tt),s}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).$t(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const s=this.Ht(e);this.ne(e,n)?s.$t(n,1):s.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let n=this.qt.get(e);return n||(n=new cf,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new kt(tt),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new cf),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function ff(){return new St(Ne.comparator)}function hf(){return new St(Ne.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),M1=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),U1=(()=>({and:"AND",or:"OR"}))();class V1{constructor(e,n){this.databaseId=e,this.yt=n}}function fo(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zp(t,e){return t.yt?e.toBase64():e.toUint8Array()}function F1(t,e){return fo(t,e.toTimestamp())}function Dn(t){return at(!!t),Be.fromTimestamp(function(e){const n=ar(e);return new Tt(n.seconds,n.nanos)}(t))}function pu(t,e){return function(n){return new ut(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Kp(t){const e=ut.fromString(t);return at(Yp(e)),e}function ml(t,e){return pu(t.databaseId,e.path)}function Ca(t,e){const n=Kp(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(Gp(n))}function gl(t,e){return pu(t.databaseId,e)}function B1(t){const e=Kp(t);return e.length===4?ut.emptyPath():Gp(e)}function _l(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gp(t){return at(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function df(t,e,n){return{name:ml(t,e),fields:n.value.mapValue.fields}}function j1(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(a){return a==="NO_CHANGE"?0:a==="ADD"?1:a==="REMOVE"?2:a==="CURRENT"?3:a==="RESET"?4:Ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(a,u){return a.yt?(at(u===void 0||typeof u=="string"),zt.fromBase64String(u||"")):(at(u===void 0||u instanceof Uint8Array),zt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(a){const u=a.code===void 0?se.UNKNOWN:Vp(a.code);return new Ie(u,a.message||"")}(o);n=new Hp(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ca(t,r.document.name),i=Dn(r.document.updateTime),o=r.document.createTime?Dn(r.document.createTime):Be.min(),l=new en({mapValue:{fields:r.document.fields}}),a=Ft.newFoundDocument(s,i,o,l),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Ui(u,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ca(t,r.document),i=r.readTime?Dn(r.readTime):Be.min(),o=Ft.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ui([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ca(t,r.document),i=r.removedTargetIds||[];n=new Ui([],i,s,null)}else{if(!("filter"in e))return Ue();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new A1(s),o=r.targetId;n=new qp(o,i)}}return n}function x1(t,e){let n;if(e instanceof hi)n={update:df(t,e.key,e.value)};else if(e instanceof Up)n={delete:ml(t,e.key)};else if(e instanceof hr)n={update:df(t,e.key,e.data),updateMask:X1(e.fieldMask)};else{if(!(e instanceof D1))return Ue();n={verify:ml(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof uo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof qs)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Hs)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof co)return{fieldPath:i.field.canonicalString(),increment:o.It};throw Ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:F1(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ue()}(t,e.precondition)),n}function q1(t,e){return t&&t.length>0?(at(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Dn(r.updateTime):Dn(s);return i.isEqual(Be.min())&&(i=Dn(s)),new T1(i,r.transformResults||[])}(n,e))):[]}function H1(t,e){return{documents:[gl(t,e.path)]}}function z1(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=gl(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=gl(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(a){if(a.length!==0)return Qp(_n.create(a,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(a){if(a.length!==0)return a.map(u=>function(c){return{field:Mr(c.field),direction:W1(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(a,u){return a.yt||zo(u)?u:{value:u}}(t,e.limit);var l;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(n.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),n}function K1(t){let e=B1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){at(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=function(c){const f=Wp(c);return f instanceof _n&&wp(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(f){return new Ss(Ur(f.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(c)));let l=null;n.limit&&(l=function(c){let f;return f=typeof c=="object"?c.value:c,zo(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(c){const f=!!c.before,h=c.values||[];return new lo(h,f)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const f=!c.before,h=c.values||[];return new lo(h,f)}(n.endAt)),_1(e,s,o,i,l,"F",a,u)}function G1(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ue()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wp(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ur(e.unaryFilter.field);return wt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ur(e.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ur(e.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ur(e.unaryFilter.field);return wt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(t):t.fieldFilter!==void 0?function(e){return wt.create(Ur(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return _n.create(e.compositeFilter.filters.map(n=>Wp(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Ue()}}(e.compositeFilter.op))}(t):Ue()}function W1(t){return L1[t]}function Q1(t){return M1[t]}function Y1(t){return U1[t]}function Mr(t){return{fieldPath:t.canonicalString()}}function Ur(t){return Bt.fromServerFormat(t.fieldPath)}function Qp(t){return t instanceof wt?function(e){if(e.op==="=="){if(Zc(e.value))return{unaryFilter:{field:Mr(e.field),op:"IS_NAN"}};if(Jc(e.value))return{unaryFilter:{field:Mr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Zc(e.value))return{unaryFilter:{field:Mr(e.field),op:"IS_NOT_NAN"}};if(Jc(e.value))return{unaryFilter:{field:Mr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mr(e.field),op:Q1(e.op),value:e.value}}}(t):t instanceof _n?function(e){const n=e.getFilters().map(r=>Qp(r));return n.length===1?n[0]:{compositeFilter:{op:Y1(e.op),filters:n}}}(t):Ue()}function X1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Yp(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&k1(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ds(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ds(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jp();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const a=Lp(o,l);a!==null&&r.set(s.key,a),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Wr(this.mutations,e.mutations,(n,r)=>af(n,r))&&Wr(this.baseMutations,e.baseMutations,(n,r)=>af(n,r))}}class mu{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){at(e.mutations.length===r.length);let s=R1;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mu(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=Be.min(),o=Be.min(),l=zt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.oe=e}}function tw(t){const e=K1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.Ze=new rw}addToCollectionParentIndex(e,n){return this.Ze.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(or.min())}updateCollectionGroup(e,n,r){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class rw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new kt(ut.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new kt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new Jr(0)}static Sn(){return new Jr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.changes=new ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ds(r.mutation,s,an.empty(),Tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const s=vr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Es();return i.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=qn();const o=As(),l=As();return n.forEach((a,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof hr)?i=i.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Ds(c.mutation,u,c.mutation.getFieldMask(),Tt.now())):o.set(u.key,an.empty())}),this.recalculateAndSaveOverlays(e,i).next(a=>(a.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var f;return l.set(u,new iw(c,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=As();let s=new St((o,l)=>o-l),i=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(a=>{const u=n.get(a);if(u===null)return;let c=r.get(a)||an.empty();c=l.applyToLocalView(u,c),r.set(a,c);const f=(s.get(l.batchId)||We()).add(a);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),u=a.key,c=a.value,f=jp();c.forEach(h=>{if(!i.has(h)){const m=Lp(n.get(h),r.get(h));m!==null&&f.set(h,m),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return Ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):le.resolve(vr());let l=-1,a=i;return o.next(u=>le.forEach(u,(c,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(c)?le.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{a=a.insert(c,h)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,a,u,We())).next(c=>({batchId:l,changes:Bp(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(r=>{let s=Es();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Es();return this.indexManager.getCollectionParents(e,s).next(o=>le.forEach(o,l=>{const a=function(u,c){return new fi(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,r).next(u=>{u.forEach((c,f)=>{i=i.insert(c,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((l,a)=>{const u=a.getKey();i.get(u)===null&&(i=i.insert(u,Ft.newInvalidDocument(u)))});let o=Es();return i.forEach((l,a)=>{const u=s.get(l);u!==void 0&&Ds(u.mutation,a,an.empty(),Tt.now()),Wo(n,a)&&(o=o.insert(l,a))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return le.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Dn(r.createTime)}),le.resolve()}getNamedQuery(e,n){return le.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:tw(r.bundledQuery),readTime:Dn(r.readTime)}}(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.overlays=new St(Ne.comparator),this.ss=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vr();return le.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ce(e,n,i)}),le.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.ss.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.ss.delete(r)),le.resolve()}getOverlaysForCollection(e,n,r){const s=vr(),i=n.length+1,o=new Ne(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,u=a.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&a.largestBatchId>r&&s.set(a.getKey(),a)}return le.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new St((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=vr(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const l=vr(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((u,c)=>l.set(u,c)),!(l.size()>=s)););return le.resolve(l)}ce(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.ss.get(s.largestBatchId).delete(r.key);this.ss.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Z1(n,r));let i=this.ss.get(n);i===void 0&&(i=We(),this.ss.set(n,i)),this.ss.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this.rs=new kt(At.os),this.us=new kt(At.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new At(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new At(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new Ne(new ut([])),r=new At(n,e),s=new At(n,e+1),i=[];return this.us.forEachInRange([r,s],o=>{this.ls(o),i.push(o.key)}),i}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new Ne(new ut([])),r=new At(n,e),s=new At(n,e+1);let i=We();return this.us.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new At(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return Ne.comparator(e.key,n.key)||tt(e.gs,n.gs)}static cs(e,n){return tt(e.gs,n.gs)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new kt(At.os)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new J1(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.ps=this.ps.add(new At(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,n){return le.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Ts(r),i=s<0?0:s;return le.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),s=new At(n,Number.POSITIVE_INFINITY),i=[];return this.ps.forEachInRange([r,s],o=>{const l=this.Is(o.gs);i.push(l)}),le.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(tt);return n.forEach(s=>{const i=new At(s,0),o=new At(s,Number.POSITIVE_INFINITY);this.ps.forEachInRange([i,o],l=>{r=r.add(l.gs)})}),le.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ne.isDocumentKey(i)||(i=i.child(""));const o=new At(new Ne(i),0);let l=new kt(tt);return this.ps.forEachWhile(a=>{const u=a.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(a.gs)),!0)},o),le.resolve(this.Es(l))}Es(e){const n=[];return e.forEach(r=>{const s=this.Is(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){at(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return le.forEach(n.mutations,s=>{const i=new At(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,n){const r=new At(n,0),s=this.ps.firstAfterOrEqual(r);return le.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.Rs=e,this.docs=new St(Ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return le.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ft.newInvalidDocument(s))}),le.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=qn();const o=n.path,l=new Ne(o.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:u,value:{document:c}}=a.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Z0(J0(c),r)<=0||(s.has(c.key)||Wo(n,c))&&(i=i.insert(c.key,c.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ue()}Ps(e,n){return le.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fw(this)}getSize(e){return le.resolve(this.size)}}class fw extends sw{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Xn.addEntry(e,s)):this.Xn.removeEntry(r)}),le.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.persistence=e,this.vs=new ls(n=>fu(n),hu),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.bs=0,this.Vs=new gu,this.targetCount=0,this.Ss=Jr.Vn()}forEachTarget(e,n){return this.vs.forEach((r,s)=>n(s)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),le.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new Jr(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.xn(n),le.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.vs.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.vs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),le.waitFor(i).next(()=>s)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return le.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),le.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),le.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),le.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return le.resolve(r)}containsKey(e,n){return le.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new uu(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new hw(this),this.indexManager=new nw,this.remoteDocumentCache=function(r){return new cw(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new ew(n),this.$s=new aw(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new uw(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,n,r){Se("MemoryPersistence","Starting transaction:",e);const s=new pw(this.Cs.next());return this.referenceDelegate.Ms(),r(s).next(i=>this.referenceDelegate.Os(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Fs(e,n){return le.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class pw extends t1{constructor(e){super(),this.currentSequenceNumber=e}}class _u{constructor(e){this.persistence=e,this.Bs=new gu,this.Ls=null}static qs(e){return new _u(e)}get Us(){if(this.Ls)return this.Ls;throw Ue()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),le.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),le.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(s=>this.Us.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Us.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Us,r=>{const s=Ne.fromPath(r);return this.Ks(e,s).next(i=>{i||n.removeEntry(s,Be.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return le.or([()=>le.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Fs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=s}static Ni(e,n){let r=We(),s=We();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vu(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Mi(e,n).next(i=>i||this.Oi(e,n,s,r)).next(i=>i||this.Fi(e,n))}Mi(e,n){if(sf(n))return le.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=dl(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=We(...i);return this.$i.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(a=>{const u=this.Bi(n,l);return this.Li(n,u,o,a.readTime)?this.Mi(e,dl(n,null,"F")):this.qi(e,u,n,a)}))})))}Oi(e,n,r,s){return sf(n)||s.isEqual(Be.min())?this.Fi(e,n):this.$i.getDocuments(e,r).next(i=>{const o=this.Bi(n,i);return this.Li(n,o,r,s)?this.Fi(e,n):(Wc()<=Ze.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pl(n)),this.qi(e,o,n,X0(s,-1)))})}Bi(e,n){let r=new kt(Ap(e));return n.forEach((s,i)=>{Wo(e,i)&&(r=r.add(i))}),r}Li(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Fi(e,n){return Wc()<=Ze.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",pl(n)),this.$i.getDocumentsMatchingQuery(e,n,or.min())}qi(e,n,r,s){return this.$i.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,r,s){this.persistence=e,this.Ui=n,this.Tt=s,this.Ki=new St(tt),this.Gi=new ls(i=>fu(i),hu),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ow(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function _w(t,e,n,r){return new gw(t,e,n,r)}async function Xp(t,e){const n=qe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let a=We();for(const u of s){o.push(u.batchId);for(const c of u.mutations)a=a.add(c.key)}for(const u of i){l.push(u.batchId);for(const c of u.mutations)a=a.add(c.key)}return n.localDocuments.getDocuments(r,a).next(u=>({Wi:u,removedBatchIds:o,addedBatchIds:l}))})})}function vw(t,e){const n=qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ji.newChangeBuffer({trackRemovals:!0});return function(o,l,a,u){const c=a.batch,f=c.keys();let h=le.resolve();return f.forEach(m=>{h=h.next(()=>u.getEntry(l,m)).next(g=>{const _=a.docVersions.get(m);at(_!==null),g.version.compareTo(_)<0&&(c.applyToRemoteDocument(g,a),g.isValidDocument()&&(g.setReadTime(a.commitVersion),u.addEntry(g)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=We();for(let a=0;a<o.mutationResults.length;++a)o.mutationResults[a].transformResults.length>0&&(l=l.add(o.batch.mutations[a].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Jp(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function yw(t,e){const n=qe(t),r=e.snapshotVersion;let s=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ji.newChangeBuffer({trackRemovals:!0});s=n.Ki;const l=[];e.targetChanges.forEach((c,f)=>{const h=s.get(f);if(!h)return;l.push(n.Ns.removeMatchingKeys(i,c.removedDocuments,f).next(()=>n.Ns.addMatchingKeys(i,c.addedDocuments,f)));let m=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(f)?m=m.withResumeToken(zt.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,r)),s=s.insert(f,m),function(g,_,v){return g.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,m,c)&&l.push(n.Ns.updateTargetData(i,m))});let a=qn(),u=We();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),l.push(ww(i,o,e.documentUpdates).next(c=>{a=c.Hi,u=c.Ji})),!r.isEqual(Be.min())){const c=n.Ns.getLastRemoteSnapshotVersion(i).next(f=>n.Ns.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(c)}return le.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,a,u)).next(()=>a)}).then(i=>(n.Ki=s,i))}function ww(t,e,n){let r=We(),s=We();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=qn();return n.forEach((l,a)=>{const u=i.get(l);a.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),a.isNoDocument()&&a.version.isEqual(Be.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!u.isValidDocument()||a.version.compareTo(u.version)>0||a.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):Se("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",a.version)}),{Hi:o,Ji:s}})}function bw(t,e){const n=qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ew(t,e){const n=qe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ns.getTargetData(r,e).next(i=>i?(s=i,le.resolve(s)):n.Ns.allocateTargetId(r).next(o=>(s=new wr(e,o,0,r.currentSequenceNumber),n.Ns.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ki.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function vl(t,e,n){const r=qe(t),s=r.Ki.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ci(o))throw o;Se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(s.target)}function pf(t,e,n){const r=qe(t);let s=Be.min(),i=We();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,a,u){const c=qe(l),f=c.Gi.get(u);return f!==void 0?le.resolve(c.Ki.get(f)):c.Ns.getTargetData(a,u)}(r,o,xn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(o,l.targetId).next(a=>{i=a})}).next(()=>r.Ui.getDocumentsMatchingQuery(o,e,n?s:Be.min(),n?i:We())).next(l=>(Iw(r,v1(e),l),{documents:l,Yi:i})))}function Iw(t,e,n){let r=t.Qi.get(e)||Be.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Qi.set(e,r)}class mf{constructor(){this.activeTargetIds=xp()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tw{constructor(){this.Ur=new mf,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new mf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ni=null;function Oa(){return Ni===null?Ni=268435456+Math.round(2147483648*Math.random()):Ni++,"0x"+Ni.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class Aw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,s,i){const o=Oa(),l=this.fo(e,n);Se("RestConnection",`Sending RPC '${e}' ${o}:`,l,r);const a={};return this._o(a,s,i),this.wo(e,l,a,r).then(u=>(Se("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw al("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",l,"request:",r),u})}mo(e,n,r,s,i,o){return this.lo(e,n,r,s,i)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+as,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}fo(e,n){const r=Sw[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,s){const i=Oa();return new Promise((o,l)=>{const a=new j0;a.setWithCredentials(!0),a.listenOnce(V0.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ra.NO_ERROR:const c=a.getResponseJson();Se(Ut,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(c)),o(c);break;case Ra.TIMEOUT:Se(Ut,`RPC '${e}' ${i} timed out`),l(new Ie(se.DEADLINE_EXCEEDED,"Request time out"));break;case Ra.HTTP_ERROR:const f=a.getStatus();if(Se(Ut,`RPC '${e}' ${i} failed with status:`,f,"response text:",a.getResponseText()),f>0){let h=a.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h?.error;if(m&&m.status&&m.message){const g=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(v)>=0?v:se.UNKNOWN}(m.status);l(new Ie(g,m.message))}else l(new Ie(se.UNKNOWN,"Server responded with status "+a.getStatus()))}else l(new Ie(se.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{Se(Ut,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);Se(Ut,`RPC '${e}' ${i} sending request:`,s),a.send(n,"POST",u,r,15)})}yo(e,n,r){const s=Oa(),i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=M0(),l=U0(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new B0({})),this._o(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=i.join("");Se(Ut,`Creating RPC '${e}' stream ${s}: ${u}`,a);const c=o.createWebChannel(u,a);let f=!1,h=!1;const m=new Dw({Yr:_=>{h?Se(Ut,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(f||(Se(Ut,`Opening RPC '${e}' stream ${s} transport.`),c.open(),f=!0),Se(Ut,`RPC '${e}' stream ${s} sending:`,_),c.send(_))},Zr:()=>c.close()}),g=(_,v,I)=>{_.listen(v,k=>{try{I(k)}catch(S){setTimeout(()=>{throw S},0)}})};return g(c,Di.EventType.OPEN,()=>{h||Se(Ut,`RPC '${e}' stream ${s} transport opened.`)}),g(c,Di.EventType.CLOSE,()=>{h||(h=!0,Se(Ut,`RPC '${e}' stream ${s} transport closed`),m.oo())}),g(c,Di.EventType.ERROR,_=>{h||(h=!0,al(Ut,`RPC '${e}' stream ${s} transport errored:`,_),m.oo(new Ie(se.UNAVAILABLE,"The operation could not be completed")))}),g(c,Di.EventType.MESSAGE,_=>{var v;if(!h){const I=_.data[0];at(!!I);const k=I,S=k.error||((v=k[0])===null||v===void 0?void 0:v.error);if(S){Se(Ut,`RPC '${e}' stream ${s} received error:`,S);const T=S.status;let P=function(R){const O=_t[R];if(O!==void 0)return Vp(O)}(T),M=S.message;P===void 0&&(P=se.INTERNAL,M="Unknown error status: "+T+" with message "+S.message),h=!0,m.oo(new Ie(P,M)),c.close()}else Se(Ut,`RPC '${e}' stream ${s} received:`,I),m.uo(I)}}),g(l,F0.STAT_EVENT,_=>{_.stat===Kc.PROXY?Se(Ut,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Kc.NOPROXY&&Se(Ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.ro()},0),m}}function Pa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){return new V1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=s,this.To=i,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),s=Math.max(0,n-r);s>0&&Se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,s,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n,r,s,i,o,l,a){this.Ys=e,this.So=r,this.Do=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Zp(e,n)}$o(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.$o()&&await this.close(0)}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(jn(n.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Co===n&&this.jo(r,s)},r=>{e(()=>{const s=new Ie(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(s)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(s=>{r(()=>this.zo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return Se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(Se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $w extends em{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.Tt=i}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=j1(this.Tt,e),r=function(s){if(!("targetChange"in s))return Be.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Be.min():i.readTime?Dn(i.readTime):Be.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=_l(this.Tt),n.addTarget=function(s,i){let o;const l=i.target;return o=fl(l)?{documents:H1(s,l)}:{query:z1(s,l)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=zp(s,i.resumeToken):i.snapshotVersion.compareTo(Be.min())>0&&(o.readTime=fo(s,i.snapshotVersion.toTimestamp())),o}(this.Tt,e);const r=G1(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=_l(this.Tt),n.removeTarget=e,this.qo(n)}}class Nw extends em{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.Tt=i,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=q1(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.eu(r,n)}return at(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=_l(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>x1(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=s,this.iu=!1}ru(){if(this.iu)throw new Ie(se.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.lo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(se.UNKNOWN,s.toString())})}mo(e,n,r,s){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.mo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ie(se.UNKNOWN,i.toString())})}terminate(){this.iu=!0}}class Cw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(jn(n),this.cu=!1):Se("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=i,this.yu.Gr(o=>{r.enqueueAndForget(async()=>{Or(this)&&(Se("RemoteStore","Restarting streams for network reachability change."),await async function(l){const a=qe(l);a.mu.add(4),await pi(a),a.pu.set("Unknown"),a.mu.delete(4),await Zo(a)}(this))})}),this.pu=new Cw(r,s)}}async function Zo(t){if(Or(t))for(const e of t.gu)await e(!0)}async function pi(t){for(const e of t.gu)await e(!1)}function tm(t,e){const n=qe(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),bu(n)?wu(n):us(n).Mo()&&yu(n,e))}function nm(t,e){const n=qe(t),r=us(n);n.wu.delete(e),r.Mo()&&rm(n,e),n.wu.size===0&&(r.Mo()?r.Bo():Or(n)&&n.pu.set("Unknown"))}function yu(t,e){t.Iu.Ot(e.targetId),us(t).Jo(e)}function rm(t,e){t.Iu.Ot(e),us(t).Yo(e)}function wu(t){t.Iu=new P1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),us(t).start(),t.pu.au()}function bu(t){return Or(t)&&!us(t).$o()&&t.wu.size>0}function Or(t){return qe(t).mu.size===0}function sm(t){t.Iu=void 0}async function Pw(t){t.wu.forEach((e,n)=>{yu(t,e)})}async function Lw(t,e){sm(t),bu(t)?(t.pu.fu(e),wu(t)):t.pu.set("Unknown")}async function Mw(t,e,n){if(t.pu.set("Online"),e instanceof Hp&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.wu.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.wu.delete(o),r.Iu.removeTarget(o))}(t,e)}catch(r){Se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ho(t,r)}else if(e instanceof Ui?t.Iu.Qt(e):e instanceof qp?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(Be.min()))try{const r=await Jp(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Iu.ee(i);return o.targetChanges.forEach((l,a)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.wu.get(a);u&&s.wu.set(a,u.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach(l=>{const a=s.wu.get(l);if(!a)return;s.wu.set(l,a.withResumeToken(zt.EMPTY_BYTE_STRING,a.snapshotVersion)),rm(s,l);const u=new wr(a.target,l,1,a.sequenceNumber);yu(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Se("RemoteStore","Failed to raise snapshot:",r),await ho(t,r)}}async function ho(t,e,n){if(!ci(e))throw e;t.mu.add(1),await pi(t),t.pu.set("Offline"),n||(n=()=>Jp(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Se("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await Zo(t)})}function im(t,e){return e().catch(n=>ho(t,n,e))}async function ea(t){const e=qe(t),n=lr(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Uw(e);)try{const s=await bw(e.localStore,r);if(s===null){e._u.length===0&&n.Bo();break}r=s.batchId,Vw(e,s)}catch(s){await ho(e,s)}om(e)&&am(e)}function Uw(t){return Or(t)&&t._u.length<10}function Vw(t,e){t._u.push(e);const n=lr(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function om(t){return Or(t)&&!lr(t).$o()&&t._u.length>0}function am(t){lr(t).start()}async function Fw(t){lr(t).su()}async function Bw(t){const e=lr(t);for(const n of t._u)e.tu(n.mutations)}async function jw(t,e,n){const r=t._u.shift(),s=mu.from(r,e,n);await im(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ea(t)}async function xw(t,e){e&&lr(t).Xo&&await async function(n,r){if(s=r.code,$1(s)&&s!==se.ABORTED){const i=n._u.shift();lr(n).Fo(),await im(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await ea(n)}var s}(t,e),om(t)&&am(t)}async function _f(t,e){const n=qe(t);n.asyncQueue.verifyOperationInProgress(),Se("RemoteStore","RemoteStore received new credentials");const r=Or(n);n.mu.add(3),await pi(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await Zo(n)}async function qw(t,e){const n=qe(t);e?(n.mu.delete(2),await Zo(n)):e||(n.mu.add(2),await pi(n),n.pu.set("Unknown"))}function us(t){return t.Tu||(t.Tu=function(e,n,r){const s=qe(e);return s.ru(),new $w(n,s.connection,s.authCredentials,s.appCheckCredentials,s.Tt,r)}(t.datastore,t.asyncQueue,{Xr:Pw.bind(null,t),no:Lw.bind(null,t),Ho:Mw.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.Fo(),bu(t)?wu(t):t.pu.set("Unknown")):(await t.Tu.stop(),sm(t))})),t.Tu}function lr(t){return t.Eu||(t.Eu=function(e,n,r){const s=qe(e);return s.ru(),new Nw(n,s.connection,s.authCredentials,s.appCheckCredentials,s.Tt,r)}(t.datastore,t.asyncQueue,{Xr:Fw.bind(null,t),no:xw.bind(null,t),nu:Bw.bind(null,t),eu:jw.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.Fo(),await ea(t)):(await t.Eu.stop(),t._u.length>0&&(Se("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Eu(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iu(t,e){if(jn("AsyncQueue",`${e}: ${t}`),ci(t))return new Ie(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=Es(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new jr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.Au=new St(Ne.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):Ue():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zr{constructor(e,n,r,s,i,o,l,a,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Zr(e,n,jr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Go(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.Pu=void 0,this.listeners=[]}}class zw{constructor(){this.queries=new ls(e=>Dp(e),Go),this.onlineState="Unknown",this.vu=new Set}}async function Tu(t,e){const n=qe(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Hw),s)try{i.Pu=await n.onListen(r)}catch(o){const l=Iu(o,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.listeners.push(e),e.bu(n.onlineState),i.Pu&&e.Vu(i.Pu)&&Su(n)}async function ku(t,e){const n=qe(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function Kw(t,e){const n=qe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.listeners)l.Vu(s)&&(r=!0);o.Pu=s}}r&&Su(n)}function Gw(t,e,n){const r=qe(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Su(t){t.vu.forEach(e=>{e.next()})}class Du{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Zr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.$u||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=Zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this.key=e}}class um{constructor(e){this.key=e}}class Ww{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=We(),this.mutatedKeys=We(),this.ju=Ap(e),this.zu=new jr(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new vf,s=n?n.zu:this.zu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,f)=>{const h=s.get(c),m=Wo(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==_&&(r.track({type:3,doc:m}),v=!0):this.Yu(h,m)||(r.track({type:2,doc:m}),v=!0,(a&&this.ju(m,a)>0||u&&this.ju(m,u)<0)&&(l=!0)):!h&&m?(r.track({type:0,doc:m}),v=!0):h&&!m&&(r.track({type:1,doc:h}),v=!0,(a||u)&&(l=!0)),v&&(m?(o=o.add(m),i=_?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{zu:o,Ju:r,Li:l,mutatedKeys:i}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const i=e.Ju.Ru();i.sort((u,c)=>function(f,h){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return m(f)-m(h)}(u.type,c.type)||this.ju(u.doc,c.doc)),this.Zu(r);const o=n?this.Xu():[],l=this.Qu.size===0&&this.current?1:0,a=l!==this.Gu;return this.Gu=l,i.length!==0||a?{snapshot:new Zr(this.query,e.zu,s,i,e.mutatedKeys,l===0,a,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new vf,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=We(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new um(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new lm(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=We();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return Zr.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class Qw{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Yw{constructor(e){this.key=e,this.ic=!1}}class Xw{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new ls(l=>Dp(l),Go),this.uc=new Map,this.cc=new Set,this.ac=new St(Ne.comparator),this.hc=new Map,this.lc=new gu,this.fc={},this.dc=new Map,this._c=Jr.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function Jw(t,e){const n=lb(t);let r,s;const i=n.oc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.sc();else{const o=await Ew(n.localStore,xn(e));n.isPrimaryClient&&tm(n.remoteStore,o);const l=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await Zw(n,e,r,l==="current",o.resumeToken)}return s}async function Zw(t,e,n,r,s){t.mc=(f,h,m)=>async function(g,_,v,I){let k=_.view.Hu(v);k.Li&&(k=await pf(g.localStore,_.query,!1).then(({documents:P})=>_.view.Hu(P,k)));const S=I&&I.targetChanges.get(_.targetId),T=_.view.applyChanges(k,g.isPrimaryClient,S);return wf(g,_.targetId,T.tc),T.snapshot}(t,f,h,m);const i=await pf(t.localStore,e,!0),o=new Ww(e,i.Yi),l=o.Hu(i.documents),a=di.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,a);wf(t,n,u.tc);const c=new Qw(e,n,o);return t.oc.set(e,c),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),u.snapshot}async function eb(t,e){const n=qe(t),r=n.oc.get(e),s=n.uc.get(r.targetId);if(s.length>1)return n.uc.set(r.targetId,s.filter(i=>!Go(i,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await vl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),nm(n.remoteStore,r.targetId),yl(n,r.targetId)}).catch(ui)):(yl(n,r.targetId),await vl(n.localStore,r.targetId,!0))}async function tb(t,e,n){const r=ub(t);try{const s=await function(i,o){const l=qe(i),a=Tt.now(),u=o.reduce((h,m)=>h.add(m.key),We());let c,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=qn(),g=We();return l.ji.getEntries(h,u).next(_=>{m=_,m.forEach((v,I)=>{I.isValidDocument()||(g=g.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,m)).next(_=>{c=_;const v=[];for(const I of o){const k=S1(I,c.get(I.key).overlayedDocument);k!=null&&v.push(new hr(I.key,k,Tp(k.value.mapValue),Sn.exists(!0)))}return l.mutationQueue.addMutationBatch(h,a,v,o)}).next(_=>{f=_;const v=_.applyToLocalDocumentSet(c,g);return l.documentOverlayCache.saveOverlays(h,_.batchId,v)})}).then(()=>({batchId:f.batchId,changes:Bp(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let a=i.fc[i.currentUser.toKey()];a||(a=new St(tt)),a=a.insert(o,l),i.fc[i.currentUser.toKey()]=a}(r,s.batchId,n),await mi(r,s.changes),await ea(r.remoteStore)}catch(s){const i=Iu(s,"Failed to persist write");n.reject(i)}}async function cm(t,e){const n=qe(t);try{const r=await yw(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.hc.get(i);o&&(at(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ic=!0:s.modifiedDocuments.size>0?at(o.ic):s.removedDocuments.size>0&&(at(o.ic),o.ic=!1))}),await mi(n,r,e)}catch(r){await ui(r)}}function yf(t,e,n){const r=qe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.oc.forEach((i,o)=>{const l=o.view.bu(e);l.snapshot&&s.push(l.snapshot)}),function(i,o){const l=qe(i);l.onlineState=o;let a=!1;l.queries.forEach((u,c)=>{for(const f of c.listeners)f.bu(o)&&(a=!0)}),a&&Su(l)}(r.eventManager,e),s.length&&r.rc.Ho(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nb(t,e,n){const r=qe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.hc.get(e),i=s&&s.key;if(i){let o=new St(Ne.comparator);o=o.insert(i,Ft.newNoDocument(i,Be.min()));const l=We().add(i),a=new Xo(Be.min(),new Map,new kt(tt),o,l);await cm(r,a),r.ac=r.ac.remove(i),r.hc.delete(e),Au(r)}else await vl(r.localStore,e,!1).then(()=>yl(r,e,n)).catch(ui)}async function rb(t,e){const n=qe(t),r=e.batch.batchId;try{const s=await vw(n.localStore,e);hm(n,r,null),fm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mi(n,s)}catch(s){await ui(s)}}async function sb(t,e,n){const r=qe(t);try{const s=await function(i,o){const l=qe(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",a=>{let u;return l.mutationQueue.lookupMutationBatch(a,o).next(c=>(at(c!==null),u=c.keys(),l.mutationQueue.removeMutationBatch(a,c))).next(()=>l.mutationQueue.performConsistencyCheck(a)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(a,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,u)).next(()=>l.localDocuments.getDocuments(a,u))})}(r.localStore,e);hm(r,e,n),fm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mi(r,s)}catch(s){await ui(s)}}function fm(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function hm(t,e,n){const r=qe(t);let s=r.fc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.fc[r.currentUser.toKey()]=s}}function yl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||dm(t,r)})}function dm(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(nm(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),Au(t))}function wf(t,e,n){for(const r of n)r instanceof lm?(t.lc.addReference(r.key,e),ib(t,r)):r instanceof um?(Se("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||dm(t,r.key)):Ue()}function ib(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(Se("SyncEngine","New document in limbo: "+n),t.cc.add(r),Au(t))}function Au(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new Ne(ut.fromString(e)),r=t._c.next();t.hc.set(r,new Yw(n)),t.ac=t.ac.insert(n,r),tm(t.remoteStore,new wr(xn(Ko(n.path)),r,2,uu.at))}}async function mi(t,e,n){const r=qe(t),s=[],i=[],o=[];r.oc.isEmpty()||(r.oc.forEach((l,a)=>{o.push(r.mc(a,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,u?.fromCache?"not-current":"current"),u){s.push(u);const c=vu.Ni(a.targetId,u);i.push(c)}}))}),await Promise.all(o),r.rc.Ho(s),await async function(l,a){const u=qe(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>le.forEach(a,f=>le.forEach(f.Ci,h=>u.persistence.referenceDelegate.addReference(c,f.targetId,h)).next(()=>le.forEach(f.xi,h=>u.persistence.referenceDelegate.removeReference(c,f.targetId,h)))))}catch(c){if(!ci(c))throw c;Se("LocalStore","Failed to update sequence numbers: "+c)}for(const c of a){const f=c.targetId;if(!c.fromCache){const h=u.Ki.get(f),m=h.snapshotVersion,g=h.withLastLimboFreeSnapshotVersion(m);u.Ki=u.Ki.insert(f,g)}}}(r.localStore,i))}async function ob(t,e){const n=qe(t);if(!n.currentUser.isEqual(e)){Se("SyncEngine","User change. New user:",e.toKey());const r=await Xp(n.localStore,e);n.currentUser=e,function(s,i){s.dc.forEach(o=>{o.forEach(l=>{l.reject(new Ie(se.CANCELLED,i))})}),s.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mi(n,r.Wi)}}function ab(t,e){const n=qe(t),r=n.hc.get(e);if(r&&r.ic)return We().add(r.key);{let s=We();const i=n.uc.get(e);if(!i)return s;for(const o of i){const l=n.oc.get(o);s=s.unionWith(l.view.Wu)}return s}}function lb(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ab.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nb.bind(null,e),e.rc.Ho=Kw.bind(null,e.eventManager),e.rc.gc=Gw.bind(null,e.eventManager),e}function ub(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sb.bind(null,e),e}class cb{constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=Jo(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return _w(this.persistence,new mw,e.initialUser,this.Tt)}Tc(e){return new dw(_u.qs,this.Tt)}Ic(e){return new Tw}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class fb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ob.bind(null,this.syncEngine),await qw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zw}createDatastore(e){const n=Jo(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new Aw(s));var s;return function(i,o,l,a){return new Rw(i,o,l,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=l=>yf(this.syncEngine,l,0),o=gf.C()?new gf:new kw,new Ow(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,l,a,u){const c=new Xw(r,s,i,o,l,a);return u&&(c.wc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=qe(e);Se("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await pi(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vt.UNAUTHENTICATED,this.clientId=pp.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Se("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Se("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Iu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function db(t,e){t.asyncQueue.verifyOperationInProgress(),Se("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Xp(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function pb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mb(t);Se("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>_f(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>_f(e.remoteStore,i)),t.onlineComponents=e}async function mb(t){return t.offlineComponents||(Se("FirestoreClient","Using default OfflineComponentProvider"),await db(t,new cb)),t.offlineComponents}async function pm(t){return t.onlineComponents||(Se("FirestoreClient","Using default OnlineComponentProvider"),await pb(t,new fb)),t.onlineComponents}function gb(t){return pm(t).then(e=>e.syncEngine)}async function po(t){const e=await pm(t),n=e.eventManager;return n.onListen=Jw.bind(null,e.syncEngine),n.onUnlisten=eb.bind(null,e.syncEngine),n}function _b(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,a){const u=new $u({next:f=>{i.enqueueAndForget(()=>ku(s,c));const h=f.docs.has(o);!h&&f.fromCache?a.reject(new Ie(se.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?a.reject(new Ie(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(f)},error:f=>a.reject(f)}),c=new Du(Ko(o.path),u,{includeMetadataChanges:!0,$u:!0});return Tu(s,c)}(await po(t),t.asyncQueue,e,n,r)),r.promise}function vb(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,a){const u=new $u({next:f=>{i.enqueueAndForget(()=>ku(s,c)),f.fromCache&&l.source==="server"?a.reject(new Ie(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(f)},error:f=>a.reject(f)}),c=new Du(o,u,{includeMetadataChanges:!0,$u:!0});return Tu(s,c)}(await po(t),t.asyncQueue,e,n,r)),r.promise}const bf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t,e,n){if(!n)throw new Ie(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yb(t,e,n,r){if(e===!0&&r===!0)throw new Ie(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ef(t){if(!Ne.isDocumentKey(t))throw new Ie(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function If(t){if(Ne.isDocumentKey(t))throw new Ie(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ta(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue()}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ta(t);throw new Ie(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ie(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ie(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tf(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new x0;switch(n.type){case"gapi":const r=n.client;return new K0(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ie(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=bf.get(e);n&&(Se("ComponentProvider","Removing Datastore"),bf.delete(e),n.terminate())}(this),Promise.resolve()}}function wb(t,e,n,r={}){var s;const i=(t=fn(t,na))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&al("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=Vt.MOCK_USER;else{o=id(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Ie(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Vt(a)}t._authCredentials=new q0(new dp(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}}class Pr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pr(this.firestore,e,this._query)}}class sr extends Pr{constructor(e,n,r){super(e,n,Ko(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Ne(e))}withConverter(e){return new sr(this.firestore,e,this._path)}}function gm(t,e,...n){if(t=gt(t),mm("collection","path",e),t instanceof na){const r=ut.fromString(e,...n);return If(r),new sr(t,null,r)}{if(!(t instanceof qt||t instanceof sr))throw new Ie(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return If(r),new sr(t.firestore,null,r)}}function zn(t,e,...n){if(t=gt(t),arguments.length===1&&(e=pp.R()),mm("doc","path",e),t instanceof na){const r=ut.fromString(e,...n);return Ef(r),new qt(t,null,new Ne(r))}{if(!(t instanceof qt||t instanceof sr))throw new Ie(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return Ef(r),new qt(t.firestore,t instanceof sr?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Zp(this,"async_queue_retry"),this.Hc=()=>{const n=Pa();n&&Se("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=Pa();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=Pa();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new Vn;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!ci(e))throw e;Se("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw jn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const s=Eu.createAndSchedule(this,e,n,r,i=>this.Xc(i));return this.Gc.push(s),s}Jc(){this.Qc&&Ue()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function kf(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Dr extends na{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new bb,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||_m(this),this._firestoreClient.terminate()}}function Eb(t,e){const n=typeof t=="object"?t:Bl(),r=typeof t=="string"?t:e||"(default)",s=$o(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=rd("firestore");i&&wb(s,...i)}return s}function ra(t){return t._firestoreClient||_m(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function _m(t){var e;const n=t._freezeSettings(),r=function(s,i,o,l){return new n1(s,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new hb(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es(zt.fromBase64String(e))}catch(n){throw new Ie(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new es(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=/^__.*__$/;class Tb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new hi(e,this.data,n,this.fieldTransforms)}}class vm{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ym(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class Cu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ia(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Cu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.oa({path:r,ca:!1});return s.aa(e),s}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.oa({path:r,ca:!1});return s.ia(),s}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return mo(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(ym(this.ra)&&Ib.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class kb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||Jo(e)}wa(e,n,r,s=!1){return new Cu({ra:e,methodName:n,_a:r,path:Bt.emptyPath(),ca:!1,da:s},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Ou(t){const e=t._freezeSettings(),n=Jo(t._databaseId);return new kb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sb(t,e,n,r,s,i={}){const o=t.wa(i.merge||i.mergeFields?2:0,e,n,s);Pu("Data must be an object, but it was:",o,r);const l=wm(r,o);let a,u;if(i.merge)a=new an(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const f of i.mergeFields){const h=wl(e,f,n);if(!o.contains(h))throw new Ie(se.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Em(c,h)||c.push(h)}a=new an(c),u=o.fieldTransforms.filter(f=>a.covers(f.field))}else a=null,u=o.fieldTransforms;return new Tb(new en(l),a,u)}class ia extends Nu{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ia}}function Db(t,e,n,r){const s=t.wa(1,e,n);Pu("Data must be an object, but it was:",s,r);const i=[],o=en.empty();Cr(r,(a,u)=>{const c=Lu(e,a,n);u=gt(u);const f=s.ha(c);if(u instanceof ia)i.push(c);else{const h=gi(u,f);h!=null&&(i.push(c),o.set(c,h))}});const l=new an(i);return new vm(o,l,s.fieldTransforms)}function Ab(t,e,n,r,s,i){const o=t.wa(1,e,n),l=[wl(e,r,n)],a=[s];if(i.length%2!=0)throw new Ie(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)l.push(wl(e,i[h])),a.push(i[h+1]);const u=[],c=en.empty();for(let h=l.length-1;h>=0;--h)if(!Em(u,l[h])){const m=l[h];let g=a[h];g=gt(g);const _=o.ha(m);if(g instanceof ia)u.push(m);else{const v=gi(g,_);v!=null&&(u.push(m),c.set(m,v))}}const f=new an(u);return new vm(c,f,o.fieldTransforms)}function $b(t,e,n,r=!1){return gi(n,t.wa(r?4:3,e))}function gi(t,e){if(bm(t=gt(t)))return Pu("Unsupported field value:",e,t),wm(t,e);if(t instanceof Nu)return function(n,r){if(!ym(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let l=gi(o,r.la(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=gt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return w1(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Tt.fromDate(n);return{timestampValue:fo(r.Tt,s)}}if(n instanceof Tt){const s=new Tt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:fo(r.Tt,s)}}if(n instanceof Ru)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof es)return{bytesValue:zp(r.Tt,n._byteString)};if(n instanceof qt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.fa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pu(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${ta(n)}`)}(t,e)}function wm(t,e){const n={};return mp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cr(t,(r,s)=>{const i=gi(s,e.ua(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function bm(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Ru||t instanceof es||t instanceof qt||t instanceof Nu)}function Pu(t,e,n){if(!bm(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=ta(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function wl(t,e,n){if((e=gt(e))instanceof sa)return e._internalPath;if(typeof e=="string")return Lu(t,e);throw mo("Field path arguments must be of type string or ",t,!1,void 0,n)}const Nb=new RegExp("[~\\*/\\[\\]]");function Lu(t,e,n){if(e.search(Nb)>=0)throw mo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sa(...e.split("."))._internalPath}catch{throw mo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mo(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(i||o)&&(a+=" (found",i&&(a+=` in field ${r}`),o&&(a+=` in document ${s}`),a+=")"),new Ie(se.INVALID_ARGUMENT,l+t+a)}function Em(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Rb extends Im{data(){return super.data()}}function Mu(t,e){return typeof e=="string"?Lu(t,e):e instanceof sa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uu{}class Cb extends Uu{}function Vu(t,e,...n){let r=[];e instanceof Uu&&r.push(e),r=r.concat(n),function(s){const i=s.filter(l=>l instanceof Fu).length,o=s.filter(l=>l instanceof oa).length;if(i>1||i>0&&o>0)throw new Ie(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class oa extends Cb{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new oa(e,n,r)}_apply(e){const n=this._parse(e);return km(e._query,n),new Pr(e.firestore,e.converter,hl(e._query,n))}_parse(e){const n=Ou(e.firestore);return function(s,i,o,l,a,u,c){let f;if(a.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ie(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Df(c,u);const h=[];for(const m of c)h.push(Sf(l,s,m));f={arrayValue:{values:h}}}else f=Sf(l,s,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Df(c,u),f=$b(o,i,c,u==="in"||u==="not-in");return wt.create(a,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function go(t,e,n){const r=e,s=Mu("where",t);return oa._create(s,r,n)}class Fu extends Uu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let i=r;const o=s.getFlattenedFilters();for(const l of o)km(i,l),i=hl(i,l)}(e._query,n),new Pr(e.firestore,e.converter,hl(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Sf(t,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new Ie(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sp(e)&&n.indexOf("/")!==-1)throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ut.fromString(n));if(!Ne.isDocumentKey(r))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xc(t,new Ne(r))}if(n instanceof qt)return Xc(t,n._key);throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ta(n)}.`)}function Df(t,e){if(!Array.isArray(t)||t.length===0)throw new Ie(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function km(t,e){if(e.isInequality()){const r=du(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=kp(t);i!==null&&Ob(t,s,i)}const n=function(r,s){for(const i of r)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ie(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Ob(t,e,n){if(!n.isEqual(e))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Pb{convertValue(e,n="none"){switch(Sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ue()}}convertObject(e,n){const r={};return Cr(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Ru(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_p(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(js(e));default:return null}}convertTimestamp(e){const n=ar(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ut.fromString(e);at(Yp(r));const s=new Bs(r.get(1),r.get(3)),i=new Ne(r.popFirst(5));return s.isEqual(n)||jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sm extends Im{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vi extends Sm{data(e={}){return super.data(e)}}class Dm{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Is(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vi(this._firestore,this._userDataWriter,r.key,r,new Is(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const l=new Vi(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Is(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new Vi(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Is(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let a=-1,u=-1;return o.type!==0&&(a=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:Mb(o.type),doc:l,oldIndex:a,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Mb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t){t=fn(t,qt);const e=fn(t.firestore,Dr);return _b(ra(e),t._key).then(n=>Rm(e,t,n))}class Bu extends Pb{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function Ub(t){t=fn(t,Pr);const e=fn(t.firestore,Dr),n=ra(e),r=new Bu(e);return Tm(t._query),vb(n,t._query).then(s=>new Dm(e,r,t,s))}function aa(t,e,n){t=fn(t,qt);const r=fn(t.firestore,Dr),s=Lb(t.converter,e,n);return Nm(r,[Sb(Ou(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Sn.none())])}function $s(t,e,n,...r){t=fn(t,qt);const s=fn(t.firestore,Dr),i=Ou(s);let o;return o=typeof(e=gt(e))=="string"||e instanceof sa?Ab(i,"updateDoc",t._key,e,n,r):Db(i,"updateDoc",t._key,e),Nm(s,[o.toMutation(t._key,Sn.exists(!0))])}function $m(t,...e){var n,r,s;t=gt(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||kf(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges};if(kf(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let a,u,c;if(t instanceof qt)u=fn(t.firestore,Dr),c=Ko(t._key.path),a={next:f=>{e[o]&&e[o](Rm(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=fn(t,Pr);u=fn(f.firestore,Dr),c=f._query;const h=new Bu(u);a={next:m=>{e[o]&&e[o](new Dm(u,h,f,m))},error:e[o+1],complete:e[o+2]},Tm(t._query)}return function(f,h,m,g){const _=new $u(g),v=new Du(h,_,m);return f.asyncQueue.enqueueAndForget(async()=>Tu(await po(f),v)),()=>{_.bc(),f.asyncQueue.enqueueAndForget(async()=>ku(await po(f),v))}}(ra(u),c,l,a)}function Nm(t,e){return function(n,r){const s=new Vn;return n.asyncQueue.enqueueAndForget(async()=>tb(await gb(n),r,s)),s.promise}(ra(t),e)}function Rm(t,e,n){const r=n.docs.get(e._key),s=new Bu(t);return new Sm(t,s,e._key,r,new Is(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){as=n})(ss),Tr(new ir("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Dr(new H0(n.getProvider("auth-internal")),new W0(n.getProvider("app-check-internal")),function(l,a){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ie(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bs(l.options.projectId,a)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),kn(Gc,"3.9.0",t),kn(Gc,"3.9.0","esm2017")})();var Vb="firebase",Fb="9.18.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn(Vb,Fb,"app");function ju(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Cm(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bb=Cm,Om=new Js("auth","Firebase",Cm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Vl("@firebase/auth");function Fi(t,...e){Af.logLevel<=Ze.ERROR&&Af.error(`Auth (${ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,...e){throw xu(t,...e)}function An(t,...e){return xu(t,...e)}function jb(t,e,n){const r=Object.assign(Object.assign({},Bb()),{[e]:n});return new Js("auth","Firebase",r).create(e,{appName:t.name})}function xu(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Om.create(t,...e)}function Le(t,e,...n){if(!t)throw xu(e,...n)}function Mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fi(e),new Error(e)}function Hn(t,e){t||Mn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Map;function Un(t){Hn(t instanceof Function,"Expected a class definition");let e=$f.get(t);return e?(Hn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$f.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t,e){const n=$o(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Xi(i,e??{}))return s;vn(s,"already-initialized")}return n.initialize({options:e})}function qb(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Un);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Hb(){return Nf()==="http:"||Nf()==="https:"}function Nf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hb()||Iv()||"connection"in navigator)?navigator.onLine:!0}function Kb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hn(n>e,"Short delay should be less than long delay!"),this.isMobile=bv()||Tv()}get(){return zb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t,e){Hn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new _i(3e4,6e4);function la(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vi(t,e,n,r,s={}){return Lm(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Zs(Object.assign({key:t.config.apiKey},o)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Pm.fetch()(Mm(t,t.config.apiHost,n,l),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},i))})}async function Lm(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Gb),e);try{const s=new Qb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ri(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[a,u]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ri(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw Ri(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw Ri(t,"user-disabled",o);const c=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jb(t,c,u);vn(t,c)}}catch(s){if(s instanceof Pn)throw s;vn(t,"internal-error",{message:String(s)})}}async function ua(t,e,n,r,s={}){const i=await vi(t,e,n,r,s);return"mfaPendingCredential"in i&&vn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Mm(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?qu(t.config,s):`${t.config.apiScheme}://${s}`}class Qb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(An(this.auth,"network-request-failed")),Wb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ri(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=An(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(t,e){return vi(t,"POST","/v1/accounts:delete",e)}async function Xb(t,e){return vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jb(t,e=!1){const n=gt(t),r=await n.getIdToken(e),s=Hu(r);Le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Ns(La(s.auth_time)),issuedAtTime:Ns(La(s.iat)),expirationTime:Ns(La(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function La(t){return Number(t)*1e3}function Hu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fi("JWT malformed, contained fewer than 3 sections"),null;try{const s=td(n);return s?JSON.parse(s):(Fi("Failed to decode base64 JWT payload"),null)}catch(s){return Fi("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Zb(t){const e=Hu(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pn&&eE(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ns(this.lastLoginAt),this.creationTime=Ns(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t){var e;const n=t.auth,r=await t.getIdToken(),s=await zs(t,Xb(n,{idToken:r}));Le(s?.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?sE(i.providerUserInfo):[],l=rE(t.providerData,o),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!l?.length,c=a?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Um(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function nE(t){const e=gt(t);await _o(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rE(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function sE(t){return t.map(e=>{var{providerId:n}=e,r=ju(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(t,e){const n=await Lm(t,{},async()=>{const r=Zs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Mm(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Pm.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Le(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iE(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ks;return r&&(Le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ks,this.toJSON())}_performRefresh(){return Mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class br{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=ju(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Um(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await zs(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Jb(this,e)}reload(){return nE(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _o(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await zs(this,Yb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,a,u,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(l=n.tenantId)!==null&&l!==void 0?l:void 0,v=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,I=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:S,emailVerified:T,isAnonymous:P,providerData:M,stsTokenManager:R}=n;Le(S&&R,e,"internal-error");const O=Ks.fromJSON(this.name,R);Le(typeof S=="string",e,"internal-error"),Gn(f,e.name),Gn(h,e.name),Le(typeof T=="boolean",e,"internal-error"),Le(typeof P=="boolean",e,"internal-error"),Gn(m,e.name),Gn(g,e.name),Gn(_,e.name),Gn(v,e.name),Gn(I,e.name),Gn(k,e.name);const F=new br({uid:S,auth:e,email:h,emailVerified:T,displayName:f,isAnonymous:P,photoURL:g,phoneNumber:m,tenantId:_,stsTokenManager:O,createdAt:I,lastLoginAt:k});return M&&Array.isArray(M)&&(F.providerData=M.map(L=>Object.assign({},L))),v&&(F._redirectEventId=v),F}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ks;s.updateFromServerResponse(n);const i=new br({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await _o(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Vm.type="NONE";const Rf=Vm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e,n){return`firebase:${t}:${e}:${n}`}class xr{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Bi(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bi("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xr(Un(Rf),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Un(Rf);const o=Bi(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const c=await u._get(o);if(c){const f=br._fromJSON(e,c);u!==i&&(l=f),i=u;break}}catch{}const a=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!a.length?new xr(i,e,r):(i=a[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new xr(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jm(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fm(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qm(e))return"Blackberry";if(Hm(e))return"Webos";if(zu(e))return"Safari";if((e.includes("chrome/")||Bm(e))&&!e.includes("edge/"))return"Chrome";if(xm(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Fm(t=Ht()){return/firefox\//i.test(t)}function zu(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bm(t=Ht()){return/crios\//i.test(t)}function jm(t=Ht()){return/iemobile/i.test(t)}function xm(t=Ht()){return/android/i.test(t)}function qm(t=Ht()){return/blackberry/i.test(t)}function Hm(t=Ht()){return/webos/i.test(t)}function ca(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oE(t=Ht()){var e;return ca(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aE(){return kv()&&document.documentMode===10}function zm(t=Ht()){return ca(t)||xm(t)||Hm(t)||qm(t)||/windows phone/i.test(t)||jm(t)}function lE(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e=[]){let n;switch(t){case"Browser":n=Cf(Ht());break;case"Worker":n=`${Cf(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const a=e(i);o(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Of(this),this.idTokenSubscription=new Of(this),this.beforeStateQueue=new uE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Om,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await xr.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===l)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _o(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?gt(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Js("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await xr.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Le(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Km(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function fa(t){return gt(t)}class Of{constructor(e){this.auth=e,this.observer=null,this.addObserver=Cv(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fE(t,e,n){const r=fa(t);Le(r._canInitEmulator,r,"emulator-config-failed"),Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!n?.disableWarnings,i=Gm(e),{host:o,port:l}=hE(e),a=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||dE()}function Gm(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hE(t){const e=Gm(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Pf(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Pf(o)}}}function Pf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dE(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mn("not implemented")}_getIdTokenResponse(e){return Mn("not implemented")}_linkToIdToken(e,n){return Mn("not implemented")}_getReauthenticationResolver(e){return Mn("not implemented")}}async function pE(t,e){return vi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(t,e){return ua(t,"POST","/v1/accounts:signInWithPassword",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gE(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",la(t,e))}async function _E(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Ku{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Gs(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gs(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return mE(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return gE(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return pE(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return _E(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qr(t,e){return ua(t,"POST","/v1/accounts:signInWithIdp",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="http://localhost";class Ar extends Ku{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ar(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=ju(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ar(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qr(e,n)}buildRequest(){const e={requestUri:vE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wE(t){const e=vs(ys(t)).link,n=e?vs(ys(e)).deep_link_id:null,r=vs(ys(t)).deep_link_id;return(r?vs(ys(r)).link:null)||r||n||e||t}class Gu{constructor(e){var n,r,s,i,o,l;const a=vs(ys(e)),u=(n=a.apiKey)!==null&&n!==void 0?n:null,c=(r=a.oobCode)!==null&&r!==void 0?r:null,f=yE((s=a.mode)!==null&&s!==void 0?s:null);Le(u&&c&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=c,this.continueUrl=(i=a.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=a.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=a.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=wE(e);try{return new Gu(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.providerId=cs.PROVIDER_ID}static credential(e,n){return Gs._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gu.parseLink(n);return Le(r,"argument-error"),Gs._fromEmailAndCode(e,r.code,r.tenantId)}}cs.PROVIDER_ID="password";cs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Wm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends yi{constructor(){super("facebook.com")}static credential(e){return Ar._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends yi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ar._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Jn.credential(n,r)}catch{return null}}}Jn.GOOGLE_SIGN_IN_METHOD="google.com";Jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends yi{constructor(){super("github.com")}static credential(e){return Ar._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.GITHUB_SIGN_IN_METHOD="github.com";Zn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends yi{constructor(){super("twitter.com")}static credential(e,n){return Ar._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return er.credential(n,r)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await br._fromIdTokenResponse(e,r,s),o=Lf(r);return new ts({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Lf(r);return new ts({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Lf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Pn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vo.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new vo(e,n,r,s)}}function Qm(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vo._fromErrorAndOperation(t,i,e,r):i})}async function bE(t,e,n=!1){const r=await zs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ts._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EE(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await zs(t,Qm(r,s,e,t),n);Le(i.idToken,r,"internal-error");const o=Hu(i.idToken);Le(o,r,"internal-error");const{sub:l}=o;return Le(t.uid===l,r,"user-mismatch"),ts._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&vn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ym(t,e,n=!1){const r="signIn",s=await Qm(t,r,e),i=await ts._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function IE(t,e){return Ym(fa(t),e)}function TE(t,e,n){return IE(gt(t),cs.credential(e,n))}function kE(t,e,n,r){return gt(t).onIdTokenChanged(e,n,r)}function SE(t,e,n){return gt(t).beforeAuthStateChanged(e,n)}const yo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(){const t=Ht();return zu(t)||ca(t)}const AE=1e3,$E=10;class Jm extends Xm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=DE()&&lE(),this.fallbackToPolling=zm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);aE()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$E):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jm.type="LOCAL";const NE=Jm;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends Xm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zm.type="SESSION";const eg=Zm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ha(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),a=await RE(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ha.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,a)=>{const u=Wu("",20);s.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(h.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return window}function OE(t){$n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}async function PE(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LE(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ME(){return tg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="firebaseLocalStorageDb",UE=1,wo="firebaseLocalStorage",rg="fbase_key";class wi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function da(t,e){return t.transaction([wo],e?"readwrite":"readonly").objectStore(wo)}function VE(){const t=indexedDB.deleteDatabase(ng);return new wi(t).toPromise()}function El(){const t=indexedDB.open(ng,UE);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wo,{keyPath:rg})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wo)?e(r):(r.close(),await VE(),e(await El()))})})}async function Mf(t,e,n){const r=da(t,!0).put({[rg]:e,value:n});return new wi(r).toPromise()}async function FE(t,e){const n=da(t,!1).get(e),r=await new wi(n).toPromise();return r===void 0?null:r.value}function Uf(t,e){const n=da(t,!0).delete(e);return new wi(n).toPromise()}const BE=800,jE=3;class sg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await El(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jE)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ha._getInstance(ME()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PE(),!this.activeServiceWorker)return;this.sender=new CE(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await El();return await Mf(e,yo,"1"),await Uf(e,yo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mf(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FE(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=da(s,!1).getAll();return new wi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sg.type="LOCAL";const xE=sg;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function HE(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=An("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",qE().appendChild(r)})}function zE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new _i(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t,e){return e?Un(e):(Le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends Ku{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GE(t){return Ym(t.auth,new Qu(t),t.bypassAuthState)}function WE(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),EE(n,new Qu(t),t.bypassAuthState)}async function QE(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),bE(n,new Qu(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GE;case"linkViaPopup":case"linkViaRedirect":return QE;case"reauthViaPopup":case"reauthViaRedirect":return WE;default:vn(this.auth,"internal-error")}}resolve(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new _i(2e3,1e4);class Fr extends ig{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){Hn(this.filter.length===1,"Popup operations only handle one event");const e=Wu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(An(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(An(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(An(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,YE.get())};e()}}Fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="pendingRedirect",ji=new Map;class JE extends ig{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ji.get(this.auth._key());if(!e){try{const r=await ZE(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ji.set(this.auth._key(),e)}return this.bypassAuthState||ji.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZE(t,e){const n=nI(e),r=tI(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function eI(t,e){ji.set(t._key(),e)}function tI(t){return Un(t._redirectPersistence)}function nI(t){return Bi(XE,t.config.apiKey,t.name)}async function rI(t,e,n=!1){const r=fa(t),s=KE(r,e),o=await new JE(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=10*60*1e3;class iI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!og(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(An(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vf(e))}saveEventToCache(e){this.cachedEventUids.add(Vf(e)),this.lastProcessedEventTime=Date.now()}}function Vf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function og({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function oI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return og(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e={}){return vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uI=/^https?/;async function cI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aI(t);for(const n of e)try{if(fI(n))return}catch{}vn(t,"unauthorized-domain")}function fI(t){const e=bl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uI.test(n))return!1;if(lI.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new _i(3e4,6e4);function Ff(){const t=$n().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dI(t){return new Promise((e,n)=>{var r,s,i;function o(){Ff(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ff(),n(An(t,"network-request-failed"))},timeout:hI.get()})}if(!((s=(r=$n().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=$n().gapi)===null||i===void 0)&&i.load)o();else{const l=zE("iframefcb");return $n()[l]=()=>{gapi.load?o():n(An(t,"network-request-failed"))},HE(`https://apis.google.com/js/api.js?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw xi=null,e})}let xi=null;function pI(t){return xi=xi||dI(t),xi}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new _i(5e3,15e3),gI="__/auth/iframe",_I="emulator/auth/iframe",vI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wI(t){const e=t.config;Le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qu(e,_I):`https://${t.config.authDomain}/${gI}`,r={apiKey:e.apiKey,appName:t.name,v:ss},s=yI.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Zs(r).slice(1)}`}async function bI(t){const e=await pI(t),n=$n().gapi;return Le(n,t,"internal-error"),e.open({where:document.body,url:wI(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vI,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=An(t,"network-request-failed"),l=$n().setTimeout(()=>{i(o)},mI.get());function a(){$n().clearTimeout(l),s(r)}r.ping(a).then(a,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},II=500,TI=600,kI="_blank",SI="http://localhost";class Bf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DI(t,e,n,r=II,s=TI){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a=Object.assign(Object.assign({},EI),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Ht().toLowerCase();n&&(l=Bm(u)?kI:n),Fm(u)&&(e=e||SI,a.scrollbars="yes");const c=Object.entries(a).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(oE(u)&&l!=="_self")return AI(e||"",l),new Bf(null);const f=window.open(e||"",l,c);Le(f,t,"popup-blocked");try{f.focus()}catch{}return new Bf(f)}function AI(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="__/auth/handler",NI="emulator/auth/handler";function jf(t,e,n,r,s,i){Le(t.config.authDomain,t,"auth-domain-config-required"),Le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ss,eventId:s};if(e instanceof Wm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rv(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[a,u]of Object.entries(i||{}))o[a]=u}if(e instanceof yi){const a=e.getScopes().filter(u=>u!=="");a.length>0&&(o.scopes=a.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const a of Object.keys(l))l[a]===void 0&&delete l[a];return`${RI(t)}?${Zs(l).slice(1)}`}function RI({config:t}){return t.emulator?qu(t,NI):`https://${t.authDomain}/${$I}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="webStorageSupport";class CI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eg,this._completeRedirectFn=rI,this._overrideRedirectResult=eI}async _openPopup(e,n,r,s){var i;Hn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=jf(e,n,r,bl(),s);return DI(e,o,Wu())}async _openRedirect(e,n,r,s){return await this._originValidation(e),OE(jf(e,n,r,bl(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Hn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bI(e),r=new iI(e);return n.register("authEvent",s=>(Le(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ma,{type:Ma},s=>{var i;const o=(i=s?.[0])===null||i===void 0?void 0:i[Ma];o!==void 0&&n(!!o),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zm()||zu()||ca()}}const OI=CI;var xf="@firebase/auth",qf="0.21.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function MI(t){Tr(new ir("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:i,authDomain:o}=r.options;return((l,a)=>{Le(i&&!i.includes(":"),"invalid-api-key",{appName:l.name}),Le(!o?.includes(":"),"argument-error",{appName:l.name});const u={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Km(t)},c=new cE(l,a,u);return qb(c,n),c})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tr(new ir("auth-internal",e=>{const n=fa(e.getProvider("auth").getImmediate());return(r=>new PI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kn(xf,qf,LI(t)),kn(xf,qf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=5*60,VI=sd("authIdTokenMaxAge")||UI;let Hf=null;const FI=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VI)return;const s=n?.token;Hf!==s&&(Hf=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function BI(t=Bl()){const e=$o(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xb(t,{popupRedirectResolver:OI,persistence:[xE,NE,eg]}),r=sd("authTokenSyncURL");if(r){const i=FI(r);SE(n,i,()=>i(n.currentUser)),kE(n,o=>i(o))}const s=nd("auth");return s&&fE(n,`http://${s}`),n}MI("Browser");function ag(t,e){return function(){return t.apply(e,arguments)}}const{toString:lg}=Object.prototype,{getPrototypeOf:Yu}=Object,Xu=(t=>e=>{const n=lg.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Kn=t=>(t=t.toLowerCase(),e=>Xu(e)===t),pa=t=>e=>typeof e===t,{isArray:fs}=Array,Ws=pa("undefined");function jI(t){return t!==null&&!Ws(t)&&t.constructor!==null&&!Ws(t.constructor)&&ur(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ug=Kn("ArrayBuffer");function xI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ug(t.buffer),e}const qI=pa("string"),ur=pa("function"),cg=pa("number"),Ju=t=>t!==null&&typeof t=="object",HI=t=>t===!0||t===!1,qi=t=>{if(Xu(t)!=="object")return!1;const e=Yu(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},zI=Kn("Date"),KI=Kn("File"),GI=Kn("Blob"),WI=Kn("FileList"),QI=t=>Ju(t)&&ur(t.pipe),YI=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||lg.call(t)===e||ur(t.toString)&&t.toString()===e)},XI=Kn("URLSearchParams"),JI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bi(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),fs(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(r=0;r<o;r++)l=i[r],e.call(null,t[l],l,t)}}function fg(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const hg=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),dg=t=>!Ws(t)&&t!==hg;function Il(){const{caseless:t}=dg(this)&&this||{},e={},n=(r,s)=>{const i=t&&fg(e,s)||s;qi(e[i])&&qi(r)?e[i]=Il(e[i],r):qi(r)?e[i]=Il({},r):fs(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&bi(arguments[r],n);return e}const ZI=(t,e,n,{allOwnKeys:r}={})=>(bi(e,(s,i)=>{n&&ur(s)?t[i]=ag(s,n):t[i]=s},{allOwnKeys:r}),t),eT=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),tT=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},nT=(t,e,n,r)=>{let s,i,o;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Yu(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rT=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},sT=t=>{if(!t)return null;if(fs(t))return t;let e=t.length;if(!cg(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},iT=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Yu(Uint8Array)),oT=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},aT=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},lT=Kn("HTMLFormElement"),uT=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),zf=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),cT=Kn("RegExp"),pg=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};bi(n,(s,i)=>{e(s,i,t)!==!1&&(r[i]=s)}),Object.defineProperties(t,r)},fT=t=>{pg(t,(e,n)=>{if(ur(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ur(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hT=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return fs(t)?r(t):r(String(t).split(e)),n},dT=()=>{},pT=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Ua="abcdefghijklmnopqrstuvwxyz",Kf="0123456789",mg={DIGIT:Kf,ALPHA:Ua,ALPHA_DIGIT:Ua+Ua.toUpperCase()+Kf},mT=(t=16,e=mg.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function gT(t){return!!(t&&ur(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const _T=t=>{const e=new Array(10),n=(r,s)=>{if(Ju(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=fs(r)?[]:{};return bi(r,(o,l)=>{const a=n(o,s+1);!Ws(a)&&(i[l]=a)}),e[s]=void 0,i}}return r};return n(t,0)},ee={isArray:fs,isArrayBuffer:ug,isBuffer:jI,isFormData:YI,isArrayBufferView:xI,isString:qI,isNumber:cg,isBoolean:HI,isObject:Ju,isPlainObject:qi,isUndefined:Ws,isDate:zI,isFile:KI,isBlob:GI,isRegExp:cT,isFunction:ur,isStream:QI,isURLSearchParams:XI,isTypedArray:iT,isFileList:WI,forEach:bi,merge:Il,extend:ZI,trim:JI,stripBOM:eT,inherits:tT,toFlatObject:nT,kindOf:Xu,kindOfTest:Kn,endsWith:rT,toArray:sT,forEachEntry:oT,matchAll:aT,isHTMLForm:lT,hasOwnProperty:zf,hasOwnProp:zf,reduceDescriptors:pg,freezeMethods:fT,toObjectSet:hT,toCamelCase:uT,noop:dT,toFiniteNumber:pT,findKey:fg,global:hg,isContextDefined:dg,ALPHABET:mg,generateString:mT,isSpecCompliantForm:gT,toJSONObject:_T};function Xe(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}ee.inherits(Xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const gg=Xe.prototype,_g={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{_g[t]={value:t}});Object.defineProperties(Xe,_g);Object.defineProperty(gg,"isAxiosError",{value:!0});Xe.from=(t,e,n,r,s,i)=>{const o=Object.create(gg);return ee.toFlatObject(t,o,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),Xe.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const vT=null;function Tl(t){return ee.isPlainObject(t)||ee.isArray(t)}function vg(t){return ee.endsWith(t,"[]")?t.slice(0,-2):t}function Gf(t,e,n){return t?t.concat(e).map(function(s,i){return s=vg(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function yT(t){return ee.isArray(t)&&!t.some(Tl)}const wT=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function ma(t,e,n){if(!ee.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ee.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,v){return!ee.isUndefined(v[_])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(ee.isDate(g))return g.toISOString();if(!a&&ee.isBlob(g))throw new Xe("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(g)||ee.isTypedArray(g)?a&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,_,v){let I=g;if(g&&!v&&typeof g=="object"){if(ee.endsWith(_,"{}"))_=r?_:_.slice(0,-2),g=JSON.stringify(g);else if(ee.isArray(g)&&yT(g)||(ee.isFileList(g)||ee.endsWith(_,"[]"))&&(I=ee.toArray(g)))return _=vg(_),I.forEach(function(S,T){!(ee.isUndefined(S)||S===null)&&e.append(o===!0?Gf([_],T,i):o===null?_:_+"[]",u(S))}),!1}return Tl(g)?!0:(e.append(Gf(v,_,i),u(g)),!1)}const f=[],h=Object.assign(wT,{defaultVisitor:c,convertValue:u,isVisitable:Tl});function m(g,_){if(!ee.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(g),ee.forEach(g,function(I,k){(!(ee.isUndefined(I)||I===null)&&s.call(e,I,ee.isString(k)?k.trim():k,_,h))===!0&&m(I,_?_.concat(k):[k])}),f.pop()}}if(!ee.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Wf(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Zu(t,e){this._pairs=[],t&&ma(t,this,e)}const yg=Zu.prototype;yg.append=function(e,n){this._pairs.push([e,n])};yg.toString=function(e){const n=e?function(r){return e.call(this,r,Wf)}:Wf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function bT(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wg(t,e,n){if(!e)return t;const r=n&&n.encode||bT,s=n&&n.serialize;let i;if(s?i=s(e,n):i=ee.isURLSearchParams(e)?e.toString():new Zu(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ET{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Qf=ET,bg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},IT=typeof URLSearchParams<"u"?URLSearchParams:Zu,TT=typeof FormData<"u"?FormData:null,kT=typeof Blob<"u"?Blob:null,ST=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),DT=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Tn={isBrowser:!0,classes:{URLSearchParams:IT,FormData:TT,Blob:kT},isStandardBrowserEnv:ST,isStandardBrowserWebWorkerEnv:DT,protocols:["http","https","file","blob","url","data"]};function AT(t,e){return ma(t,new Tn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Tn.isNode&&ee.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function $T(t){return ee.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function NT(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function Eg(t){function e(n,r,s,i){let o=n[i++];const l=Number.isFinite(+o),a=i>=n.length;return o=!o&&ee.isArray(s)?s.length:o,a?(ee.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!l):((!s[o]||!ee.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&ee.isArray(s[o])&&(s[o]=NT(s[o])),!l)}if(ee.isFormData(t)&&ee.isFunction(t.entries)){const n={};return ee.forEachEntry(t,(r,s)=>{e($T(r),s,n,0)}),n}return null}const RT={"Content-Type":void 0};function CT(t,e,n){if(ee.isString(t))try{return(e||JSON.parse)(t),ee.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ga={transitional:bg,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=ee.isObject(e);if(i&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return s&&s?JSON.stringify(Eg(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return AT(e,this.formSerializer).toString();if((l=ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return ma(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),CT(e)):e}],transformResponse:[function(e){const n=this.transitional||ga.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&ee.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?Xe.from(l,Xe.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tn.classes.FormData,Blob:Tn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ee.forEach(["delete","get","head"],function(e){ga.headers[e]={}});ee.forEach(["post","put","patch"],function(e){ga.headers[e]=ee.merge(RT)});const ec=ga,OT=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PT=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&OT[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Yf=Symbol("internals");function ps(t){return t&&String(t).trim().toLowerCase()}function Hi(t){return t===!1||t==null?t:ee.isArray(t)?t.map(Hi):String(t)}function LT(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}function MT(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function Va(t,e,n,r,s){if(ee.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!ee.isString(e)){if(ee.isString(r))return e.indexOf(r)!==-1;if(ee.isRegExp(r))return r.test(e)}}function UT(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function VT(t,e){const n=ee.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class _a{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(l,a,u){const c=ps(a);if(!c)throw new Error("header name must be a non-empty string");const f=ee.findKey(s,c);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||a]=Hi(l))}const o=(l,a)=>ee.forEach(l,(u,c)=>i(u,c,a));return ee.isPlainObject(e)||e instanceof this.constructor?o(e,n):ee.isString(e)&&(e=e.trim())&&!MT(e)?o(PT(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=ps(e),e){const r=ee.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return LT(s);if(ee.isFunction(n))return n.call(this,s,r);if(ee.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ps(e),e){const r=ee.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Va(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ps(o),o){const l=ee.findKey(r,o);l&&(!n||Va(r,r[l],l,n))&&(delete r[l],s=!0)}}return ee.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Va(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return ee.forEach(this,(s,i)=>{const o=ee.findKey(r,i);if(o){n[o]=Hi(s),delete n[i];return}const l=e?UT(i):String(i).trim();l!==i&&delete n[i],n[l]=Hi(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ee.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&ee.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Yf]=this[Yf]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=ps(o);r[l]||(VT(s,o),r[l]=!0)}return ee.isArray(e)?e.forEach(i):i(e),this}}_a.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.freezeMethods(_a.prototype);ee.freezeMethods(_a);const Fn=_a;function Fa(t,e){const n=this||ec,r=e||n,s=Fn.from(r.headers);let i=r.data;return ee.forEach(t,function(l){i=l.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Ig(t){return!!(t&&t.__CANCEL__)}function Ei(t,e,n){Xe.call(this,t??"canceled",Xe.ERR_CANCELED,e,n),this.name="CanceledError"}ee.inherits(Ei,Xe,{__CANCEL__:!0});function FT(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Xe("Request failed with status code "+n.status,[Xe.ERR_BAD_REQUEST,Xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const BT=Tn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,l){const a=[];a.push(n+"="+encodeURIComponent(r)),ee.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),ee.isString(i)&&a.push("path="+i),ee.isString(o)&&a.push("domain="+o),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function jT(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xT(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Tg(t,e){return t&&!jT(e)?xT(t,e):e}const qT=Tn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const l=ee.isString(o)?s(o):o;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function HT(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function zT(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(a){const u=Date.now(),c=r[i];o||(o=u),n[s]=a,r[s]=u;let f=i,h=0;for(;f!==s;)h+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const m=c&&u-c;return m?Math.round(h*1e3/m):void 0}}function Xf(t,e){let n=0;const r=zT(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,l=i-n,a=r(l),u=i<=o;n=i;const c={loaded:i,total:o,progress:o?i/o:void 0,bytes:l,rate:a||void 0,estimated:a&&o&&u?(o-i)/a:void 0,event:s};c[e?"download":"upload"]=!0,t(c)}}const KT=typeof XMLHttpRequest<"u",GT=KT&&function(t){return new Promise(function(n,r){let s=t.data;const i=Fn.from(t.headers).normalize(),o=t.responseType;let l;function a(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}ee.isFormData(s)&&(Tn.isStandardBrowserEnv||Tn.isStandardBrowserWebWorkerEnv)&&i.setContentType(!1);let u=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+g))}const c=Tg(t.baseURL,t.url);u.open(t.method.toUpperCase(),wg(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function f(){if(!u)return;const m=Fn.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:t,request:u};FT(function(I){n(I),a()},function(I){r(I),a()},_),u=null}if("onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(f)},u.onabort=function(){u&&(r(new Xe("Request aborted",Xe.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new Xe("Network Error",Xe.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||bg;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new Xe(g,_.clarifyTimeoutError?Xe.ETIMEDOUT:Xe.ECONNABORTED,t,u)),u=null},Tn.isStandardBrowserEnv){const m=(t.withCredentials||qT(c))&&t.xsrfCookieName&&BT.read(t.xsrfCookieName);m&&i.set(t.xsrfHeaderName,m)}s===void 0&&i.setContentType(null),"setRequestHeader"in u&&ee.forEach(i.toJSON(),function(g,_){u.setRequestHeader(_,g)}),ee.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&o!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Xf(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Xf(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=m=>{u&&(r(!m||m.type?new Ei(null,t,u):m),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const h=HT(c);if(h&&Tn.protocols.indexOf(h)===-1){r(new Xe("Unsupported protocol "+h+":",Xe.ERR_BAD_REQUEST,t));return}u.send(s||null)})},zi={http:vT,xhr:GT};ee.forEach(zi,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const WT={getAdapter:t=>{t=ee.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let s=0;s<e&&(n=t[s],!(r=ee.isString(n)?zi[n.toLowerCase()]:n));s++);if(!r)throw r===!1?new Xe(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(ee.hasOwnProp(zi,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!ee.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:zi};function Ba(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ei(null,t)}function Jf(t){return Ba(t),t.headers=Fn.from(t.headers),t.data=Fa.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),WT.getAdapter(t.adapter||ec.adapter)(t).then(function(r){return Ba(t),r.data=Fa.call(t,t.transformResponse,r),r.headers=Fn.from(r.headers),r},function(r){return Ig(r)||(Ba(t),r&&r.response&&(r.response.data=Fa.call(t,t.transformResponse,r.response),r.response.headers=Fn.from(r.response.headers))),Promise.reject(r)})}const Zf=t=>t instanceof Fn?t.toJSON():t;function ns(t,e){e=e||{};const n={};function r(u,c,f){return ee.isPlainObject(u)&&ee.isPlainObject(c)?ee.merge.call({caseless:f},u,c):ee.isPlainObject(c)?ee.merge({},c):ee.isArray(c)?c.slice():c}function s(u,c,f){if(ee.isUndefined(c)){if(!ee.isUndefined(u))return r(void 0,u,f)}else return r(u,c,f)}function i(u,c){if(!ee.isUndefined(c))return r(void 0,c)}function o(u,c){if(ee.isUndefined(c)){if(!ee.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function l(u,c,f){if(f in e)return r(u,c);if(f in t)return r(void 0,u)}const a={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,c)=>s(Zf(u),Zf(c),!0)};return ee.forEach(Object.keys(t).concat(Object.keys(e)),function(c){const f=a[c]||s,h=f(t[c],e[c],c);ee.isUndefined(h)&&f!==l||(n[c]=h)}),n}const kg="1.3.4",tc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tc[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const eh={};tc.transitional=function(e,n,r){function s(i,o){return"[Axios v"+kg+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(e===!1)throw new Xe(s(o," has been removed"+(n?" in "+n:"")),Xe.ERR_DEPRECATED);return n&&!eh[o]&&(eh[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,l):!0}};function QT(t,e,n){if(typeof t!="object")throw new Xe("options must be an object",Xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const l=t[i],a=l===void 0||o(l,i,t);if(a!==!0)throw new Xe("option "+i+" must be "+a,Xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Xe("Unknown option "+i,Xe.ERR_BAD_OPTION)}}const kl={assertOptions:QT,validators:tc},Wn=kl.validators;class bo{constructor(e){this.defaults=e,this.interceptors={request:new Qf,response:new Qf}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ns(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&kl.assertOptions(r,{silentJSONParsing:Wn.transitional(Wn.boolean),forcedJSONParsing:Wn.transitional(Wn.boolean),clarifyTimeoutError:Wn.transitional(Wn.boolean)},!1),s!==void 0&&kl.assertOptions(s,{encode:Wn.function,serialize:Wn.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=i&&ee.merge(i.common,i[n.method]),o&&ee.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=Fn.concat(o,i);const l=[];let a=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(a=a&&_.synchronous,l.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let c,f=0,h;if(!a){const g=[Jf.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,u),h=g.length,c=Promise.resolve(n);f<h;)c=c.then(g[f++],g[f++]);return c}h=l.length;let m=n;for(f=0;f<h;){const g=l[f++],_=l[f++];try{m=g(m)}catch(v){_.call(this,v);break}}try{c=Jf.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,h=u.length;f<h;)c=c.then(u[f++],u[f++]);return c}getUri(e){e=ns(this.defaults,e);const n=Tg(e.baseURL,e.url);return wg(n,e.params,e.paramsSerializer)}}ee.forEach(["delete","get","head","options"],function(e){bo.prototype[e]=function(n,r){return this.request(ns(r||{},{method:e,url:n,data:(r||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,l){return this.request(ns(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}bo.prototype[e]=n(),bo.prototype[e+"Form"]=n(!0)});const Ki=bo;class nc{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,l){r.reason||(r.reason=new Ei(i,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new nc(function(s){e=s}),cancel:e}}}const YT=nc;function XT(t){return function(n){return t.apply(null,n)}}function JT(t){return ee.isObject(t)&&t.isAxiosError===!0}const Sl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sl).forEach(([t,e])=>{Sl[e]=t});const ZT=Sl;function Sg(t){const e=new Ki(t),n=ag(Ki.prototype.request,e);return ee.extend(n,Ki.prototype,e,{allOwnKeys:!0}),ee.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Sg(ns(t,s))},n}const Dt=Sg(ec);Dt.Axios=Ki;Dt.CanceledError=Ei;Dt.CancelToken=YT;Dt.isCancel=Ig;Dt.VERSION=kg;Dt.toFormData=ma;Dt.AxiosError=Xe;Dt.Cancel=Dt.CanceledError;Dt.all=function(e){return Promise.all(e)};Dt.spread=XT;Dt.isAxiosError=JT;Dt.mergeConfig=ns;Dt.AxiosHeaders=Fn;Dt.formToJSON=t=>Eg(ee.isHTMLForm(t)?new FormData(t):t);Dt.HttpStatusCode=ZT;Dt.default=Dt;const Dg=Dt;let Ag="https://sore-pear-dog-hat.cyclic.app/";async function ek(t,e,n){try{return await Dg.get(Ag+e,{headers:n??{},params:t})}catch(r){console.log(r)}}async function tk(t,e){try{const n=await Dg.post(Ag+e,{params:t});return console.log(n),n}catch(n){console.log(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="firebasestorage.googleapis.com",Ng="storageBucket",nk=2*60*1e3,rk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt extends Pn{constructor(e,n,r=0){super(ja(e),`Firebase Storage: ${n} (${ja(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ja(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function ja(t){return"storage/"+t}function rc(){const t="An unknown error occurred, please check the error payload for server response.";return new mt(pt.UNKNOWN,t)}function sk(t){return new mt(pt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ik(t){return new mt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ok(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(pt.UNAUTHENTICATED,t)}function ak(){return new mt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lk(t){return new mt(pt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uk(){return new mt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ck(){return new mt(pt.CANCELED,"User canceled the upload/download.")}function fk(t){return new mt(pt.INVALID_URL,"Invalid URL '"+t+"'.")}function hk(t){return new mt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dk(){return new mt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ng+"' property when initializing the app?")}function pk(){return new mt(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mk(){return new mt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gk(t){return new mt(pt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dl(t){return new mt(pt.INVALID_ARGUMENT,t)}function Rg(){return new mt(pt.APP_DELETED,"The Firebase app was deleted.")}function _k(t){return new mt(pt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rs(t,e){return new mt(pt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ms(t){throw new mt(pt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(r.path==="")return r;throw hk(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),a={bucket:1,path:3};function u(T){T.path_=decodeURIComponent(T.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${c}/b/${s}/o${h}`,"i"),g={bucket:1,path:3},_=n===$g?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",I=new RegExp(`^https?://${_}/${s}/${v}`,"i"),S=[{regex:l,indices:a,postModify:i},{regex:m,indices:g,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<S.length;T++){const P=S[T],M=P.regex.exec(e);if(M){const R=M[P.indices.bucket];let O=M[P.indices.path];O||(O=""),r=new ln(R,O),P.postModify(r);break}}if(r==null)throw fk(e);return r}}class vk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function a(){return l===2}let u=!1;function c(...v){u||(u=!0,e.apply(null,v))}function f(v){s=setTimeout(()=>{s=null,t(m,a())},v)}function h(){i&&clearTimeout(i)}function m(v,...I){if(u){h();return}if(v){h(),c.call(null,v,...I);return}if(a()||o){h(),c.call(null,v,...I);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,f(S)}let g=!1;function _(v){g||(g=!0,h(),!u&&(s!==null?(v||(l=2),clearTimeout(s),f(0)):v||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function wk(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){return t!==void 0}function Ek(t){return typeof t=="object"&&!Array.isArray(t)}function sc(t){return typeof t=="string"||t instanceof String}function th(t){return ic()&&t instanceof Blob}function ic(){return typeof Blob<"u"&&!Ev()}function nh(t,e,n,r){if(r<e)throw Dl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Cg(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Er||(Er={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,s,i,o,l,a,u,c,f,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=a,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=f,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ci(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const a=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(a,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Er.NO_ERROR,a=i.getStatus();if(!l||Ik(a,this.additionalRetryCodes_)&&this.retry){const c=i.getErrorCode()===Er.ABORT;r(!1,new Ci(!1,null,c));return}const u=this.successCodes_.indexOf(a)!==-1;r(!0,new Ci(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const a=this.callback_(l,l.getResponse());bk(a)?i(a):i()}catch(a){o(a)}else if(l!==null){const a=rc();a.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,a)):o(a)}else if(s.canceled){const a=this.appDelete_?Rg():ck();o(a)}else{const a=uk();o(a)}};this.canceled_?n(!1,new Ci(!1,null,!0)):this.backoffId_=yk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ci{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function kk(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Sk(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Dk(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Ak(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $k(t,e,n,r,s,i,o=!0){const l=Cg(t.urlParams),a=t.url+l,u=Object.assign({},t.headers);return Dk(u,e),kk(u,n),Sk(u,i),Ak(u,r),new Tk(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Rk(...t){const e=Nk();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ic())return new Blob(t);throw new mt(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ck(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){if(typeof atob>"u")throw gk("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xa{constructor(e,n){this.data=e,this.contentType=n||null}}function Og(t,e){switch(t){case mn.RAW:return new xa(Pg(e));case mn.BASE64:case mn.BASE64URL:return new xa(Lg(t,e));case mn.DATA_URL:return new xa(Lk(e),Mk(e))}throw rc()}function Pg(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Pk(t){let e;try{e=decodeURIComponent(t)}catch{throw Rs(mn.DATA_URL,"Malformed data URL.")}return Pg(e)}function Lg(t,e){switch(t){case mn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Rs(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case mn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Rs(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ok(e)}catch(s){throw s.message.includes("polyfill")?s:Rs(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Mg{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rs(mn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Uk(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Lk(t){const e=new Mg(t);return e.base64?Lg(mn.BASE64,e.rest):Pk(e.rest)}function Mk(t){return new Mg(t).contentType}function Uk(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n){let r=0,s="";th(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(th(this.data_)){const r=this.data_,s=Ck(r,e,n);return s===null?null:new tr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new tr(r,!0)}}static getBlob(...e){if(ic()){const n=e.map(r=>r instanceof tr?r.data_:r);return new tr(Rk.apply(null,n))}else{const n=e.map(o=>sc(o)?Og(mn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new tr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t){let e;try{e=JSON.parse(t)}catch{return null}return Ek(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Fk(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Vg(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e){return e}class Gt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Bk}}let Oi=null;function jk(t){return!sc(t)||t.length<2?t:Vg(t)}function Fg(){if(Oi)return Oi;const t=[];t.push(new Gt("bucket")),t.push(new Gt("generation")),t.push(new Gt("metageneration")),t.push(new Gt("name","fullPath",!0));function e(i,o){return jk(o)}const n=new Gt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Gt("size");return s.xform=r,t.push(s),t.push(new Gt("timeCreated")),t.push(new Gt("updated")),t.push(new Gt("md5Hash",null,!0)),t.push(new Gt("cacheControl",null,!0)),t.push(new Gt("contentDisposition",null,!0)),t.push(new Gt("contentEncoding",null,!0)),t.push(new Gt("contentLanguage",null,!0)),t.push(new Gt("contentType",null,!0)),t.push(new Gt("metadata","customMetadata",!0)),Oi=t,Oi}function xk(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new ln(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function qk(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return xk(r,t),r}function Bg(t,e,n){const r=Ug(e);return r===null?null:qk(t,r,n)}function Hk(t,e,n,r){const s=Ug(e);if(s===null||!sc(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const c=t.bucket,f=t.fullPath,h="/b/"+o(c)+"/o/"+o(f),m=oc(h,n,r),g=Cg({alt:"media",token:u});return m+g})[0]}function zk(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class jg{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){if(!t)throw rc()}function Kk(t,e){function n(r,s){const i=Bg(t,s,e);return xg(i!==null),i}return n}function Gk(t,e){function n(r,s){const i=Bg(t,s,e);return xg(i!==null),Hk(i,s,t.host,t._protocol)}return n}function qg(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=ak():s=ok():n.getStatus()===402?s=ik(t.bucket):n.getStatus()===403?s=lk(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Wk(t){const e=qg(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=sk(t.path)),i.serverResponse=s.serverResponse,i}return n}function Qk(t,e,n){const r=e.fullServerUrl(),s=oc(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new jg(s,i,Gk(t,n),o);return l.errorHandler=Wk(e),l}function Yk(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Xk(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Yk(null,e)),r}function Jk(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let T=0;T<2;T++)S=S+Math.random().toString().slice(2);return S}const a=l();o["Content-Type"]="multipart/related; boundary="+a;const u=Xk(e,r,s),c=zk(u,n),f="--"+a+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+a+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+a+"--",m=tr.getBlob(f,r,h);if(m===null)throw pk();const g={name:u.fullPath},_=oc(i,t.host,t._protocol),v="POST",I=t.maxUploadRetryTime,k=new jg(_,v,Kk(t,n),I);return k.urlParams=g,k.headers=o,k.body=m.uploadData(),k.errorHandler=qg(e),k}class Zk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Er.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Er.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Er.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw ms("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ms("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ms("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ms("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ms("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class eS extends Zk{initXhr(){this.xhr_.responseType="text"}}function Hg(){return new eS}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new $r(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Vg(this._location.path)}get storage(){return this._service}get parent(){const e=Vk(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new $r(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _k(e)}}function tS(t,e,n){t._throwIfRoot("uploadBytes");const r=Jk(t.storage,t._location,Fg(),new tr(e,!0),n);return t.storage.makeRequestWithTokens(r,Hg).then(s=>({metadata:s,ref:t}))}function nS(t,e,n=mn.RAW,r){t._throwIfRoot("uploadString");const s=Og(n,e),i=Object.assign({},r);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),tS(t,s.data,i)}function rS(t){t._throwIfRoot("getDownloadURL");const e=Qk(t.storage,t._location,Fg());return t.storage.makeRequestWithTokens(e,Hg).then(n=>{if(n===null)throw mk();return n})}function sS(t,e){const n=Fk(t._location.path,e),r=new ln(t._location.bucket,n);return new $r(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){return/^[A-Za-z]+:\/\//.test(t)}function oS(t,e){return new $r(t,e)}function zg(t,e){if(t instanceof ac){const n=t;if(n._bucket==null)throw dk();const r=new $r(n,n._bucket);return e!=null?zg(r,e):r}else return e!==void 0?sS(t,e):t}function aS(t,e){if(e&&iS(e)){if(t instanceof ac)return oS(t,e);throw Dl("To use ref(service, url), the first argument must be a Storage instance.")}else return zg(t,e)}function rh(t,e){const n=e?.[Ng];return n==null?null:ln.makeFromBucketSpec(n,t)}function lS(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:id(s,t.app.options.projectId))}class ac{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=$g,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nk,this._maxUploadRetryTime=rk,this._requests=new Set,s!=null?this._bucket=ln.makeFromBucketSpec(s,this._host):this._bucket=rh(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=rh(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $r(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new vk(Rg());{const o=$k(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const sh="@firebase/storage",ih="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="storage";function uS(t,e,n,r){return t=gt(t),nS(t,e,n,r)}function cS(t){return t=gt(t),rS(t)}function fS(t,e){return t=gt(t),aS(t,e)}function hS(t=Bl(),e){t=gt(t);const r=$o(t,Kg).getImmediate({identifier:e}),s=rd("storage");return s&&dS(r,...s),r}function dS(t,e,n,r={}){lS(t,e,n,r)}function pS(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ac(n,r,s,e,ss)}function mS(){Tr(new ir(Kg,pS,"PUBLIC").setMultipleInstances(!0)),kn(sh,ih,""),kn(sh,ih,"esm2017")}mS();async function gS(){return(await ek({},"/api/getsecrets",{})).data.secrets}let _S=await gS();const lc=ld(_S),Eo=BI(lc);let wn=Eb(lc);const vS=hS(lc);async function uc(t,e,n){console.log(t);try{$m(Vu(gm(wn,t)),async r=>{let s=[];r.docs.length!=0&&(r.docs.forEach(i=>{console.log(s.filter(o=>o.customerId!==i.id).length==0),s.filter(o=>o.customerId===i.id).length==0&&(s=[...s,{data:i.data(),customer_id:i.id}])}),n.update(i=>({value:s,businessId:e})))})}catch(r){console.log(r.message)}}async function yS(t,e,n){try{$m(t,async r=>{let s=[];r.docs.length!=0?(r.docs.forEach(i=>{s.filter(o=>o.customerId===i.id).length==0&&(s=[...s,{data:i.data(),customer_id:i.id}])}),n.update(i=>({value:s,businessId:e}))):tn("w","No results found")})}catch(r){console.log(r.message)}}async function wS(t,e,n){try{await Ub(t).then(r=>{let s=[];r.docs.length!=0&&(r.docs.forEach(i=>{s.filter(o=>o.customerId===i.id).length==0&&(s=[...s,{data:i.data(),customer_id:i.id}])}),n.update(i=>({value:s,businessId:e})))}).catch(r=>{console.log(r)})}catch(r){console.log(r.message)}}const bS=(t,e)=>fS(vS,t+"/"+e+".jpg");async function Io(t){try{const e=t.avatar;let n=await uS(bS(t.businessName,t.name),e,"data_url");return await cS(n.ref)}catch(e){console.log(e)}}const ES=(t,e)=>zn(wn,"business",t,"customers",e);async function IS(t,e,n,r){let s=await Io(e),i=await Io(n);r.userUrl=s,r.gua_Url=i;let o=Ao();try{await aa(ES(t,o),r).then(l=>{tn("s","customer created"),console.log(l)})}catch(l){tn("d","Error Occured Try again"),console.log(l)}}async function TS(t){wc.update(n=>({state:"loading"}));let e="business/"+t+"/customers";await uc(e,t,Ys),wc.update(n=>({state:"loading"}))}function oh(t){let e,n;return{c(){e=y("span"),n=B("Please click here to add image")},l(r){e=w(r,"SPAN",{});var s=b(e);n=j(s,"Please click here to add image"),s.forEach(d)},m(r,s){N(r,e,s),p(e,n)},d(r){r&&d(e)}}}function kS(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T;function P(z){t[4](z)}let M={src:"",size:"30",upload:!0};t[3]!==void 0&&(M.avatar=t[3]),r=new gn({props:M}),fe.push(()=>he(r,"avatar",P));let R=t[3]==null&&oh();function O(z){t[5](z)}let F={type:"Text",label:"Customer Name",isText:!0};t[0]!==void 0&&(F.value=t[0]),h=new Pt({props:F}),fe.push(()=>he(h,"value",O));function L(z){t[6](z)}let Q={type:"Text",label:"National ID",isText:!0};t[1]!==void 0&&(Q.value=t[1]),_=new Pt({props:Q}),fe.push(()=>he(_,"value",L));function te(z){t[7](z)}let re={type:"number",label:"Phone Number",isText:!1};return t[2]!==void 0&&(re.value=t[2]),k=new Pt({props:re}),fe.push(()=>he(k,"value",te)),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),i=D(),o=y("div"),R&&R.c(),l=D(),a=y("div"),u=y("span"),c=B("Customer image"),f=D(),x(h.$$.fragment),g=D(),x(_.$$.fragment),I=D(),x(k.$$.fragment),this.h()},l(z){e=w(z,"DIV",{class:!0});var K=b(e);n=w(K,"DIV",{class:!0});var U=b(n);G(r.$$.fragment,U),U.forEach(d),i=A(K),o=w(K,"DIV",{class:!0});var Y=b(o);R&&R.l(Y),Y.forEach(d),l=A(K),a=w(K,"DIV",{class:!0});var V=b(a);u=w(V,"SPAN",{});var W=b(u);c=j(W,"Customer image"),W.forEach(d),V.forEach(d),K.forEach(d),f=A(z),G(h.$$.fragment,z),g=A(z),G(_.$$.fragment,z),I=A(z),G(k.$$.fragment,z),this.h()},h(){E(n,"class","flex justify-center "),E(o,"class","flex justify-center pt-1 text-xs"),E(a,"class","flex justify-center text-sm text-gray-600 pt-2"),E(e,"class","mb-10")},m(z,K){N(z,e,K),p(e,n),q(r,n,null),p(e,i),p(e,o),R&&R.m(o,null),p(e,l),p(e,a),p(a,u),p(u,c),N(z,f,K),q(h,z,K),N(z,g,K),q(_,z,K),N(z,I,K),q(k,z,K),T=!0},p(z,[K]){const U={};!s&&K&8&&(s=!0,U.avatar=z[3],de(()=>s=!1)),r.$set(U),z[3]==null?R||(R=oh(),R.c(),R.m(o,null)):R&&(R.d(1),R=null);const Y={};!m&&K&1&&(m=!0,Y.value=z[0],de(()=>m=!1)),h.$set(Y);const V={};!v&&K&2&&(v=!0,V.value=z[1],de(()=>v=!1)),_.$set(V);const W={};!S&&K&4&&(S=!0,W.value=z[2],de(()=>S=!1)),k.$set(W)},i(z){T||($(r.$$.fragment,z),$(h.$$.fragment,z),$(_.$$.fragment,z),$(k.$$.fragment,z),T=!0)},o(z){C(r.$$.fragment,z),C(h.$$.fragment,z),C(_.$$.fragment,z),C(k.$$.fragment,z),T=!1},d(z){z&&d(e),H(r),R&&R.d(),z&&d(f),H(h,z),z&&d(g),H(_,z),z&&d(I),H(k,z)}}}function SS(t,e,n){let{name:r,nin:s,contact:i,avatar:o}=e;function l(f){o=f,n(3,o)}function a(f){r=f,n(0,r)}function u(f){s=f,n(1,s)}function c(f){i=f,n(2,i)}return t.$$set=f=>{"name"in f&&n(0,r=f.name),"nin"in f&&n(1,s=f.nin),"contact"in f&&n(2,i=f.contact),"avatar"in f&&n(3,o=f.avatar)},[r,s,i,o,l,a,u,c]}class DS extends De{constructor(e){super(),Ae(this,e,SS,kS,$e,{name:0,nin:1,contact:2,avatar:3})}}function AS(t){let e,n,r,s,i,o,l,a,u;function c(v){t[3](v)}let f={type:"Text",label:"Occupation",isText:!0};t[0]!==void 0&&(f.value=t[0]),e=new Pt({props:f}),fe.push(()=>he(e,"value",c));function h(v){t[4](v)}let m={type:"Text",label:"Address",isText:!0};t[1]!==void 0&&(m.value=t[1]),s=new Pt({props:m}),fe.push(()=>he(s,"value",h));function g(v){t[5](v)}let _={type:"Text",label:"Location",isText:!0};return t[2]!==void 0&&(_.value=t[2]),l=new Pt({props:_}),fe.push(()=>he(l,"value",g)),{c(){x(e.$$.fragment),r=D(),x(s.$$.fragment),o=D(),x(l.$$.fragment)},l(v){G(e.$$.fragment,v),r=A(v),G(s.$$.fragment,v),o=A(v),G(l.$$.fragment,v)},m(v,I){q(e,v,I),N(v,r,I),q(s,v,I),N(v,o,I),q(l,v,I),u=!0},p(v,[I]){const k={};!n&&I&1&&(n=!0,k.value=v[0],de(()=>n=!1)),e.$set(k);const S={};!i&&I&2&&(i=!0,S.value=v[1],de(()=>i=!1)),s.$set(S);const T={};!a&&I&4&&(a=!0,T.value=v[2],de(()=>a=!1)),l.$set(T)},i(v){u||($(e.$$.fragment,v),$(s.$$.fragment,v),$(l.$$.fragment,v),u=!0)},o(v){C(e.$$.fragment,v),C(s.$$.fragment,v),C(l.$$.fragment,v),u=!1},d(v){H(e,v),v&&d(r),H(s,v),v&&d(o),H(l,v)}}}function $S(t,e,n){let{occupation:r,address:s,location:i}=e;function o(u){r=u,n(0,r)}function l(u){s=u,n(1,s)}function a(u){i=u,n(2,i)}return t.$$set=u=>{"occupation"in u&&n(0,r=u.occupation),"address"in u&&n(1,s=u.address),"location"in u&&n(2,i=u.location)},[r,s,i,o,l,a]}class NS extends De{constructor(e){super(),Ae(this,e,$S,AS,$e,{occupation:0,address:1,location:2})}}function RS(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P;function M(U){t[5](U)}let R={src:"",size:"30",upload:!0};t[4]!==void 0&&(R.avatar=t[4]),r=new gn({props:R}),fe.push(()=>he(r,"avatar",M));function O(U){t[6](U)}let F={type:"Text",label:"Guarantor Name",isText:!0};t[1]!==void 0&&(F.value=t[1]),c=new Pt({props:F}),fe.push(()=>he(c,"value",O));function L(U){t[7](U)}let Q={type:"Text",label:"National ID",isText:!0};t[3]!==void 0&&(Q.value=t[3]),m=new Pt({props:Q}),fe.push(()=>he(m,"value",L));function te(U){t[8](U)}let re={type:"Text",label:"Occupation",isText:!0};t[0]!==void 0&&(re.value=t[0]),v=new Pt({props:re}),fe.push(()=>he(v,"value",te));function z(U){t[9](U)}let K={type:"number",label:"Phone Number",isText:!1};return t[2]!==void 0&&(K.value=t[2]),S=new Pt({props:K}),fe.push(()=>he(S,"value",z)),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),i=D(),o=y("div"),l=y("span"),a=B("Guarantor image"),u=D(),x(c.$$.fragment),h=D(),x(m.$$.fragment),_=D(),x(v.$$.fragment),k=D(),x(S.$$.fragment),this.h()},l(U){e=w(U,"DIV",{class:!0});var Y=b(e);n=w(Y,"DIV",{class:!0});var V=b(n);G(r.$$.fragment,V),V.forEach(d),i=A(Y),o=w(Y,"DIV",{class:!0});var W=b(o);l=w(W,"SPAN",{});var ue=b(l);a=j(ue,"Guarantor image"),ue.forEach(d),W.forEach(d),Y.forEach(d),u=A(U),G(c.$$.fragment,U),h=A(U),G(m.$$.fragment,U),_=A(U),G(v.$$.fragment,U),k=A(U),G(S.$$.fragment,U),this.h()},h(){E(n,"class","flex justify-center "),E(o,"class","flex justify-center text-sm text-gray-600 pt-2"),E(e,"class","mb-10")},m(U,Y){N(U,e,Y),p(e,n),q(r,n,null),p(e,i),p(e,o),p(o,l),p(l,a),N(U,u,Y),q(c,U,Y),N(U,h,Y),q(m,U,Y),N(U,_,Y),q(v,U,Y),N(U,k,Y),q(S,U,Y),P=!0},p(U,[Y]){const V={};!s&&Y&16&&(s=!0,V.avatar=U[4],de(()=>s=!1)),r.$set(V);const W={};!f&&Y&2&&(f=!0,W.value=U[1],de(()=>f=!1)),c.$set(W);const ue={};!g&&Y&8&&(g=!0,ue.value=U[3],de(()=>g=!1)),m.$set(ue);const oe={};!I&&Y&1&&(I=!0,oe.value=U[0],de(()=>I=!1)),v.$set(oe);const ne={};!T&&Y&4&&(T=!0,ne.value=U[2],de(()=>T=!1)),S.$set(ne)},i(U){P||($(r.$$.fragment,U),$(c.$$.fragment,U),$(m.$$.fragment,U),$(v.$$.fragment,U),$(S.$$.fragment,U),P=!0)},o(U){C(r.$$.fragment,U),C(c.$$.fragment,U),C(m.$$.fragment,U),C(v.$$.fragment,U),C(S.$$.fragment,U),P=!1},d(U){U&&d(e),H(r),U&&d(u),H(c,U),U&&d(h),H(m,U),U&&d(_),H(v,U),U&&d(k),H(S,U)}}}function CS(t,e,n){let{gua_occupation:r,guarantor_name:s,guarantor_phoneNumber:i,guarantor_nin:o,gua_avatar:l}=e;function a(m){l=m,n(4,l)}function u(m){s=m,n(1,s)}function c(m){o=m,n(3,o)}function f(m){r=m,n(0,r)}function h(m){i=m,n(2,i)}return t.$$set=m=>{"gua_occupation"in m&&n(0,r=m.gua_occupation),"guarantor_name"in m&&n(1,s=m.guarantor_name),"guarantor_phoneNumber"in m&&n(2,i=m.guarantor_phoneNumber),"guarantor_nin"in m&&n(3,o=m.guarantor_nin),"gua_avatar"in m&&n(4,l=m.gua_avatar)},[r,s,i,o,l,a,u,c,f,h]}class OS extends De{constructor(e){super(),Ae(this,e,CS,RS,$e,{gua_occupation:0,guarantor_name:1,guarantor_phoneNumber:2,guarantor_nin:3,gua_avatar:4})}}function ah(t,e,n){const r=t.slice();return r[3]=e[n],r}function lh(t){let e,n=t[3].data.name+"",r,s;return{c(){e=y("option"),r=B(n),this.h()},l(i){e=w(i,"OPTION",{});var o=b(e);r=j(o,n),o.forEach(d),this.h()},h(){e.__value=s=t[3].data.name,e.value=e.__value},m(i,o){N(i,e,o),p(e,r)},p(i,o){o&2&&n!==(n=i[3].data.name+"")&&me(r,n),o&2&&s!==(s=i[3].data.name)&&(e.__value=s,e.value=e.__value)},d(i){i&&d(e)}}}function uh(t){let e,n=t[3].data.roleVal==Nn.fieldAgent&&lh(t);return{c(){n&&n.c(),e=Ee()},l(r){n&&n.l(r),e=Ee()},m(r,s){n&&n.m(r,s),N(r,e,s)},p(r,s){r[3].data.roleVal==Nn.fieldAgent?n?n.p(r,s):(n=lh(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&d(e)}}}function PS(t){let e,n,r,s,i,o,l,a,u,c=t[1].value,f=[];for(let h=0;h<c.length;h+=1)f[h]=uh(ah(t,c,h));return{c(){e=B(t[0]),n=D(),r=y("div"),s=y("label"),i=B("Field Agent :"),o=D(),l=y("select");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){e=j(h,t[0]),n=A(h),r=w(h,"DIV",{class:!0});var m=b(r);s=w(m,"LABEL",{for:!0});var g=b(s);i=j(g,"Field Agent :"),g.forEach(d),o=A(m),l=w(m,"SELECT",{id:!0,name:!0,class:!0});var _=b(l);for(let v=0;v<f.length;v+=1)f[v].l(_);_.forEach(d),m.forEach(d),this.h()},h(){E(s,"for",""),E(l,"id","cars"),E(l,"name","cars"),E(l,"class","text-black border"),t[0]===void 0&&Qs(()=>t[2].call(l)),E(r,"class","ml-10 xpt-3 px-2 rounded-lg text-sm ")},m(h,m){N(h,e,m),N(h,n,m),N(h,r,m),p(r,s),p(s,i),p(r,o),p(r,l);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(l,null);zr(l,t[0],!0),a||(u=pe(l,"change",t[2]),a=!0)},p(h,[m]){if(m&1&&me(e,h[0]),m&2){c=h[1].value;let g;for(g=0;g<c.length;g+=1){const _=ah(h,c,g);f[g]?f[g].p(_,m):(f[g]=uh(_),f[g].c(),f[g].m(l,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=c.length}m&3&&zr(l,h[0])},i:_e,o:_e,d(h){h&&d(e),h&&d(n),h&&d(r),pn(f,h),a=!1,u()}}}function LS(t,e,n){let r;Ge(t,Ml,o=>n(1,r=o));let{fieldAgent:s}=e;function i(){s=Cl(this),n(0,s)}return t.$$set=o=>{"fieldAgent"in o&&n(0,s=o.fieldAgent)},[s,r,i]}class MS extends De{constructor(e){super(),Ae(this,e,LS,PS,$e,{fieldAgent:0})}}function US(t){let e,n,r;function s(o){t[34](o)}let i={};return t[13]!==void 0&&(i.fieldAgent=t[13]),e=new MS({props:i}),fe.push(()=>he(e,"fieldAgent",s)),{c(){x(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,l){q(e,o,l),r=!0},p(o,l){const a={};!n&&l[0]&8192&&(n=!0,a.fieldAgent=o[13],de(()=>n=!1)),e.$set(a)},i(o){r||($(e.$$.fragment,o),r=!0)},o(o){C(e.$$.fragment,o),r=!1},d(o){H(e,o)}}}function VS(t){let e,n,r,s,i,o,l;function a(g){t[29](g)}function u(g){t[30](g)}function c(g){t[31](g)}function f(g){t[32](g)}function h(g){t[33](g)}let m={};return t[10]!==void 0&&(m.gua_occupation=t[10]),t[8]!==void 0&&(m.guarantor_name=t[8]),t[11]!==void 0&&(m.guarantor_phoneNumber=t[11]),t[9]!==void 0&&(m.guarantor_nin=t[9]),t[7]!==void 0&&(m.gua_avatar=t[7]),e=new OS({props:m}),fe.push(()=>he(e,"gua_occupation",a)),fe.push(()=>he(e,"guarantor_name",u)),fe.push(()=>he(e,"guarantor_phoneNumber",c)),fe.push(()=>he(e,"guarantor_nin",f)),fe.push(()=>he(e,"gua_avatar",h)),{c(){x(e.$$.fragment)},l(g){G(e.$$.fragment,g)},m(g,_){q(e,g,_),l=!0},p(g,_){const v={};!n&&_[0]&1024&&(n=!0,v.gua_occupation=g[10],de(()=>n=!1)),!r&&_[0]&256&&(r=!0,v.guarantor_name=g[8],de(()=>r=!1)),!s&&_[0]&2048&&(s=!0,v.guarantor_phoneNumber=g[11],de(()=>s=!1)),!i&&_[0]&512&&(i=!0,v.guarantor_nin=g[9],de(()=>i=!1)),!o&&_[0]&128&&(o=!0,v.gua_avatar=g[7],de(()=>o=!1)),e.$set(v)},i(g){l||($(e.$$.fragment,g),l=!0)},o(g){C(e.$$.fragment,g),l=!1},d(g){H(e,g)}}}function FS(t){let e,n,r,s,i;function o(c){t[26](c)}function l(c){t[27](c)}function a(c){t[28](c)}let u={};return t[4]!==void 0&&(u.occupation=t[4]),t[5]!==void 0&&(u.address=t[5]),t[6]!==void 0&&(u.location=t[6]),e=new NS({props:u}),fe.push(()=>he(e,"occupation",o)),fe.push(()=>he(e,"address",l)),fe.push(()=>he(e,"location",a)),{c(){x(e.$$.fragment)},l(c){G(e.$$.fragment,c)},m(c,f){q(e,c,f),i=!0},p(c,f){const h={};!n&&f[0]&16&&(n=!0,h.occupation=c[4],de(()=>n=!1)),!r&&f[0]&32&&(r=!0,h.address=c[5],de(()=>r=!1)),!s&&f[0]&64&&(s=!0,h.location=c[6],de(()=>s=!1)),e.$set(h)},i(c){i||($(e.$$.fragment,c),i=!0)},o(c){C(e.$$.fragment,c),i=!1},d(c){H(e,c)}}}function BS(t){let e,n,r,s,i,o;function l(h){t[22](h)}function a(h){t[23](h)}function u(h){t[24](h)}function c(h){t[25](h)}let f={};return t[1]!==void 0&&(f.name=t[1]),t[2]!==void 0&&(f.nin=t[2]),t[3]!==void 0&&(f.contact=t[3]),t[12]!==void 0&&(f.avatar=t[12]),e=new DS({props:f}),fe.push(()=>he(e,"name",l)),fe.push(()=>he(e,"nin",a)),fe.push(()=>he(e,"contact",u)),fe.push(()=>he(e,"avatar",c)),{c(){x(e.$$.fragment)},l(h){G(e.$$.fragment,h)},m(h,m){q(e,h,m),o=!0},p(h,m){const g={};!n&&m[0]&2&&(n=!0,g.name=h[1],de(()=>n=!1)),!r&&m[0]&4&&(r=!0,g.nin=h[2],de(()=>r=!1)),!s&&m[0]&8&&(s=!0,g.contact=h[3],de(()=>s=!1)),!i&&m[0]&4096&&(i=!0,g.avatar=h[12],de(()=>i=!1)),e.$set(g)},i(h){o||($(e.$$.fragment,h),o=!0)},o(h){C(e.$$.fragment,h),o=!1},d(h){H(e,h)}}}function jS(t){let e,n,r,s;const i=[BS,FS,VS,US],o=[];function l(a,u){return a[0]==1?0:a[0]==2?1:a[0]==3?2:a[0]==4?3:-1}return~(e=l(t))&&(n=o[e]=i[e](t)),{c(){n&&n.c(),r=Ee()},l(a){n&&n.l(a),r=Ee()},m(a,u){~e&&o[e].m(a,u),N(a,r,u),s=!0},p(a,u){let c=e;e=l(a),e===c?~e&&o[e].p(a,u):(n&&(He(),C(o[c],1,1,()=>{o[c]=null}),ze()),~e?(n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r)):n=null)},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){~e&&o[e].d(a),a&&d(r)}}}function xS(t){let e,n;return e=new Xs({props:{createTitle:"Save Customer",title:"Add Customer ✜",modalTitle:t[0]<3?"Customer  info "+t[0]:"Guarantor info "+t[0],nextButton:t[0]<4,nextFunc:t[35],close:t[36],action:t[37],$$slots:{default:[jS]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s[0]&1&&(i.modalTitle=r[0]<3?"Customer  info "+r[0]:"Guarantor info "+r[0]),s[0]&1&&(i.nextButton=r[0]<4),s[0]&1&&(i.close=r[36]),s[0]&65534&&(i.action=r[37]),s[0]&16383|s[1]&128&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function qS(t,e,n){let r,s;Ge(t,dn,J=>n(14,r=J)),Ge(t,rn,J=>n(15,s=J));let i=1,o,l=new Date,a=new Date,u,c="inactive",f,h=0,m=0,g,_,v,I,k,S,T,P,M,R;function O(){n(0,i++,i),n(0,i=i<=4?i:1)}Nr(J=>{n(0,i=1)});function F(J){o=J,n(1,o)}function L(J){u=J,n(2,u)}function Q(J){f=J,n(3,f)}function te(J){M=J,n(12,M)}function re(J){g=J,n(4,g)}function z(J){_=J,n(5,_)}function K(J){v=J,n(6,v)}function U(J){T=J,n(10,T)}function Y(J){k=J,n(8,k)}function V(J){P=J,n(11,P)}function W(J){S=J,n(9,S)}function ue(J){I=J,n(7,I)}function oe(J){R=J,n(13,R)}return[i,o,u,f,g,_,v,I,k,S,T,P,M,R,r,s,l,a,c,h,m,O,F,L,Q,te,re,z,K,U,Y,V,W,ue,oe,()=>O(),()=>n(0,i=1),()=>{IS(r.businessId,{avatar:M,name:o,businessName:s.name},{avatar:I,name:k,businessName:s.name},{name:o,date:l,opened:a,nin:u,status:c,contact:f,completed:h,paid:m,occupation:g,address:_,location:v,guarantor_name:k,guarantor_nin:S,gua_occupation:T,guarantor_phoneNumber:P,fieldAgent:R})}]}class HS extends De{constructor(e){super(),Ae(this,e,qS,xS,$e,{},null,[-1,-1])}}function zS(t){let e,n,r;return{c(){e=y("div"),n=B(t[0]),this.h()},l(s){e=w(s,"DIV",{class:!0});var i=b(e);n=j(i,t[0]),i.forEach(d),this.h()},h(){E(e,"class",r="pl-2 text "+(t[1]??"pt-2")+" svelte-1ej3nbj")},m(s,i){N(s,e,i),p(e,n)},p(s,[i]){i&1&&me(n,s[0]),i&2&&r!==(r="pl-2 text "+(s[1]??"pt-2")+" svelte-1ej3nbj")&&E(e,"class",r)},i:_e,o:_e,d(s){s&&d(e)}}}function KS(t,e,n){let{name:r}=e,{top:s}=e;return t.$$set=i=>{"name"in i&&n(0,r=i.name),"top"in i&&n(1,s=i.top)},[r,s]}class va extends De{constructor(e){super(),Ae(this,e,KS,zS,$e,{name:0,top:1})}}function GS(t){let e,n,r,s,i,o;return{c(){e=y("div"),n=y("span"),r=B(t[0]),s=D(),i=y("span"),o=B(t[1]),this.h()},l(l){e=w(l,"DIV",{class:!0});var a=b(e);n=w(a,"SPAN",{class:!0});var u=b(n);r=j(u,t[0]),u.forEach(d),s=A(a),i=w(a,"SPAN",{class:!0});var c=b(i);o=j(c,t[1]),c.forEach(d),a.forEach(d),this.h()},h(){E(n,"class","text-sm my-3 font-semibold"),E(i,"class","text-sm my-3 "),E(e,"class","flex justify-between")},m(l,a){N(l,e,a),p(e,n),p(n,r),p(e,s),p(e,i),p(i,o)},p(l,[a]){a&1&&me(r,l[0]),a&2&&me(o,l[1])},i:_e,o:_e,d(l){l&&d(e)}}}function WS(t,e,n){let{title:r}=e,{data:s}=e;return t.$$set=i=>{"title"in i&&n(0,r=i.title),"data"in i&&n(1,s=i.data)},[r,s]}class Wt extends De{constructor(e){super(),Ae(this,e,WS,GS,$e,{title:0,data:1})}}function QS(t){let e,n;return{c(){e=y("div"),n=B(t[0]),this.h()},l(r){e=w(r,"DIV",{class:!0});var s=b(e);n=j(s,t[0]),s.forEach(d),this.h()},h(){E(e,"class","font-bold text-sm")},m(r,s){N(r,e,s),p(e,n)},p(r,[s]){s&1&&me(n,r[0])},i:_e,o:_e,d(r){r&&d(e)}}}function YS(t,e,n){let{title:r}=e;return t.$$set=s=>{"title"in s&&n(0,r=s.title)},[r]}class yt extends De{constructor(e){super(),Ae(this,e,YS,QS,$e,{title:0})}}const XS=(t,e)=>zn(wn,"business",t,"loans",e),JS=(t,e)=>zn(wn,"business",t,"customers",e);async function ZS(t,e,n){try{let r=Ao();console.log(t,r,n),n.loanId=r;try{await aa(XS(t,r),n),await $s(JS(t,e),{status:"active"}),tn("s","Loan created")}catch(s){tn("d","Error Occured Try again"),console.log(s)}}catch{alert("An error occured please try again")}}async function eD(t){let e="business/"+t+"/loans";await uc(e,t,So)}function tD(t){let e,n,r,s,i,o,l,a,u=xe(t[2])+"",c,f,h,m,g,_,v,I,k,S,T,P,M=xe(t[5])+"",R,O,F,L,Q,te=xe(t[8])+"",re,z,K,U,Y,V=xe(t[7])+"",W,ue,oe,ne,ie,ce,J,we,be;return r=new yt({props:{title:"Customer Name"}}),l=new yt({props:{title:"Loan Issued"}}),m=new yt({props:{title:"Collateral"}}),S=new yt({props:{title:"Interest"}}),L=new yt({props:{title:"Repayment total"}}),U=new yt({props:{title:"Loan opening fee."}}),ne=new yt({props:{title:"Loan Term"}}),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),s=B(`\r
					James L`),i=D(),o=y("div"),x(l.$$.fragment),a=D(),c=B(u),f=D(),h=y("div"),x(m.$$.fragment),g=D(),_=y("label"),v=B(t[6]),I=D(),k=y("div"),x(S.$$.fragment),T=D(),P=y("label"),R=B(M),O=D(),F=y("div"),x(L.$$.fragment),Q=D(),re=B(te),z=D(),K=y("div"),x(U.$$.fragment),Y=D(),W=B(V),ue=D(),oe=y("div"),x(ne.$$.fragment),ie=D(),ce=y("div"),J=B(t[9]),we=B(" days"),this.h()},l(ye){e=w(ye,"DIV",{class:!0});var ve=b(e);n=w(ve,"DIV",{});var nt=b(n);G(r.$$.fragment,nt),s=j(nt,`\r
					James L`),nt.forEach(d),i=A(ve),o=w(ve,"DIV",{});var Oe=b(o);G(l.$$.fragment,Oe),a=A(Oe),c=j(Oe,u),Oe.forEach(d),f=A(ve),h=w(ve,"DIV",{});var Re=b(h);G(m.$$.fragment,Re),g=A(Re),_=w(Re,"LABEL",{for:!0});var st=b(_);v=j(st,t[6]),st.forEach(d),Re.forEach(d),I=A(ve),k=w(ve,"DIV",{});var Pe=b(k);G(S.$$.fragment,Pe),T=A(Pe),P=w(Pe,"LABEL",{for:!0});var Ce=b(P);R=j(Ce,M),Ce.forEach(d),Pe.forEach(d),O=A(ve),F=w(ve,"DIV",{});var Me=b(F);G(L.$$.fragment,Me),Q=A(Me),re=j(Me,te),Me.forEach(d),z=A(ve),K=w(ve,"DIV",{});var Z=b(K);G(U.$$.fragment,Z),Y=A(Z),W=j(Z,V),Z.forEach(d),ue=A(ve),oe=w(ve,"DIV",{});var Te=b(oe);G(ne.$$.fragment,Te),ie=A(Te),ce=w(Te,"DIV",{class:!0});var Je=b(ce);J=j(Je,t[9]),we=j(Je," days"),Je.forEach(d),Te.forEach(d),ve.forEach(d),this.h()},h(){E(_,"for",""),E(P,"for",""),E(ce,"class",""),E(e,"class","space-y-3")},m(ye,ve){N(ye,e,ve),p(e,n),q(r,n,null),p(n,s),p(e,i),p(e,o),q(l,o,null),p(o,a),p(o,c),p(e,f),p(e,h),q(m,h,null),p(h,g),p(h,_),p(_,v),p(e,I),p(e,k),q(S,k,null),p(k,T),p(k,P),p(P,R),p(e,O),p(e,F),q(L,F,null),p(F,Q),p(F,re),p(e,z),p(e,K),q(U,K,null),p(K,Y),p(K,W),p(e,ue),p(e,oe),q(ne,oe,null),p(oe,ie),p(oe,ce),p(ce,J),p(ce,we),be=!0},p(ye,ve){(!be||ve&4)&&u!==(u=xe(ye[2])+"")&&me(c,u),(!be||ve&64)&&me(v,ye[6]),(!be||ve&32)&&M!==(M=xe(ye[5])+"")&&me(R,M),(!be||ve&256)&&te!==(te=xe(ye[8])+"")&&me(re,te),(!be||ve&128)&&V!==(V=xe(ye[7])+"")&&me(W,V),(!be||ve&512)&&me(J,ye[9])},i(ye){be||($(r.$$.fragment,ye),$(l.$$.fragment,ye),$(m.$$.fragment,ye),$(S.$$.fragment,ye),$(L.$$.fragment,ye),$(U.$$.fragment,ye),$(ne.$$.fragment,ye),be=!0)},o(ye){C(r.$$.fragment,ye),C(l.$$.fragment,ye),C(m.$$.fragment,ye),C(S.$$.fragment,ye),C(L.$$.fragment,ye),C(U.$$.fragment,ye),C(ne.$$.fragment,ye),be=!1},d(ye){ye&&d(e),H(r),H(l),H(m),H(S),H(L),H(U),H(ne)}}}function nD(t){let e,n,r,s,i,o,l,a,u,c,f,h=new Date().toDateString()+"",m,g,_,v,I,k,S,T,P,M;n=new yt({props:{title:"Please enter your loan opening fee."}});function R(F){t[19](F)}let O={type:"number",label:"Opening fee",isText:!1};return t[7]!==void 0&&(O.value=t[7]),i=new Pt({props:O}),fe.push(()=>he(i,"value",R)),u=new yt({props:{title:"Date today"}}),v=new yt({props:{title:"Loan Term"}}),{c(){e=y("div"),x(n.$$.fragment),r=D(),s=y("div"),x(i.$$.fragment),l=D(),a=y("div"),x(u.$$.fragment),c=D(),f=y("div"),m=B(h),g=D(),_=y("div"),x(v.$$.fragment),I=D(),k=y("div"),S=y("input"),this.h()},l(F){e=w(F,"DIV",{});var L=b(e);G(n.$$.fragment,L),r=A(L),s=w(L,"DIV",{});var Q=b(s);G(i.$$.fragment,Q),Q.forEach(d),L.forEach(d),l=A(F),a=w(F,"DIV",{});var te=b(a);G(u.$$.fragment,te),c=A(te),f=w(te,"DIV",{class:!0});var re=b(f);m=j(re,h),re.forEach(d),te.forEach(d),g=A(F),_=w(F,"DIV",{});var z=b(_);G(v.$$.fragment,z),I=A(z),k=w(z,"DIV",{class:!0});var K=b(k);S=w(K,"INPUT",{type:!0,min:!0}),K.forEach(d),z.forEach(d),this.h()},h(){E(f,"class",""),E(S,"type","date"),E(S,"min",t[14].min),E(k,"class","")},m(F,L){N(F,e,L),q(n,e,null),p(e,r),p(e,s),q(i,s,null),N(F,l,L),N(F,a,L),q(u,a,null),p(a,c),p(a,f),p(f,m),N(F,g,L),N(F,_,L),q(v,_,null),p(_,I),p(_,k),p(k,S),nn(S,t[4]),T=!0,P||(M=pe(S,"input",t[20]),P=!0)},p(F,L){const Q={};!o&&L&128&&(o=!0,Q.value=F[7],de(()=>o=!1)),i.$set(Q),L&16&&nn(S,F[4])},i(F){T||($(n.$$.fragment,F),$(i.$$.fragment,F),$(u.$$.fragment,F),$(v.$$.fragment,F),T=!0)},o(F){C(n.$$.fragment,F),C(i.$$.fragment,F),C(u.$$.fragment,F),C(v.$$.fragment,F),T=!1},d(F){F&&d(e),H(n),H(i),F&&d(l),F&&d(a),H(u),F&&d(g),F&&d(_),H(v),P=!1,M()}}}function rD(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T=xe(t[5])+"",P,M,R,O,F,L,Q=xe(t[8])+"",te,re,z,K;return n=new yt({props:{title:"What's the interest rate on the loan?"}}),O=new yt({props:{title:"This is how much the customer will pay."}}),{c(){e=y("div"),x(n.$$.fragment),r=D(),s=y("label"),i=B("Interest %"),o=D(),l=y("select"),a=y("option"),u=B("10%"),c=y("option"),f=B("20%"),h=y("option"),m=B("30%"),g=y("option"),_=B("40%"),v=y("option"),I=B("custom"),k=D(),S=y("div"),P=B(T),M=D(),R=y("div"),x(O.$$.fragment),F=D(),L=y("div"),te=B(Q),this.h()},l(U){e=w(U,"DIV",{class:!0});var Y=b(e);G(n.$$.fragment,Y),r=A(Y),s=w(Y,"LABEL",{for:!0});var V=b(s);i=j(V,"Interest %"),V.forEach(d),o=A(Y),l=w(Y,"SELECT",{id:!0,name:!0,class:!0});var W=b(l);a=w(W,"OPTION",{});var ue=b(a);u=j(ue,"10%"),ue.forEach(d),c=w(W,"OPTION",{});var oe=b(c);f=j(oe,"20%"),oe.forEach(d),h=w(W,"OPTION",{});var ne=b(h);m=j(ne,"30%"),ne.forEach(d),g=w(W,"OPTION",{});var ie=b(g);_=j(ie,"40%"),ie.forEach(d),v=w(W,"OPTION",{});var ce=b(v);I=j(ce,"custom"),ce.forEach(d),W.forEach(d),k=A(Y),S=w(Y,"DIV",{class:!0});var J=b(S);P=j(J,T),J.forEach(d),Y.forEach(d),M=A(U),R=w(U,"DIV",{class:!0});var we=b(R);G(O.$$.fragment,we),F=A(we),L=w(we,"DIV",{class:!0});var be=b(L);te=j(be,Q),be.forEach(d),we.forEach(d),this.h()},h(){E(s,"for",""),a.__value="10",a.value=a.__value,c.__value="20",c.value=c.__value,h.__value="30",h.value=h.__value,g.__value="40",g.value=g.__value,v.__value="custom",v.value=v.__value,E(l,"id","cars"),E(l,"name","cars"),E(l,"class","text-black border"),t[3]===void 0&&Qs(()=>t[17].call(l)),E(S,"class",""),E(e,"class","rounded-lg "),E(L,"class","font-normal "),E(R,"class","pt-3 font-semibold")},m(U,Y){N(U,e,Y),q(n,e,null),p(e,r),p(e,s),p(s,i),p(e,o),p(e,l),p(l,a),p(a,u),p(l,c),p(c,f),p(l,h),p(h,m),p(l,g),p(g,_),p(l,v),p(v,I),zr(l,t[3],!0),p(e,k),p(e,S),p(S,P),N(U,M,Y),N(U,R,Y),q(O,R,null),p(R,F),p(R,L),p(L,te),re=!0,z||(K=[pe(l,"change",t[17]),pe(l,"select",t[18])],z=!0)},p(U,Y){Y&8&&zr(l,U[3]),(!re||Y&32)&&T!==(T=xe(U[5])+"")&&me(P,T),(!re||Y&256)&&Q!==(Q=xe(U[8])+"")&&me(te,Q)},i(U){re||($(n.$$.fragment,U),$(O.$$.fragment,U),re=!0)},o(U){C(n.$$.fragment,U),C(O.$$.fragment,U),re=!1},d(U){U&&d(e),H(n),U&&d(M),U&&d(R),H(O),z=!1,lt(K)}}}function sD(t){let e,n,r,s=t[0].name+"",i,o,l,a,u,c,f,h,m,g,_,v,I,k;n=new yt({props:{title:"Customer Name"}}),a=new yt({props:{title:"How much is the customer borrowing?"}});function S(R){t[15](R)}let T={type:"number",label:"Amount",isText:!1};t[2]!==void 0&&(T.value=t[2]),c=new Pt({props:T}),fe.push(()=>he(c,"value",S)),g=new yt({props:{title:"What Security is being collected?"}});function P(R){t[16](R)}let M={type:"text",label:"Security",isText:!0};return t[6]!==void 0&&(M.value=t[6]),v=new Pt({props:M}),fe.push(()=>he(v,"value",P)),{c(){e=y("div"),x(n.$$.fragment),r=D(),i=B(s),o=D(),l=y("div"),x(a.$$.fragment),u=D(),x(c.$$.fragment),h=D(),m=y("div"),x(g.$$.fragment),_=D(),x(v.$$.fragment),this.h()},l(R){e=w(R,"DIV",{class:!0});var O=b(e);G(n.$$.fragment,O),r=A(O),i=j(O,s),O.forEach(d),o=A(R),l=w(R,"DIV",{});var F=b(l);G(a.$$.fragment,F),u=A(F),G(c.$$.fragment,F),F.forEach(d),h=A(R),m=w(R,"DIV",{});var L=b(m);G(g.$$.fragment,L),_=A(L),G(v.$$.fragment,L),L.forEach(d),this.h()},h(){E(e,"class","")},m(R,O){N(R,e,O),q(n,e,null),p(e,r),p(e,i),N(R,o,O),N(R,l,O),q(a,l,null),p(l,u),q(c,l,null),N(R,h,O),N(R,m,O),q(g,m,null),p(m,_),q(v,m,null),k=!0},p(R,O){(!k||O&1)&&s!==(s=R[0].name+"")&&me(i,s);const F={};!f&&O&4&&(f=!0,F.value=R[2],de(()=>f=!1)),c.$set(F);const L={};!I&&O&64&&(I=!0,L.value=R[6],de(()=>I=!1)),v.$set(L)},i(R){k||($(n.$$.fragment,R),$(a.$$.fragment,R),$(c.$$.fragment,R),$(g.$$.fragment,R),$(v.$$.fragment,R),k=!0)},o(R){C(n.$$.fragment,R),C(a.$$.fragment,R),C(c.$$.fragment,R),C(g.$$.fragment,R),C(v.$$.fragment,R),k=!1},d(R){R&&d(e),H(n),R&&d(o),R&&d(l),H(a),H(c),R&&d(h),R&&d(m),H(g),H(v)}}}function iD(t){let e,n,r,s;const i=[sD,rD,nD,tD],o=[];function l(a,u){return a[10]==1?0:a[10]==2?1:a[10]==3?2:3}return n=l(t),r=o[n]=i[n](t),{c(){e=y("div"),r.c(),this.h()},l(a){e=w(a,"DIV",{class:!0});var u=b(e);r.l(u),u.forEach(d),this.h()},h(){E(e,"class","space-y-5")},m(a,u){N(a,e,u),o[n].m(e,null),s=!0},p(a,u){let c=n;n=l(a),n===c?o[n].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),r=o[n],r?r.p(a,u):(r=o[n]=i[n](a),r.c()),$(r,1),r.m(e,null))},i(a){s||($(r),s=!0)},o(a){C(r),s=!1},d(a){a&&d(e),o[n].d()}}}function oD(t){let e,n;return e=new Xs({props:{createTitle:"Save loan data",title:"Give Loan ✜",modalTitle:"Give Loan "+t[10],nextButton:t[10]<4,nextFunc:t[21],close:t[22],action:t[23],$$slots:{default:[iD]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,[s]){const i={};s&1024&&(i.modalTitle="Give Loan "+r[10]),s&1024&&(i.nextButton=r[10]<4),s&1024&&(i.close=r[22]),s&3063&&(i.action=r[23]),s&16779261&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function aD(t,e,n){let r,s,i,o,l;Ge(t,rn,Q=>n(11,l=Q));function a(){n(10,r++,r),n(10,r=r<=4?r:1)}let u=0,c=0,f="",h=0,m="",g=new Date,_={min:N_()},{data:v}=e,{c_id:I}=e;function k(Q){u=Q,n(2,u)}function S(Q){f=Q,n(6,f)}function T(){c=Cl(this),n(3,c)}const P=()=>o();function M(Q){h=Q,n(7,h)}function R(){m=this.value,n(4,m)}const O=()=>a(),F=()=>n(10,r=1),L=()=>ZS(l.BusinessId,I,{borrower:v.name,customerId:I,Loan:u,collateral:f,interest:i,toBePaid:o,loan_term:s,Opening_Fee:h,type:"original",interest:i,loan_date_iss:g,loan_due:new Date(m),balance:o,date:new Date,lastpaid:"",userUrl:v.userUrl??""});return t.$$set=Q=>{"data"in Q&&n(0,v=Q.data),"c_id"in Q&&n(1,I=Q.c_id)},t.$$.update=()=>{t.$$.dirty&16&&n(9,s=Qi(g,new Date(m))),t.$$.dirty&12&&n(5,i=u*c/100),t.$$.dirty&36&&n(8,o=parseInt(i)+parseInt(u))},n(10,r=1),[v,I,u,c,m,i,f,h,o,s,r,l,a,g,_,k,S,T,P,M,R,O,F,L]}class Gg extends De{constructor(e){super(),Ae(this,e,aD,oD,$e,{data:0,c_id:1})}}function lD(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_=t[1].name+"",v,I,k,S,T,P,M,R,O,F,L,Q,te,re,z,K,U,Y,V,W,ue,oe,ne,ie,ce,J,we,be,ye,ve,nt,Oe,Re,st,Pe,Ce,Me,Z,Te,Je,Ke;return r=new Rn({props:{title:"← Customer Details"}}),o=new Gg({props:{data:t[1]}}),f=new gn({props:{src:t[1].userUrl??"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Uganda_-_Ruwenzori_Mountain_Lady.jpg/330px-Uganda_-_Ruwenzori_Mountain_Lady.jpg",size:2}}),O=new Wt({props:{title:"Nin number",data:t[1].nin}}),L=new Wt({props:{title:"Work",data:t[1].occupation}}),te=new Wt({props:{title:"Date_Opened",data:t[1].opened.toDate().toDateString()}}),z=new Wt({props:{title:"Total_paid",data:t[1].paid}}),Y=new Wt({props:{title:"Assigned_by",data:t[1].fieldAgent}}),W=new Wt({props:{title:"Address",data:t[1].address}}),oe=new Wt({props:{title:"Location",data:t[1].location}}),ie=new Wt({props:{title:"Phone_number",data:t[1].contact}}),be=new gn({props:{src:t[1].gua_Url??"https://img.freepik.com/free-photo/worldface-ugandan-man-white-background_53876-30388.jpg",size:0}}),st=new Wt({props:{title:"Name",data:t[1].guarantor_name}}),Ce=new Wt({props:{title:"Nin",data:t[1].guarantor_nin}}),Z=new Wt({props:{title:"Contact",data:t[1].guarantor_phoneNumber}}),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),s=D(),i=y("div"),x(o.$$.fragment),l=D(),a=y("div"),u=y("div"),c=y("div"),x(f.$$.fragment),h=D(),m=y("div"),g=y("div"),v=B(_),I=D(),k=y("div"),S=y("span"),T=B("Customer details"),P=D(),M=y("div"),R=y("div"),x(O.$$.fragment),F=D(),x(L.$$.fragment),Q=D(),x(te.$$.fragment),re=D(),x(z.$$.fragment),K=D(),U=y("div"),x(Y.$$.fragment),V=D(),x(W.$$.fragment),ue=D(),x(oe.$$.fragment),ne=D(),x(ie.$$.fragment),ce=D(),J=y("div"),we=y("div"),x(be.$$.fragment),ye=D(),ve=y("div"),nt=B("Guarantor"),Oe=D(),Re=y("div"),x(st.$$.fragment),Pe=D(),x(Ce.$$.fragment),Me=D(),x(Z.$$.fragment),this.h()},l(X){e=w(X,"DIV",{class:!0});var ge=b(e);n=w(ge,"DIV",{style:!0});var et=b(n);G(r.$$.fragment,et),et.forEach(d),s=A(ge),i=w(ge,"DIV",{});var Ye=b(i);G(o.$$.fragment,Ye),Ye.forEach(d),ge.forEach(d),l=A(X),a=w(X,"DIV",{class:!0});var it=b(a);u=w(it,"DIV",{class:!0});var rt=b(u);c=w(rt,"DIV",{class:!0});var ae=b(c);G(f.$$.fragment,ae),ae.forEach(d),h=A(rt),m=w(rt,"DIV",{class:!0});var Fe=b(m);g=w(Fe,"DIV",{class:!0});var bt=b(g);v=j(bt,_),bt.forEach(d),Fe.forEach(d),I=A(rt),k=w(rt,"DIV",{class:!0});var Et=b(k);S=w(Et,"SPAN",{class:!0});var It=b(S);T=j(It,"Customer details"),It.forEach(d),Et.forEach(d),P=A(rt),M=w(rt,"DIV",{class:!0});var ct=b(M);R=w(ct,"DIV",{class:!0});var Nt=b(R);G(O.$$.fragment,Nt),F=A(Nt),G(L.$$.fragment,Nt),Q=A(Nt),G(te.$$.fragment,Nt),re=A(Nt),G(z.$$.fragment,Nt),Nt.forEach(d),K=A(ct),U=w(ct,"DIV",{class:!0});var Rt=b(U);G(Y.$$.fragment,Rt),V=A(Rt),G(W.$$.fragment,Rt),ue=A(Rt),G(oe.$$.fragment,Rt),ne=A(Rt),G(ie.$$.fragment,Rt),Rt.forEach(d),ct.forEach(d),rt.forEach(d),ce=A(it),J=w(it,"DIV",{class:!0});var Ct=b(J);we=w(Ct,"DIV",{class:!0});var sn=b(we);G(be.$$.fragment,sn),sn.forEach(d),ye=A(Ct),ve=w(Ct,"DIV",{class:!0});var bn=b(ve);nt=j(bn,"Guarantor"),bn.forEach(d),Oe=A(Ct),Re=w(Ct,"DIV",{class:!0});var Xt=b(Re);G(st.$$.fragment,Xt),Pe=A(Xt),G(Ce.$$.fragment,Xt),Me=A(Xt),G(Z.$$.fragment,Xt),Xt.forEach(d),Ct.forEach(d),it.forEach(d),this.h()},h(){ht(n,"cursor","pointer"),E(e,"class","flex justify-between"),E(c,"class","flex justify-center pt-5 "),E(g,"class","font-semibold text-slate-600"),E(m,"class","flex justify-center pt-1 pb-2"),E(S,"class","text-sm text-gray-500 "),E(k,"class","flex justify-start pb-3"),E(R,"class","mr-3 w-80 border px-3 rounded-lg"),E(U,"class","w-60 border px-3 rounded-lg"),E(M,"class","flex justify-evenly space-x-5 "),E(u,"class","border shadow-2xl w-auto rounded-3xl p-8 "),E(we,"class","flex justify-center"),E(ve,"class","flex justify-center text-sm pt-2 text-slate-500"),E(Re,"class","w-48"),E(J,"class","px-5 pt-10 space-y-1 border shadow-xl rounded-2xl"),E(a,"class","flex justify-evenly pt-10")},m(X,ge){N(X,e,ge),p(e,n),q(r,n,null),p(e,s),p(e,i),q(o,i,null),N(X,l,ge),N(X,a,ge),p(a,u),p(u,c),q(f,c,null),p(u,h),p(u,m),p(m,g),p(g,v),p(u,I),p(u,k),p(k,S),p(S,T),p(u,P),p(u,M),p(M,R),q(O,R,null),p(R,F),q(L,R,null),p(R,Q),q(te,R,null),p(R,re),q(z,R,null),p(M,K),p(M,U),q(Y,U,null),p(U,V),q(W,U,null),p(U,ue),q(oe,U,null),p(U,ne),q(ie,U,null),p(a,ce),p(a,J),p(J,we),q(be,we,null),p(J,ye),p(J,ve),p(ve,nt),p(J,Oe),p(J,Re),q(st,Re,null),p(Re,Pe),q(Ce,Re,null),p(Re,Me),q(Z,Re,null),Te=!0,Je||(Ke=[pe(n,"click",t[3]),pe(n,"keypress",t[2])],Je=!0)},p(X,[ge]){const et={};ge&2&&(et.data=X[1]),o.$set(et);const Ye={};ge&2&&(Ye.src=X[1].userUrl??"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Uganda_-_Ruwenzori_Mountain_Lady.jpg/330px-Uganda_-_Ruwenzori_Mountain_Lady.jpg"),f.$set(Ye),(!Te||ge&2)&&_!==(_=X[1].name+"")&&me(v,_);const it={};ge&2&&(it.data=X[1].nin),O.$set(it);const rt={};ge&2&&(rt.data=X[1].occupation),L.$set(rt);const ae={};ge&2&&(ae.data=X[1].opened.toDate().toDateString()),te.$set(ae);const Fe={};ge&2&&(Fe.data=X[1].paid),z.$set(Fe);const bt={};ge&2&&(bt.data=X[1].fieldAgent),Y.$set(bt);const Et={};ge&2&&(Et.data=X[1].address),W.$set(Et);const It={};ge&2&&(It.data=X[1].location),oe.$set(It);const ct={};ge&2&&(ct.data=X[1].contact),ie.$set(ct);const Nt={};ge&2&&(Nt.src=X[1].gua_Url??"https://img.freepik.com/free-photo/worldface-ugandan-man-white-background_53876-30388.jpg"),be.$set(Nt);const Rt={};ge&2&&(Rt.data=X[1].guarantor_name),st.$set(Rt);const Ct={};ge&2&&(Ct.data=X[1].guarantor_nin),Ce.$set(Ct);const sn={};ge&2&&(sn.data=X[1].guarantor_phoneNumber),Z.$set(sn)},i(X){Te||($(r.$$.fragment,X),$(o.$$.fragment,X),$(f.$$.fragment,X),$(O.$$.fragment,X),$(L.$$.fragment,X),$(te.$$.fragment,X),$(z.$$.fragment,X),$(Y.$$.fragment,X),$(W.$$.fragment,X),$(oe.$$.fragment,X),$(ie.$$.fragment,X),$(be.$$.fragment,X),$(st.$$.fragment,X),$(Ce.$$.fragment,X),$(Z.$$.fragment,X),Te=!0)},o(X){C(r.$$.fragment,X),C(o.$$.fragment,X),C(f.$$.fragment,X),C(O.$$.fragment,X),C(L.$$.fragment,X),C(te.$$.fragment,X),C(z.$$.fragment,X),C(Y.$$.fragment,X),C(W.$$.fragment,X),C(oe.$$.fragment,X),C(ie.$$.fragment,X),C(be.$$.fragment,X),C(st.$$.fragment,X),C(Ce.$$.fragment,X),C(Z.$$.fragment,X),Te=!1},d(X){X&&d(e),H(r),H(o),X&&d(l),X&&d(a),H(f),H(O),H(L),H(te),H(z),H(Y),H(W),H(oe),H(ie),H(be),H(st),H(Ce),H(Z),Je=!1,lt(Ke)}}}function uD(t,e,n){let{isDetail:r,userData:s}=e;function i(l){ot.call(this,t,l)}const o=()=>n(0,r=!1);return t.$$set=l=>{"isDetail"in l&&n(0,r=l.isDetail),"userData"in l&&n(1,s=l.userData)},[r,s,i,o]}class cD extends De{constructor(e){super(),Ae(this,e,uD,lD,$e,{isDetail:0,userData:1})}}function ch(t,e,n){const r=t.slice();return r[13]=e[n],r[14]=e,r[15]=n,r}function fD(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I;n=new Rn({props:{title:"Customers 😊"}});function k(T){t[8](T)}let S={placeholder:"Search for customer",keydown:mD,isText:!0,type:"text"};return t[0]!==void 0&&(S.value=t[0]),o=new Zt({props:S}),fe.push(()=>he(o,"value",k)),u=new Yt({props:{click:!0,title:"GO"}}),f=new HS({}),v=new Ul({props:{headers:["Name","Date Opened","Nin","Status","Contact","Completed","Total paid"],$$slots:{default:[dD]},$$scope:{ctx:t}}}),{c(){e=y("div"),x(n.$$.fragment),r=D(),s=y("div"),i=y("div"),x(o.$$.fragment),a=D(),x(u.$$.fragment),c=D(),x(f.$$.fragment),h=D(),m=y("div"),g=D(),_=y("div"),x(v.$$.fragment),this.h()},l(T){e=w(T,"DIV",{class:!0});var P=b(e);G(n.$$.fragment,P),r=A(P),s=w(P,"DIV",{class:!0});var M=b(s);i=w(M,"DIV",{class:!0});var R=b(i);G(o.$$.fragment,R),R.forEach(d),a=A(M),G(u.$$.fragment,M),M.forEach(d),c=A(P),G(f.$$.fragment,P),P.forEach(d),h=A(T),m=w(T,"DIV",{class:!0}),b(m).forEach(d),g=A(T),_=w(T,"DIV",{});var O=b(_);G(v.$$.fragment,O),O.forEach(d),this.h()},h(){E(i,"class","w-30"),E(s,"class","flex justify-start"),E(e,"class","flex justify-between"),E(m,"class","pt-5")},m(T,P){N(T,e,P),q(n,e,null),p(e,r),p(e,s),p(s,i),q(o,i,null),p(s,a),q(u,s,null),p(e,c),q(f,e,null),N(T,h,P),N(T,m,P),N(T,g,P),N(T,_,P),q(v,_,null),I=!0},p(T,P){const M={};!l&&P&1&&(l=!0,M.value=T[0],de(()=>l=!1)),o.$set(M);const R={};P&65566&&(R.$$scope={dirty:P,ctx:T}),v.$set(R)},i(T){I||($(n.$$.fragment,T),$(o.$$.fragment,T),$(u.$$.fragment,T),$(f.$$.fragment,T),$(v.$$.fragment,T),I=!0)},o(T){C(n.$$.fragment,T),C(o.$$.fragment,T),C(u.$$.fragment,T),C(f.$$.fragment,T),C(v.$$.fragment,T),I=!1},d(T){T&&d(e),H(n),H(o),H(u),H(f),T&&d(h),T&&d(m),T&&d(g),T&&d(_),H(v)}}}function hD(t){let e,n,r,s;function i(a){t[6](a)}function o(a){t[7](a)}let l={};return t[2]!==void 0&&(l.isDetail=t[2]),t[3]!==void 0&&(l.userData=t[3]),e=new cD({props:l}),fe.push(()=>he(e,"isDetail",i)),fe.push(()=>he(e,"userData",o)),{c(){x(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,u){q(e,a,u),s=!0},p(a,u){const c={};!n&&u&4&&(n=!0,c.isDetail=a[2],de(()=>n=!1)),!r&&u&8&&(r=!0,c.userData=a[3],de(()=>r=!1)),e.$set(c)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){C(e.$$.fragment,a),s=!1},d(a){H(e,a)}}}function fh(t){let e,n,r=t[4],s=[];for(let o=0;o<r.length;o+=1)s[o]=dh(ch(t,r,o));const i=o=>C(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ee()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=Ee()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);N(o,e,l),n=!0},p(o,l){if(l&28){r=o[4];let a;for(a=0;a<r.length;a+=1){const u=ch(o,r,a);s[a]?(s[a].p(u,l),$(s[a],1)):(s[a]=dh(u),s[a].c(),$(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=r.length;a<s.length;a+=1)i(a);ze()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)$(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)C(s[l]);n=!1},d(o){pn(s,o),o&&d(e)}}}function hh(t){let e,n,r,s,i,o,l;function a(h){t[9](h,t[13])}function u(h){t[10](h)}function c(h){t[11](h)}let f={};return t[13].data!==void 0&&(f.data=t[13].data),t[2]!==void 0&&(f.isDetail=t[2]),t[3]!==void 0&&(f.userData=t[3]),r=new O_({props:f}),fe.push(()=>he(r,"data",a)),fe.push(()=>he(r,"isDetail",u)),fe.push(()=>he(r,"userData",c)),{c(){e=y("div"),n=D(),x(r.$$.fragment),this.h()},l(h){e=w(h,"DIV",{class:!0}),b(e).forEach(d),n=A(h),G(r.$$.fragment,h),this.h()},h(){E(e,"class","mt-2")},m(h,m){N(h,e,m),N(h,n,m),q(r,h,m),l=!0},p(h,m){t=h;const g={};!s&&m&16&&(s=!0,g.data=t[13].data,de(()=>s=!1)),!i&&m&4&&(i=!0,g.isDetail=t[2],de(()=>i=!1)),!o&&m&8&&(o=!0,g.userData=t[3],de(()=>o=!1)),r.$set(g)},i(h){l||($(r.$$.fragment,h),l=!0)},o(h){C(r.$$.fragment,h),l=!1},d(h){h&&d(e),h&&d(n),H(r,h)}}}function dh(t){let e,n,r=t[13].data!=null&&hh(t);return{c(){r&&r.c(),e=Ee()},l(s){r&&r.l(s),e=Ee()},m(s,i){r&&r.m(s,i),N(s,e,i),n=!0},p(s,i){s[13].data!=null?r?(r.p(s,i),i&16&&$(r,1)):(r=hh(s),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(He(),C(r,1,1,()=>{r=null}),ze())},i(s){n||($(r),n=!0)},o(s){C(r),n=!1},d(s){r&&r.d(s),s&&d(e)}}}function dD(t){let e,n,r,s,i=t[1]!=null&&fh(t);return{c(){e=y("div"),n=D(),i&&i.c(),r=Ee(),this.h()},l(o){e=w(o,"DIV",{class:!0}),b(e).forEach(d),n=A(o),i&&i.l(o),r=Ee(),this.h()},h(){E(e,"class","hover:text-lg my-3")},m(o,l){N(o,e,l),N(o,n,l),i&&i.m(o,l),N(o,r,l),s=!0},p(o,l){o[1]!=null?i?(i.p(o,l),l&2&&$(i,1)):(i=fh(o),i.c(),$(i,1),i.m(r.parentNode,r)):i&&(He(),C(i,1,1,()=>{i=null}),ze())},i(o){s||($(i),s=!0)},o(o){C(i),s=!1},d(o){o&&d(e),o&&d(n),i&&i.d(o),o&&d(r)}}}function pD(t){let e,n,r,s;const i=[hD,fD],o=[];function l(a,u){return a[2]?0:1}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ee()},l(a){n.l(a),r=Ee()},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,[u]){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}const mD=()=>{};function gD(t,e,n){let r,s,i,o;Ge(t,Ys,_=>n(5,o=_));let l=!1,a;Nr(_=>{});function u(_){l=_,n(2,l)}function c(_){a=_,n(3,a)}function f(_){i=_,n(0,i)}function h(_,v){t.$$.not_equal(v.data,_)&&(v.data=_,n(4,s),n(1,r),n(0,i),n(5,o))}function m(_){l=_,n(2,l)}function g(_){a=_,n(3,a)}return t.$$.update=()=>{t.$$.dirty&32&&n(1,r=o.value!=null?o.value.sort((_,v)=>v.data.name-_.data.name):[]),t.$$.dirty&3&&n(4,s=r.filter(_=>_.data.name.toLowerCase().includes(i.toLowerCase())))},n(0,i=""),[i,r,l,a,s,o,u,c,f,h,m,g]}class _D extends De{constructor(e){super(),Ae(this,e,gD,pD,$e,{})}}function vD(t){let e,n,r=t[3]+1+"",s,i,o,l,a,u,c,f,h,m,g,_,v;l=new gn({props:{src:t[1]}}),c=new va({props:{top:"1",name:t[2]}});const I=t[5].default,k=Al(I,t,t[4],null);return{c(){e=y("div"),n=y("span"),s=B(r),i=B("."),o=D(),x(l.$$.fragment),a=D(),u=y("div"),x(c.$$.fragment),f=D(),h=y("div"),m=B(t[0]),g=D(),_=y("div"),k&&k.c(),this.h()},l(S){e=w(S,"DIV",{class:!0});var T=b(e);n=w(T,"SPAN",{class:!0});var P=b(n);s=j(P,r),i=j(P,"."),P.forEach(d),o=A(T),G(l.$$.fragment,T),a=A(T),u=w(T,"DIV",{class:!0});var M=b(u);G(c.$$.fragment,M),f=A(M),h=w(M,"DIV",{class:!0});var R=b(h);m=j(R,t[0]),R.forEach(d),M.forEach(d),g=A(T),_=w(T,"DIV",{class:!0});var O=b(_);k&&k.l(O),O.forEach(d),T.forEach(d),this.h()},h(){E(n,"class","pr-4 pt-2 font-semibold"),E(h,"class","pl-2 text-sm"),E(u,"class","px-2 w-32"),E(_,"class","pl-5 "),E(e,"class","pt-5 flex justify-center pr-10 ")},m(S,T){N(S,e,T),p(e,n),p(n,s),p(n,i),p(e,o),q(l,e,null),p(e,a),p(e,u),q(c,u,null),p(u,f),p(u,h),p(h,m),p(e,g),p(e,_),k&&k.m(_,null),v=!0},p(S,[T]){(!v||T&8)&&r!==(r=S[3]+1+"")&&me(s,r);const P={};T&2&&(P.src=S[1]),l.$set(P);const M={};T&4&&(M.name=S[2]),c.$set(M),(!v||T&1)&&me(m,S[0]),k&&k.p&&(!v||T&16)&&$l(k,I,S,S[4],v?Rl(I,S[4],T,null):Nl(S[4]),null)},i(S){v||($(l.$$.fragment,S),$(c.$$.fragment,S),$(k,S),v=!0)},o(S){C(l.$$.fragment,S),C(c.$$.fragment,S),C(k,S),v=!1},d(S){S&&d(e),H(l),H(c),k&&k.d(S)}}}function yD(t,e,n){let{$$slots:r={},$$scope:s}=e,{status:i}=e,{src:o}=e,{name:l,index:a}=e;return t.$$set=u=>{"status"in u&&n(0,i=u.status),"src"in u&&n(1,o=u.src),"name"in u&&n(2,l=u.name),"index"in u&&n(3,a=u.index),"$$scope"in u&&n(4,s=u.$$scope)},[i,o,l,a,s,r]}class Wg extends De{constructor(e){super(),Ae(this,e,yD,vD,$e,{status:0,src:1,name:2,index:3})}}function ph(t,e,n){const r=t.slice();return r[3]=e[n],r}function wD(t){let e;function n(i,o){return i[3]==Nn.admin?ID:ED}let r=n(t),s=r(t);return{c(){s.c(),e=Ee()},l(i){s.l(i),e=Ee()},m(i,o){s.m(i,o),N(i,e,o)},p(i,o){r===(r=n(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){s.d(i),i&&d(e)}}}function bD(t){let e,n;return{c(){e=y("div"),n=B(t[3]),this.h()},l(r){e=w(r,"DIV",{class:!0});var s=b(e);n=j(s,t[3]),s.forEach(d),this.h()},h(){E(e,"class","ml-10 xpt-3 px-2 rounded-lg text-sm")},m(r,s){N(r,e,s),p(e,n)},p(r,s){s&8&&me(n,r[3])},d(r){r&&d(e)}}}function ED(t){let e,n,r,s,i,o,l,a,u=Object.keys(Nn),c=[];for(let f=0;f<u.length;f+=1)c[f]=mh(ph(t,u,f));return{c(){e=y("div"),n=y("select");for(let f=0;f<c.length;f+=1)c[f].c();r=D(),s=y("div"),i=y("span"),o=B("See details"),this.h()},l(f){e=w(f,"DIV",{class:!0});var h=b(e);n=w(h,"SELECT",{id:!0,name:!0,class:!0});var m=b(n);for(let v=0;v<c.length;v+=1)c[v].l(m);m.forEach(d),r=A(h),s=w(h,"DIV",{});var g=b(s);i=w(g,"SPAN",{class:!0});var _=b(i);o=j(_,"See details"),_.forEach(d),g.forEach(d),h.forEach(d),this.h()},h(){E(n,"id","cars"),E(n,"name","cars"),E(n,"class","text-black"),E(i,"class","text-sm"),E(e,"class","ml-10 xpt-3 px-2 rounded-lg text-sm")},m(f,h){N(f,e,h),p(e,n);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(n,null);p(e,r),p(e,s),p(s,i),p(i,o),l||(a=[pe(i,"keypress",t[6]),pe(i,"click",t[7])],l=!0)},p(f,h){if(h&0){u=Object.keys(Nn);let m;for(m=0;m<u.length;m+=1){const g=ph(f,u,m);c[m]?c[m].p(g,h):(c[m]=mh(g),c[m].c(),c[m].m(n,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=u.length}},d(f){f&&d(e),pn(c,f),l=!1,lt(a)}}}function ID(t){let e,n;return{c(){e=y("div"),n=B(t[3]),this.h()},l(r){e=w(r,"DIV",{class:!0});var s=b(e);n=j(s,t[3]),s.forEach(d),this.h()},h(){E(e,"class","px-12 pt-3 rounded-lg text-sm")},m(r,s){N(r,e,s),p(e,n)},p(r,s){s&8&&me(n,r[3])},d(r){r&&d(e)}}}function mh(t){let e,n=t[3]+"",r;return{c(){e=y("option"),r=B(n),this.h()},l(s){e=w(s,"OPTION",{});var i=b(e);r=j(i,n),i.forEach(d),this.h()},h(){e.__value=t[3],e.value=e.__value},m(s,i){N(s,e,i),p(e,r)},p:_e,d(s){s&&d(e)}}}function TD(t){let e,n,r,s,i,o,l,a,u,c,f;n=new gn({props:{src:t[0]}}),i=new va({props:{top:"1",name:t[1]}});function h(_,v){if(v&48&&(c=null),_[4].role!=Nn.admin)return bD;if(c==null&&(c=!!_[5].admin.includes(_[4].uid)),c)return wD}let m=h(t,-1),g=m&&m(t);return{c(){e=y("div"),x(n.$$.fragment),r=D(),s=y("div"),x(i.$$.fragment),o=D(),l=y("div"),a=B(t[3]),u=D(),g&&g.c(),this.h()},l(_){e=w(_,"DIV",{class:!0});var v=b(e);G(n.$$.fragment,v),r=A(v),s=w(v,"DIV",{class:!0});var I=b(s);G(i.$$.fragment,I),o=A(I),l=w(I,"DIV",{class:!0});var k=b(l);a=j(k,t[3]),k.forEach(d),I.forEach(d),u=A(v),g&&g.l(v),v.forEach(d),this.h()},h(){E(l,"class","pl-2 text-sm"),E(s,"class","pl-2"),E(e,"class","pt-5 flex justify-start pr-10")},m(_,v){N(_,e,v),q(n,e,null),p(e,r),p(e,s),q(i,s,null),p(s,o),p(s,l),p(l,a),p(e,u),g&&g.m(e,null),f=!0},p(_,[v]){const I={};v&1&&(I.src=_[0]),n.$set(I);const k={};v&2&&(k.name=_[1]),i.$set(k),(!f||v&8)&&me(a,_[3]),m===(m=h(_,v))&&g?g.p(_,v):(g&&g.d(1),g=m&&m(_),g&&(g.c(),g.m(e,null)))},i(_){f||($(n.$$.fragment,_),$(i.$$.fragment,_),f=!0)},o(_){C(n.$$.fragment,_),C(i.$$.fragment,_),f=!1},d(_){_&&d(e),H(n),H(i),g&&g.d()}}}function kD(t,e,n){let r,s;Ge(t,dn,f=>n(4,r=f)),Ge(t,rn,f=>n(5,s=f));let{role:i}=e,{src:o}=e,{name:l,click:a}=e;function u(f){ot.call(this,t,f)}const c=()=>a();return t.$$set=f=>{"role"in f&&n(3,i=f.role),"src"in f&&n(0,o=f.src),"name"in f&&n(1,l=f.name),"click"in f&&n(2,a=f.click)},[o,l,a,i,r,s,u,c]}class Qg extends De{constructor(e){super(),Ae(this,e,kD,TD,$e,{role:3,src:0,name:1,click:2})}}function gh(t,e,n){const r=t.slice();return r[3]=e[n],r[5]=n,r}function _h(t){let e,n,r=t[1],s=[];for(let o=0;o<r.length;o+=1)s[o]=yh(gh(t,r,o));const i=o=>C(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ee()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=Ee()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);N(o,e,l),n=!0},p(o,l){if(l&3){r=o[1];let a;for(a=0;a<r.length;a+=1){const u=gh(o,r,a);s[a]?(s[a].p(u,l),$(s[a],1)):(s[a]=yh(u),s[a].c(),$(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=r.length;a<s.length;a+=1)i(a);ze()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)$(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)C(s[l]);n=!1},d(o){pn(s,o),o&&d(e)}}}function vh(t){let e,n;return e=new Wg({props:{index:t[5],src:t[3].data.userUrl??"https://images.unsplash.com/photo-1605980776566-0486c3ac7617?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8YmxhY2slMjBwZXJzb258ZW58MHx8MHx8&w=1000&q=80",name:t[3].data.name,status:"active",title:"Give loan ✜",click:t[0],$$slots:{default:[AD]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s&2&&(i.src=r[3].data.userUrl??"https://images.unsplash.com/photo-1605980776566-0486c3ac7617?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8YmxhY2slMjBwZXJzb258ZW58MHx8MHx8&w=1000&q=80"),s&2&&(i.name=r[3].data.name),s&1&&(i.click=r[0]),s&66&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function SD(t){let e,n;return{c(){e=y("div"),n=B("Loan active"),this.h()},l(r){e=w(r,"DIV",{class:!0});var s=b(e);n=j(s,"Loan active"),s.forEach(d),this.h()},h(){E(e,"class","px-5")},m(r,s){N(r,e,s),p(e,n)},p:_e,i:_e,o:_e,d(r){r&&d(e)}}}function DD(t){let e,n;return e=new Gg({props:{data:t[3].data,c_id:t[3].customer_id}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s&2&&(i.data=r[3].data),s&2&&(i.c_id=r[3].customer_id),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function AD(t){let e,n,r,s;const i=[DD,SD],o=[];function l(a,u){return a[3].data.status!="active"?0:1}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=D()},l(a){n.l(a),r=A(a)},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,u){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}function yh(t){let e,n,r=t[3].data!=null&&vh(t);return{c(){r&&r.c(),e=Ee()},l(s){r&&r.l(s),e=Ee()},m(s,i){r&&r.m(s,i),N(s,e,i),n=!0},p(s,i){s[3].data!=null?r?(r.p(s,i),i&2&&$(r,1)):(r=vh(s),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(He(),C(r,1,1,()=>{r=null}),ze())},i(s){n||($(r),n=!0)},o(s){C(r),n=!1},d(s){r&&r.d(s),s&&d(e)}}}function $D(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g=t[2].value!=null&&_h(t);return{c(){e=y("div"),g&&g.c(),n=D(),r=y("div"),s=y("ul"),i=y("li"),o=B("1. search for customer by name"),l=D(),a=y("li"),u=B("2. Press give loan button"),c=D(),f=y("li"),h=B("3. Create Loan"),this.h()},l(_){e=w(_,"DIV",{class:!0});var v=b(e);g&&g.l(v),v.forEach(d),n=A(_),r=w(_,"DIV",{class:!0});var I=b(r);s=w(I,"UL",{class:!0});var k=b(s);i=w(k,"LI",{});var S=b(i);o=j(S,"1. search for customer by name"),S.forEach(d),l=A(k),a=w(k,"LI",{});var T=b(a);u=j(T,"2. Press give loan button"),T.forEach(d),c=A(k),f=w(k,"LI",{});var P=b(f);h=j(P,"3. Create Loan"),P.forEach(d),k.forEach(d),I.forEach(d),this.h()},h(){E(e,"class","py-5"),E(s,"class","border shadow-sm p-10 mt-5 rounded-lg w-82 "),E(r,"class","flex justify-center pt-20")},m(_,v){N(_,e,v),g&&g.m(e,null),N(_,n,v),N(_,r,v),p(r,s),p(s,i),p(i,o),p(s,l),p(s,a),p(a,u),p(s,c),p(s,f),p(f,h),m=!0},p(_,[v]){_[2].value!=null?g?(g.p(_,v),v&4&&$(g,1)):(g=_h(_),g.c(),$(g,1),g.m(e,null)):g&&(He(),C(g,1,1,()=>{g=null}),ze())},i(_){m||($(g),m=!0)},o(_){C(g),m=!1},d(_){_&&d(e),g&&g.d(),_&&d(n),_&&d(r)}}}function ND(t,e,n){let r;Ge(t,Ys,o=>n(2,r=o));let{click:s,customers:i}=e;return t.$$set=o=>{"click"in o&&n(0,s=o.click),"customers"in o&&n(1,i=o.customers)},[s,i,r]}class RD extends De{constructor(e){super(),Ae(this,e,ND,$D,$e,{click:0,customers:1})}}function CD(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I;r=new Rn({props:{title:"← Issue new loan"}});function k(R){t[7](R)}let S={placeholder:"Search for customer",keydown:OD,isText:!0,type:"text"};t[1]!==void 0&&(S.value=t[1]),l=new Zt({props:S}),fe.push(()=>he(l,"value",k)),c=new Yt({props:{click:!0,title:"GO"}});function T(R){t[9](R)}function P(R){t[10](R)}let M={click:t[8]};return t[2]!==void 0&&(M.giveLoan=t[2]),t[3]!==void 0&&(M.customers=t[3]),h=new RD({props:M}),fe.push(()=>he(h,"giveLoan",T)),fe.push(()=>he(h,"customers",P)),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),s=D(),i=y("div"),o=y("div"),x(l.$$.fragment),u=D(),x(c.$$.fragment),f=D(),x(h.$$.fragment),this.h()},l(R){e=w(R,"DIV",{class:!0});var O=b(e);n=w(O,"DIV",{style:!0});var F=b(n);G(r.$$.fragment,F),F.forEach(d),s=A(O),i=w(O,"DIV",{class:!0});var L=b(i);o=w(L,"DIV",{class:!0});var Q=b(o);G(l.$$.fragment,Q),Q.forEach(d),u=A(L),G(c.$$.fragment,L),L.forEach(d),O.forEach(d),f=A(R),G(h.$$.fragment,R),this.h()},h(){ht(n,"cursor","pointer"),E(o,"class","w-30"),E(i,"class","flex justify-start"),E(e,"class","flex justify-between")},m(R,O){N(R,e,O),p(e,n),q(r,n,null),p(e,s),p(e,i),p(i,o),q(l,o,null),p(i,u),q(c,i,null),N(R,f,O),q(h,R,O),_=!0,v||(I=[pe(n,"click",t[6]),pe(n,"keypress",t[5])],v=!0)},p(R,[O]){const F={};!a&&O&2&&(a=!0,F.value=R[1],de(()=>a=!1)),l.$set(F);const L={};O&4&&(L.click=R[8]),!m&&O&4&&(m=!0,L.giveLoan=R[2],de(()=>m=!1)),!g&&O&8&&(g=!0,L.customers=R[3],de(()=>g=!1)),h.$set(L)},i(R){_||($(r.$$.fragment,R),$(l.$$.fragment,R),$(c.$$.fragment,R),$(h.$$.fragment,R),_=!0)},o(R){C(r.$$.fragment,R),C(l.$$.fragment,R),C(c.$$.fragment,R),C(h.$$.fragment,R),_=!1},d(R){R&&d(e),H(r),H(l),H(c),R&&d(f),H(h,R),v=!1,lt(I)}}}const OD=()=>{};function PD(t,e,n){let r,s,i;Ge(t,Ys,g=>n(4,i=g));let{newLoan:o}=e,l=!1;function a(g){ot.call(this,t,g)}const u=()=>n(0,o=!1);function c(g){s=g,n(1,s)}const f=()=>n(2,l=!0);function h(g){l=g,n(2,l)}function m(g){r=g,n(3,r),n(4,i),n(1,s)}return t.$$set=g=>{"newLoan"in g&&n(0,o=g.newLoan)},t.$$.update=()=>{t.$$.dirty&18&&n(3,r=i.value.filter(g=>g.data.name.toLowerCase().includes(s.toLowerCase())))},n(1,s=""),[o,s,l,r,i,a,u,c,f,h,m]}class LD extends De{constructor(e){super(),Ae(this,e,PD,CD,$e,{newLoan:0})}}function MD(t){let e,n;return{c(){e=y("span"),n=B(t[0]),this.h()},l(r){e=w(r,"SPAN",{class:!0});var s=b(e);n=j(s,t[0]),s.forEach(d),this.h()},h(){E(e,"class","font-medium text-md text-slate-800 ")},m(r,s){N(r,e,s),p(e,n)},p(r,s){s&1&&me(n,r[0])},d(r){r&&d(e)}}}function UD(t){let e,n,r,s,i=t[3]&&wh(t);return{c(){e=y("div"),i&&i.c(),n=D(),r=y("span"),s=B(t[0]),this.h()},l(o){e=w(o,"DIV",{});var l=b(e);i&&i.l(l),n=A(l),r=w(l,"SPAN",{class:!0});var a=b(r);s=j(a,t[0]),a.forEach(d),l.forEach(d),this.h()},h(){E(r,"class","font-semibold text-xl text-slate-700")},m(o,l){N(o,e,l),i&&i.m(e,null),p(e,n),p(e,r),p(r,s)},p(o,l){o[3]?i?i.p(o,l):(i=wh(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),l&1&&me(s,o[0])},d(o){o&&d(e),i&&i.d()}}}function wh(t){let e,n;return{c(){e=y("span"),n=B(t[1]),this.h()},l(r){e=w(r,"SPAN",{class:!0});var s=b(e);n=j(s,t[1]),s.forEach(d),this.h()},h(){E(e,"class","pt-10 text-xs text-slate-800")},m(r,s){N(r,e,s),p(e,n)},p(r,s){s&2&&me(n,r[1])},d(r){r&&d(e)}}}function VD(t){let e;function n(i,o){return i[2]?UD:MD}let r=n(t),s=r(t);return{c(){s.c(),e=Ee()},l(i){s.l(i),e=Ee()},m(i,o){s.m(i,o),N(i,e,o)},p(i,[o]){r===(r=n(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},i:_e,o:_e,d(i){s.d(i),i&&d(e)}}}function FD(t,e,n){let{title:r}=e,{unit:s=""}=e,{isSub:i=!1}=e,{hasUnit:o=!1}=e;return t.$$set=l=>{"title"in l&&n(0,r=l.title),"unit"in l&&n(1,s=l.unit),"isSub"in l&&n(2,i=l.isSub),"hasUnit"in l&&n(3,o=l.hasUnit)},[r,s,i,o]}class Qn extends De{constructor(e){super(),Ae(this,e,FD,VD,$e,{title:0,unit:1,isSub:2,hasUnit:3})}}function BD(t){let e,n,r,s,i,o;return{c(){e=y("div"),n=y("div"),r=B(t[0]),s=D(),i=y("div"),o=B(t[1]),this.h()},l(l){e=w(l,"DIV",{class:!0});var a=b(e);n=w(a,"DIV",{class:!0});var u=b(n);r=j(u,t[0]),u.forEach(d),s=A(a),i=w(a,"DIV",{class:!0});var c=b(i);o=j(c,t[1]),c.forEach(d),a.forEach(d),this.h()},h(){E(n,"class","text-gray-600 w-10 mt-2 "),E(i,"class","text-gray-600 mt-2"),E(e,"class","mt-1 space-x-20 flex")},m(l,a){N(l,e,a),p(e,n),p(n,r),p(e,s),p(e,i),p(i,o)},p(l,[a]){a&1&&me(r,l[0]),a&2&&me(o,l[1])},i:_e,o:_e,d(l){l&&d(e)}}}function jD(t,e,n){let{title:r}=e,{data:s}=e;return t.$$set=i=>{"title"in i&&n(0,r=i.title),"data"in i&&n(1,s=i.data)},[r,s]}class Yn extends De{constructor(e){super(),Ae(this,e,jD,BD,$e,{title:0,data:1})}}function xD(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P,M,R,O,F,L,Q,te,re,z,K,U,Y,V,W,ue,oe,ne,ie,ce,J,we,be,ye,ve,nt,Oe,Re,st,Pe,Ce,Me,Z,Te,Je,Ke,X,ge,et,Ye,it,rt;return r=new Rn({props:{title:"← Loan Details"}}),o=new Rn({props:{title:t[1].borrower}}),h=new gn({props:{size:1,src:t[1].userUrl??"https://images.unsplash.com/photo-1597223557154-721c1cecc4b0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8aHVtYW4lMjBmYWNlfGVufDB8fDB8fA%3D%3D&w=1000&q=80"}}),_=new Qn({props:{title:"Loan Issued (current)"}}),I=new Qn({props:{hasUnit:!0,isSub:!0,unit:"UGX",title:xe(t[1].Loan,!1)}}),T=new Qn({props:{title:"To be paid(current)"}}),M=new Qn({props:{hasUnit:!0,isSub:!0,unit:"UGX",title:xe(t[1].toBePaid,!1)}}),F=new Qn({props:{title:"Balance(current)"}}),Q=new Qn({props:{hasUnit:!0,isSub:!0,unit:"UGX",title:xe(t[1].balance,!1)}}),z=new Qn({props:{title:"Last paid"}}),U=new Qn({props:{isSub:!0,title:t[1].lastpaid.length==0?"Hasn't yet paid":In(t[1].lastpaid)}}),ie=new Yn({props:{title:"Interest",data:Wi(t[1].interest,t[1].Loan)+"%"}}),J=new Yn({props:{title:"Opening_Fee",data:xe(t[1].Opening_Fee)}}),be=new Yn({props:{title:"Type",data:t[1].type}}),ve=new Yn({props:{title:"Profit",data:xe(t[1].interest)}}),Pe=new Yn({props:{title:"Loan_term",data:t[1].loan_term+" days"}}),Me=new Yn({props:{title:"Date_Issued",data:In(t[1].loan_date_iss)}}),Te=new Yn({props:{title:"Time_left",data:JSON.stringify(Qi(new Date,t[1].loan_due.toDate()))+" days"}}),Ke=new Yn({props:{title:"Security",data:t[1].collateral}}),et=new Yt({props:{title:"See Transaction History ❒"}}),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),s=D(),i=y("div"),x(o.$$.fragment),l=D(),a=y("div"),u=y("div"),c=y("div"),f=y("div"),x(h.$$.fragment),m=D(),g=y("div"),x(_.$$.fragment),v=D(),x(I.$$.fragment),k=D(),S=y("div"),x(T.$$.fragment),P=D(),x(M.$$.fragment),R=D(),O=y("div"),x(F.$$.fragment),L=D(),x(Q.$$.fragment),te=D(),re=y("div"),x(z.$$.fragment),K=D(),x(U.$$.fragment),Y=D(),V=y("div"),W=y("div"),ue=y("div"),oe=B("Details"),ne=D(),x(ie.$$.fragment),ce=D(),x(J.$$.fragment),we=D(),x(be.$$.fragment),ye=D(),x(ve.$$.fragment),nt=D(),Oe=y("div"),Re=y("div"),st=D(),x(Pe.$$.fragment),Ce=D(),x(Me.$$.fragment),Z=D(),x(Te.$$.fragment),Je=D(),x(Ke.$$.fragment),X=D(),ge=y("div"),x(et.$$.fragment),this.h()},l(ae){e=w(ae,"DIV",{class:!0});var Fe=b(e);n=w(Fe,"DIV",{style:!0});var bt=b(n);G(r.$$.fragment,bt),bt.forEach(d),s=A(Fe),i=w(Fe,"DIV",{class:!0});var Et=b(i);G(o.$$.fragment,Et),Et.forEach(d),Fe.forEach(d),l=A(ae),a=w(ae,"DIV",{class:!0});var It=b(a);u=w(It,"DIV",{class:!0});var ct=b(u);c=w(ct,"DIV",{class:!0});var Nt=b(c);f=w(Nt,"DIV",{class:!0});var Rt=b(f);G(h.$$.fragment,Rt),Rt.forEach(d),Nt.forEach(d),m=A(ct),g=w(ct,"DIV",{class:!0});var Ct=b(g);G(_.$$.fragment,Ct),v=A(Ct),G(I.$$.fragment,Ct),Ct.forEach(d),k=A(ct),S=w(ct,"DIV",{class:!0});var sn=b(S);G(T.$$.fragment,sn),P=A(sn),G(M.$$.fragment,sn),sn.forEach(d),R=A(ct),O=w(ct,"DIV",{class:!0});var bn=b(O);G(F.$$.fragment,bn),L=A(bn),G(Q.$$.fragment,bn),bn.forEach(d),te=A(ct),re=w(ct,"DIV",{class:!0});var Xt=b(re);G(z.$$.fragment,Xt),K=A(Xt),G(U.$$.fragment,Xt),Xt.forEach(d),ct.forEach(d),It.forEach(d),Y=A(ae),V=w(ae,"DIV",{class:!0});var dr=b(V);W=w(dr,"DIV",{class:!0});var on=b(W);ue=w(on,"DIV",{class:!0});var hs=b(ue);oe=j(hs,"Details"),hs.forEach(d),ne=A(on),G(ie.$$.fragment,on),ce=A(on),G(J.$$.fragment,on),we=A(on),G(be.$$.fragment,on),ye=A(on),G(ve.$$.fragment,on),on.forEach(d),nt=A(dr),Oe=w(dr,"DIV",{class:!0});var Kt=b(Oe);Re=w(Kt,"DIV",{}),b(Re).forEach(d),st=A(Kt),G(Pe.$$.fragment,Kt),Ce=A(Kt),G(Me.$$.fragment,Kt),Z=A(Kt),G(Te.$$.fragment,Kt),Je=A(Kt),G(Ke.$$.fragment,Kt),X=A(Kt),ge=w(Kt,"DIV",{class:!0});var cc=b(ge);G(et.$$.fragment,cc),cc.forEach(d),Kt.forEach(d),dr.forEach(d),this.h()},h(){ht(n,"cursor","pointer"),E(i,"class","pr-10"),E(e,"class","flex justify-between"),E(f,"class","flex justify-center"),E(c,"class","pt-1 justify-center space-y-3"),E(g,"class","space-y-5 justify-center "),E(S,"class","space-y-5 justify-center"),E(O,"class","space-y-5 justify-center"),E(re,"class","space-y-5 justify-center"),E(u,"class","flex justify-evenly border border-black-50 py-10 rounded-xl mx-10 bg-slate-50"),E(a,"class","pt-10 "),E(ue,"class","text-slate-400 text-xs font-light"),E(W,"class","pt-20"),E(ge,"class","mt-6 space-x-20 flex"),E(Oe,"class","pt-20"),E(V,"class","flex justify-evenly")},m(ae,Fe){N(ae,e,Fe),p(e,n),q(r,n,null),p(e,s),p(e,i),q(o,i,null),N(ae,l,Fe),N(ae,a,Fe),p(a,u),p(u,c),p(c,f),q(h,f,null),p(u,m),p(u,g),q(_,g,null),p(g,v),q(I,g,null),p(u,k),p(u,S),q(T,S,null),p(S,P),q(M,S,null),p(u,R),p(u,O),q(F,O,null),p(O,L),q(Q,O,null),p(u,te),p(u,re),q(z,re,null),p(re,K),q(U,re,null),N(ae,Y,Fe),N(ae,V,Fe),p(V,W),p(W,ue),p(ue,oe),p(W,ne),q(ie,W,null),p(W,ce),q(J,W,null),p(W,we),q(be,W,null),p(W,ye),q(ve,W,null),p(V,nt),p(V,Oe),p(Oe,Re),p(Oe,st),q(Pe,Oe,null),p(Oe,Ce),q(Me,Oe,null),p(Oe,Z),q(Te,Oe,null),p(Oe,Je),q(Ke,Oe,null),p(Oe,X),p(Oe,ge),q(et,ge,null),Ye=!0,it||(rt=[pe(n,"click",t[3]),pe(n,"keypress",t[2])],it=!0)},p(ae,[Fe]){const bt={};Fe&2&&(bt.title=ae[1].borrower),o.$set(bt);const Et={};Fe&2&&(Et.src=ae[1].userUrl??"https://images.unsplash.com/photo-1597223557154-721c1cecc4b0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8aHVtYW4lMjBmYWNlfGVufDB8fDB8fA%3D%3D&w=1000&q=80"),h.$set(Et);const It={};Fe&2&&(It.title=xe(ae[1].Loan,!1)),I.$set(It);const ct={};Fe&2&&(ct.title=xe(ae[1].toBePaid,!1)),M.$set(ct);const Nt={};Fe&2&&(Nt.title=xe(ae[1].balance,!1)),Q.$set(Nt);const Rt={};Fe&2&&(Rt.title=ae[1].lastpaid.length==0?"Hasn't yet paid":In(ae[1].lastpaid)),U.$set(Rt);const Ct={};Fe&2&&(Ct.data=Wi(ae[1].interest,ae[1].Loan)+"%"),ie.$set(Ct);const sn={};Fe&2&&(sn.data=xe(ae[1].Opening_Fee)),J.$set(sn);const bn={};Fe&2&&(bn.data=ae[1].type),be.$set(bn);const Xt={};Fe&2&&(Xt.data=xe(ae[1].interest)),ve.$set(Xt);const dr={};Fe&2&&(dr.data=ae[1].loan_term+" days"),Pe.$set(dr);const on={};Fe&2&&(on.data=In(ae[1].loan_date_iss)),Me.$set(on);const hs={};Fe&2&&(hs.data=JSON.stringify(Qi(new Date,ae[1].loan_due.toDate()))+" days"),Te.$set(hs);const Kt={};Fe&2&&(Kt.data=ae[1].collateral),Ke.$set(Kt)},i(ae){Ye||($(r.$$.fragment,ae),$(o.$$.fragment,ae),$(h.$$.fragment,ae),$(_.$$.fragment,ae),$(I.$$.fragment,ae),$(T.$$.fragment,ae),$(M.$$.fragment,ae),$(F.$$.fragment,ae),$(Q.$$.fragment,ae),$(z.$$.fragment,ae),$(U.$$.fragment,ae),$(ie.$$.fragment,ae),$(J.$$.fragment,ae),$(be.$$.fragment,ae),$(ve.$$.fragment,ae),$(Pe.$$.fragment,ae),$(Me.$$.fragment,ae),$(Te.$$.fragment,ae),$(Ke.$$.fragment,ae),$(et.$$.fragment,ae),Ye=!0)},o(ae){C(r.$$.fragment,ae),C(o.$$.fragment,ae),C(h.$$.fragment,ae),C(_.$$.fragment,ae),C(I.$$.fragment,ae),C(T.$$.fragment,ae),C(M.$$.fragment,ae),C(F.$$.fragment,ae),C(Q.$$.fragment,ae),C(z.$$.fragment,ae),C(U.$$.fragment,ae),C(ie.$$.fragment,ae),C(J.$$.fragment,ae),C(be.$$.fragment,ae),C(ve.$$.fragment,ae),C(Pe.$$.fragment,ae),C(Me.$$.fragment,ae),C(Te.$$.fragment,ae),C(Ke.$$.fragment,ae),C(et.$$.fragment,ae),Ye=!1},d(ae){ae&&d(e),H(r),H(o),ae&&d(l),ae&&d(a),H(h),H(_),H(I),H(T),H(M),H(F),H(Q),H(z),H(U),ae&&d(Y),ae&&d(V),H(ie),H(J),H(be),H(ve),H(Pe),H(Me),H(Te),H(Ke),H(et),it=!1,lt(rt)}}}function qD(t,e,n){let{isDetail:r,loanData:s}=e;function i(l){ot.call(this,t,l)}const o=()=>n(0,r=!1);return t.$$set=l=>{"isDetail"in l&&n(0,r=l.isDetail),"loanData"in l&&n(1,s=l.loanData)},[r,s,i,o]}class Yg extends De{constructor(e){super(),Ae(this,e,qD,xD,$e,{isDetail:0,loanData:1})}}function HD(t){let e,n=t[1]+1+"",r,s,i,o,l=t[0].borrower+"",a,u,c,f=xe(t[0].Loan)+"",h,m,g,_=Wi(t[0].interest,t[0].Loan)+"",v,I,k,S,T=xe(t[0].toBePaid)+"",P,M,R,O=xe(t[0].interest)+"",F,L,Q,te=xe(t[0].balance)+"",re,z,K,U=In(t[0].loan_date_iss)+"",Y;return{c(){e=y("td"),r=B(n),s=B("."),i=D(),o=y("td"),a=B(l),u=D(),c=y("td"),h=B(f),m=D(),g=y("td"),v=B(_),I=B("%"),k=D(),S=y("td"),P=B(T),M=D(),R=y("td"),F=B(O),L=D(),Q=y("td"),re=B(te),z=D(),K=y("td"),Y=B(U),this.h()},l(V){e=w(V,"TD",{class:!0});var W=b(e);r=j(W,n),s=j(W,"."),W.forEach(d),i=A(V),o=w(V,"TD",{class:!0});var ue=b(o);a=j(ue,l),ue.forEach(d),u=A(V),c=w(V,"TD",{class:!0});var oe=b(c);h=j(oe,f),oe.forEach(d),m=A(V),g=w(V,"TD",{class:!0});var ne=b(g);v=j(ne,_),I=j(ne,"%"),ne.forEach(d),k=A(V),S=w(V,"TD",{class:!0});var ie=b(S);P=j(ie,T),ie.forEach(d),M=A(V),R=w(V,"TD",{class:!0});var ce=b(R);F=j(ce,O),ce.forEach(d),L=A(V),Q=w(V,"TD",{class:!0});var J=b(Q);re=j(J,te),J.forEach(d),z=A(V),K=w(V,"TD",{class:!0});var we=b(K);Y=j(we,U),we.forEach(d),this.h()},h(){E(e,"class","px-6 py-2 text-sm font-medium text-gray-900 whitespace-nowrap"),E(o,"class","px-6 py-2 text-sm font-medium text-gray-900 whitespace-nowrap"),E(c,"class","px-6 py-2 text-sm font-medium text-gray-900 whitespace-nowrap"),E(g,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(S,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(R,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(Q,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(K,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap")},m(V,W){N(V,e,W),p(e,r),p(e,s),N(V,i,W),N(V,o,W),p(o,a),N(V,u,W),N(V,c,W),p(c,h),N(V,m,W),N(V,g,W),p(g,v),p(g,I),N(V,k,W),N(V,S,W),p(S,P),N(V,M,W),N(V,R,W),p(R,F),N(V,L,W),N(V,Q,W),p(Q,re),N(V,z,W),N(V,K,W),p(K,Y)},p(V,[W]){W&2&&n!==(n=V[1]+1+"")&&me(r,n),W&1&&l!==(l=V[0].borrower+"")&&me(a,l),W&1&&f!==(f=xe(V[0].Loan)+"")&&me(h,f),W&1&&_!==(_=Wi(V[0].interest,V[0].Loan)+"")&&me(v,_),W&1&&T!==(T=xe(V[0].toBePaid)+"")&&me(P,T),W&1&&O!==(O=xe(V[0].interest)+"")&&me(F,O),W&1&&te!==(te=xe(V[0].balance)+"")&&me(re,te),W&1&&U!==(U=In(V[0].loan_date_iss)+"")&&me(Y,U)},i:_e,o:_e,d(V){V&&d(e),V&&d(i),V&&d(o),V&&d(u),V&&d(c),V&&d(m),V&&d(g),V&&d(k),V&&d(S),V&&d(M),V&&d(R),V&&d(L),V&&d(Q),V&&d(z),V&&d(K)}}}function zD(t,e,n){let{loan:r,index:s}=e;return t.$$set=i=>{"loan"in i&&n(0,r=i.loan),"index"in i&&n(1,s=i.index)},[r,s]}class KD extends De{constructor(e){super(),Ae(this,e,zD,HD,$e,{loan:0,index:1})}}function bh(t,e,n){const r=t.slice();return r[12]=e[n],r[14]=n,r}function Eh(t){let e,n,r=t[3],s=[];for(let o=0;o<r.length;o+=1)s[o]=Ih(bh(t,r,o));const i=o=>C(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ee()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=Ee()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);N(o,e,l),n=!0},p(o,l){if(l&14){r=o[3];let a;for(a=0;a<r.length;a+=1){const u=bh(o,r,a);s[a]?(s[a].p(u,l),$(s[a],1)):(s[a]=Ih(u),s[a].c(),$(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=r.length;a<s.length;a+=1)i(a);ze()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)$(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)C(s[l]);n=!1},d(o){pn(s,o),o&&d(e)}}}function Ih(t){let e,n,r,s,i,o,l,a,u;s=new KD({props:{loan:t[12].data,index:t[14]}});function c(){return t[11](t[12])}return{c(){e=y("div"),n=D(),r=y("tr"),x(s.$$.fragment),i=D(),this.h()},l(f){e=w(f,"DIV",{class:!0}),b(e).forEach(d),n=A(f),r=w(f,"TR",{style:!0,class:!0});var h=b(r);G(s.$$.fragment,h),i=A(h),h.forEach(d),this.h()},h(){E(e,"class","mt-2"),ht(r,"cursor","pointer"),E(r,"class",o=t[12].data.status!="undefined"&&t[12].data.status!="complete"?"bg-slate-50 space-y-4":"bg-green-100 space-y-4")},m(f,h){N(f,e,h),N(f,n,h),N(f,r,h),q(s,r,null),p(r,i),l=!0,a||(u=pe(r,"click",c),a=!0)},p(f,h){t=f;const m={};h&8&&(m.loan=t[12].data),s.$set(m),(!l||h&8&&o!==(o=t[12].data.status!="undefined"&&t[12].data.status!="complete"?"bg-slate-50 space-y-4":"bg-green-100 space-y-4"))&&E(r,"class",o)},i(f){l||($(s.$$.fragment,f),l=!0)},o(f){C(s.$$.fragment,f),l=!1},d(f){f&&d(e),f&&d(n),f&&d(r),H(s),a=!1,u()}}}function GD(t){let e,n,r,s,i=t[5].value!=null&&Eh(t);return{c(){e=y("div"),n=D(),i&&i.c(),r=Ee(),this.h()},l(o){e=w(o,"DIV",{class:!0}),b(e).forEach(d),n=A(o),i&&i.l(o),r=Ee(),this.h()},h(){E(e,"class","hover:text-lg my-3")},m(o,l){N(o,e,l),N(o,n,l),i&&i.m(o,l),N(o,r,l),s=!0},p(o,l){o[5].value!=null?i?(i.p(o,l),l&32&&$(i,1)):(i=Eh(o),i.c(),$(i,1),i.m(r.parentNode,r)):i&&(He(),C(i,1,1,()=>{i=null}),ze())},i(o){s||($(i),s=!0)},o(o){C(i),s=!1},d(o){o&&d(e),o&&d(n),i&&i.d(o),o&&d(r)}}}function WD(t){let e,n,r,s=xe(t[7])+"",i,o,l,a,u=xe(t[6])+"",c,f,h,m,g,_,v,I,k,S,T,P,M,R,O,F,L,Q,te;m=new Rn({props:{title:"Loans Issued 🤝"}});function re(K){t[9](K)}let z={placeholder:"Search for customer",keydown:QD,isText:!0,type:"text"};return t[4]!==void 0&&(z.value=t[4]),I=new Zt({props:z}),fe.push(()=>he(I,"value",re)),T=new Yt({props:{click:!0,title:"GO"}}),M=new Yt({props:{click:t[10],title:"Issue new loan ✜"}}),Q=new Ul({props:{headers:["","Borrower","Loan","interest%","To be paid","Profit","Balance","Date"],$$slots:{default:[GD]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("span"),r=B("MoneyIn:"),i=B(s),o=D(),l=y("span"),a=B("MoneyOut:"),c=B(u),f=D(),h=y("div"),x(m.$$.fragment),g=D(),_=y("div"),v=y("div"),x(I.$$.fragment),S=D(),x(T.$$.fragment),P=D(),x(M.$$.fragment),R=D(),O=y("div"),F=D(),L=y("div"),x(Q.$$.fragment),this.h()},l(K){e=w(K,"DIV",{class:!0});var U=b(e);n=w(U,"SPAN",{class:!0});var Y=b(n);r=j(Y,"MoneyIn:"),i=j(Y,s),Y.forEach(d),o=A(U),l=w(U,"SPAN",{class:!0});var V=b(l);a=j(V,"MoneyOut:"),c=j(V,u),V.forEach(d),U.forEach(d),f=A(K),h=w(K,"DIV",{class:!0});var W=b(h);G(m.$$.fragment,W),g=A(W),_=w(W,"DIV",{class:!0});var ue=b(_);v=w(ue,"DIV",{class:!0});var oe=b(v);G(I.$$.fragment,oe),oe.forEach(d),S=A(ue),G(T.$$.fragment,ue),ue.forEach(d),P=A(W),G(M.$$.fragment,W),W.forEach(d),R=A(K),O=w(K,"DIV",{class:!0}),b(O).forEach(d),F=A(K),L=w(K,"DIV",{});var ne=b(L);G(Q.$$.fragment,ne),ne.forEach(d),this.h()},h(){E(n,"class","px-3 border "),E(l,"class","px-3 border "),E(e,"class","text-sm pb-5 flex justify-end space-x-2"),E(v,"class","w-30"),E(_,"class","flex justify-start"),E(h,"class","flex justify-between"),E(O,"class","pt-5")},m(K,U){N(K,e,U),p(e,n),p(n,r),p(n,i),p(e,o),p(e,l),p(l,a),p(l,c),N(K,f,U),N(K,h,U),q(m,h,null),p(h,g),p(h,_),p(_,v),q(I,v,null),p(_,S),q(T,_,null),p(h,P),q(M,h,null),N(K,R,U),N(K,O,U),N(K,F,U),N(K,L,U),q(Q,L,null),te=!0},p(K,[U]){(!te||U&128)&&s!==(s=xe(K[7])+"")&&me(i,s),(!te||U&64)&&u!==(u=xe(K[6])+"")&&me(c,u);const Y={};!k&&U&16&&(k=!0,Y.value=K[4],de(()=>k=!1)),I.$set(Y);const V={};U&1&&(V.click=K[10]),M.$set(V);const W={};U&32814&&(W.$$scope={dirty:U,ctx:K}),Q.$set(W)},i(K){te||($(m.$$.fragment,K),$(I.$$.fragment,K),$(T.$$.fragment,K),$(M.$$.fragment,K),$(Q.$$.fragment,K),te=!0)},o(K){C(m.$$.fragment,K),C(I.$$.fragment,K),C(T.$$.fragment,K),C(M.$$.fragment,K),C(Q.$$.fragment,K),te=!1},d(K){K&&d(e),K&&d(f),K&&d(h),H(m),H(I),H(T),H(M),K&&d(R),K&&d(O),K&&d(F),K&&d(L),H(Q)}}}const QD=()=>{};function YD(t,e,n){let r,s,i,o,l,a;Ge(t,So,_=>n(5,a=_));let{newLoan:u,isDetail:c,loanData:f}=e;function h(_){i=_,n(4,i)}const m=()=>n(0,u=!0),g=_=>(n(1,c=!0),n(2,f=_.data));return t.$$set=_=>{"newLoan"in _&&n(0,u=_.newLoan),"isDetail"in _&&n(1,c=_.isDetail),"loanData"in _&&n(2,f=_.loanData)},t.$$.update=()=>{t.$$.dirty&32&&n(8,r=a.value!=null?a.value.sort((_,v)=>v.data.loan_date_iss-_.data.loan_date_iss):[]),t.$$.dirty&272&&n(3,s=r.filter(_=>_.data.borrower.toLowerCase().includes(i.toLowerCase()))),t.$$.dirty&8&&n(7,o=s.reduce((_,{data:v})=>_+v.balance,0)),t.$$.dirty&8&&n(6,l=s.reduce((_,{data:v})=>_+v.Loan,0))},n(4,i=""),[u,c,f,s,i,a,l,o,r,h,m,g]}class XD extends De{constructor(e){super(),Ae(this,e,YD,WD,$e,{newLoan:0,isDetail:1,loanData:2})}}function JD(t){let e,n,r,s,i;function o(c){t[6](c)}function l(c){t[7](c)}function a(c){t[8](c)}let u={};return t[1]!==void 0&&(u.newLoan=t[1]),t[0]!==void 0&&(u.isDetail=t[0]),t[2]!==void 0&&(u.loanData=t[2]),e=new XD({props:u}),fe.push(()=>he(e,"newLoan",o)),fe.push(()=>he(e,"isDetail",l)),fe.push(()=>he(e,"loanData",a)),{c(){x(e.$$.fragment)},l(c){G(e.$$.fragment,c)},m(c,f){q(e,c,f),i=!0},p(c,f){const h={};!n&&f&2&&(n=!0,h.newLoan=c[1],de(()=>n=!1)),!r&&f&1&&(r=!0,h.isDetail=c[0],de(()=>r=!1)),!s&&f&4&&(s=!0,h.loanData=c[2],de(()=>s=!1)),e.$set(h)},i(c){i||($(e.$$.fragment,c),i=!0)},o(c){C(e.$$.fragment,c),i=!1},d(c){H(e,c)}}}function ZD(t){let e,n,r;function s(o){t[5](o)}let i={};return t[1]!==void 0&&(i.newLoan=t[1]),e=new LD({props:i}),fe.push(()=>he(e,"newLoan",s)),{c(){x(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,l){q(e,o,l),r=!0},p(o,l){const a={};!n&&l&2&&(n=!0,a.newLoan=o[1],de(()=>n=!1)),e.$set(a)},i(o){r||($(e.$$.fragment,o),r=!0)},o(o){C(e.$$.fragment,o),r=!1},d(o){H(e,o)}}}function eA(t){let e,n,r,s;function i(a){t[3](a)}function o(a){t[4](a)}let l={};return t[0]!==void 0&&(l.isDetail=t[0]),t[2]!==void 0&&(l.loanData=t[2]),e=new Yg({props:l}),fe.push(()=>he(e,"isDetail",i)),fe.push(()=>he(e,"loanData",o)),{c(){x(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,u){q(e,a,u),s=!0},p(a,u){const c={};!n&&u&1&&(n=!0,c.isDetail=a[0],de(()=>n=!1)),!r&&u&4&&(r=!0,c.loanData=a[2],de(()=>r=!1)),e.$set(c)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){C(e.$$.fragment,a),s=!1},d(a){H(e,a)}}}function tA(t){let e,n,r,s;const i=[eA,ZD,JD],o=[];function l(a,u){return a[0]?0:a[1]?1:2}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ee()},l(a){n.l(a),r=Ee()},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,[u]){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}function nA(t,e,n){let r=!1,s=!1,i;function o(h){r=h,n(0,r)}function l(h){i=h,n(2,i)}function a(h){s=h,n(1,s)}function u(h){s=h,n(1,s)}function c(h){r=h,n(0,r)}function f(h){i=h,n(2,i)}return[r,s,i,o,l,a,u,c,f]}class rA extends De{constructor(e){super(),Ae(this,e,nA,tA,$e,{})}}const sA=(t,e)=>zn(wn,"business",t,"receipt",e),Xg=t=>gm(wn,"business",t,"receipt"),Th=(t,e)=>zn(wn,"business",t,"loans",e),iA=(t,e)=>zn(wn,"business",t,"customers",e);async function oA(t,e,n,r){let s=Ao();console.log(t,s,e),e.receiptId=s;try{await aa(sA(t,s),e),n<=0?(await $s(iA(t,r.customerId),{status:"inactive",paid:r.Loan}),await $s(Th(t,r.loanId),{balance:n,lastpaid:new Date,status:"complete"}),tn("s","Loan Payment Complete")):(await $s(Th(t,r.loanId),{balance:n,lastpaid:new Date}),tn("s","Receipt Saved"))}catch(i){console.log(i),tn("d","Error Occured Try again")}}async function Jg(t){const e=[go("last_paid",">=",new Date(A_().today)),go("last_paid","<=",new Date(Jh(new Date)))];await yS(Vu(Xg(t),...e),t,Ll)}async function aA(t,e,n){const r=[go("last_paid",">=",new Date(e)),go("last_paid","<=",new Date(Jh(n)))];await wS(Vu(Xg(t),...r),t,Ll)}function lA(t){let e,n,r,s,i=t[0].borrower+"",o,l,a,u,c,f=xe(t[2])+"",h,m,g,_,v,I,k=new Date().toDateString()+"",S,T;return r=new yt({props:{title:"Customer Name"}}),u=new yt({props:{title:"Amount Paid"}}),_=new yt({props:{title:"Payment date"}}),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),s=D(),o=B(i),l=D(),a=y("div"),x(u.$$.fragment),c=D(),h=B(f),m=D(),g=y("div"),x(_.$$.fragment),v=D(),I=y("div"),S=B(k),this.h()},l(P){e=w(P,"DIV",{class:!0});var M=b(e);n=w(M,"DIV",{});var R=b(n);G(r.$$.fragment,R),s=A(R),o=j(R,i),R.forEach(d),l=A(M),a=w(M,"DIV",{});var O=b(a);G(u.$$.fragment,O),c=A(O),h=j(O,f),O.forEach(d),m=A(M),g=w(M,"DIV",{});var F=b(g);G(_.$$.fragment,F),v=A(F),I=w(F,"DIV",{class:!0});var L=b(I);S=j(L,k),L.forEach(d),F.forEach(d),M.forEach(d),this.h()},h(){E(I,"class",""),E(e,"class","space-y-3")},m(P,M){N(P,e,M),p(e,n),q(r,n,null),p(n,s),p(n,o),p(e,l),p(e,a),q(u,a,null),p(a,c),p(a,h),p(e,m),p(e,g),q(_,g,null),p(g,v),p(g,I),p(I,S),T=!0},p(P,M){(!T||M&1)&&i!==(i=P[0].borrower+"")&&me(o,i),(!T||M&4)&&f!==(f=xe(P[2])+"")&&me(h,f)},i(P){T||($(r.$$.fragment,P),$(u.$$.fragment,P),$(_.$$.fragment,P),T=!0)},o(P){C(r.$$.fragment,P),C(u.$$.fragment,P),C(_.$$.fragment,P),T=!1},d(P){P&&d(e),H(r),H(u),H(_)}}}function uA(t){let e,n,r,s=t[0].borrower+"",i,o,l,a,u,c,f,h;n=new yt({props:{title:"Customer Name"}}),a=new yt({props:{title:"How much is the customer paying?"}});function m(_){t[8](_)}let g={type:"number",label:"Amount",isText:!1};return t[2]!==void 0&&(g.value=t[2]),c=new Pt({props:g}),fe.push(()=>he(c,"value",m)),{c(){e=y("div"),x(n.$$.fragment),r=D(),i=B(s),o=D(),l=y("div"),x(a.$$.fragment),u=D(),x(c.$$.fragment),this.h()},l(_){e=w(_,"DIV",{class:!0});var v=b(e);G(n.$$.fragment,v),r=A(v),i=j(v,s),v.forEach(d),o=A(_),l=w(_,"DIV",{});var I=b(l);G(a.$$.fragment,I),u=A(I),G(c.$$.fragment,I),I.forEach(d),this.h()},h(){E(e,"class","")},m(_,v){N(_,e,v),q(n,e,null),p(e,r),p(e,i),N(_,o,v),N(_,l,v),q(a,l,null),p(l,u),q(c,l,null),h=!0},p(_,v){(!h||v&1)&&s!==(s=_[0].borrower+"")&&me(i,s);const I={};!f&&v&4&&(f=!0,I.value=_[2],de(()=>f=!1)),c.$set(I)},i(_){h||($(n.$$.fragment,_),$(a.$$.fragment,_),$(c.$$.fragment,_),h=!0)},o(_){C(n.$$.fragment,_),C(a.$$.fragment,_),C(c.$$.fragment,_),h=!1},d(_){_&&d(e),H(n),_&&d(o),_&&d(l),H(a),H(c)}}}function cA(t){let e,n,r,s;const i=[uA,lA],o=[];function l(a,u){return a[4]==1?0:1}return n=l(t),r=o[n]=i[n](t),{c(){e=y("div"),r.c(),this.h()},l(a){e=w(a,"DIV",{class:!0});var u=b(e);r.l(u),u.forEach(d),this.h()},h(){E(e,"class","space-y-5")},m(a,u){N(a,e,u),o[n].m(e,null),s=!0},p(a,u){let c=n;n=l(a),n===c?o[n].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),r=o[n],r?r.p(a,u):(r=o[n]=i[n](a),r.c()),$(r,1),r.m(e,null))},i(a){s||($(r),s=!0)},o(a){C(r),s=!1},d(a){a&&d(e),o[n].d()}}}function fA(t){let e,n;return e=new Xs({props:{createTitle:"Save receipt",title:"Add receipt ✜",modalTitle:"New Receipt pg."+t[4],nextButton:t[4]<2,nextFunc:t[9],close:t[10],action:t[11],$$slots:{default:[cA]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,[s]){const i={};s&16&&(i.modalTitle="New Receipt pg."+r[4]),s&16&&(i.nextButton=r[4]<2),s&16&&(i.close=r[10]),s&47&&(i.action=r[11]),s&8213&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}let hA=0;function dA(t,e,n){let r,s,i,o;Ge(t,rn,_=>n(5,o=_));function l(){n(4,r++,r),n(4,r=r<=4?r:1)}let a=0,{loanData:u,customerId:c}=e;function f(_){a=_,n(2,a)}const h=()=>l(),m=()=>n(4,r=1),g=()=>{oA(o.BusinessId,{borrowerId:c,borrower:u.borrower,amount:a,balance:i,days_left:JSON.stringify(Qi(new Date,u.loan_due.toDate())),last_paid:new Date},i,u)};return t.$$set=_=>{"loanData"in _&&n(0,u=_.loanData),"customerId"in _&&n(1,c=_.customerId)},t.$$.update=()=>{t.$$.dirty&4&&n(7,s=a*hA/100),t.$$.dirty&132,t.$$.dirty&5&&n(3,i=u.balance-a)},n(4,r=1),[u,c,a,i,r,o,l,s,f,h,m,g]}class pA extends De{constructor(e){super(),Ae(this,e,dA,fA,$e,{loanData:0,customerId:1})}}function kh(t,e,n){const r=t.slice();return r[2]=e[n],r[4]=n,r}function Sh(t){let e,n,r=t[1].value,s=[];for(let o=0;o<r.length;o+=1)s[o]=Ah(kh(t,r,o));const i=o=>C(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ee()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=Ee()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);N(o,e,l),n=!0},p(o,l){if(l&3){r=o[1].value;let a;for(a=0;a<r.length;a+=1){const u=kh(o,r,a);s[a]?(s[a].p(u,l),$(s[a],1)):(s[a]=Ah(u),s[a].c(),$(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=r.length;a<s.length;a+=1)i(a);ze()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)$(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)C(s[l]);n=!1},d(o){pn(s,o),o&&d(e)}}}function Dh(t){let e,n;return e=new Wg({props:{src:"https://images.unsplash.com/photo-1605980776566-0486c3ac7617?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8YmxhY2slMjBwZXJzb258ZW58MHx8MHx8&w=1000&q=80",name:t[2].data.borrower,status:"active",index:t[4],click:t[0],$$slots:{default:[mA]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s&2&&(i.name=r[2].data.borrower),s&1&&(i.click=r[0]),s&34&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function mA(t){let e,n,r;return e=new pA({props:{loanData:t[2].data,customerId:t[2].customer_id}}),{c(){x(e.$$.fragment),n=D()},l(s){G(e.$$.fragment,s),n=A(s)},m(s,i){q(e,s,i),N(s,n,i),r=!0},p(s,i){const o={};i&2&&(o.loanData=s[2].data),i&2&&(o.customerId=s[2].customer_id),e.$set(o)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){C(e.$$.fragment,s),r=!1},d(s){H(e,s),s&&d(n)}}}function Ah(t){let e,n,r=t[2].data.balance>0&&Dh(t);return{c(){r&&r.c(),e=Ee()},l(s){r&&r.l(s),e=Ee()},m(s,i){r&&r.m(s,i),N(s,e,i),n=!0},p(s,i){s[2].data.balance>0?r?(r.p(s,i),i&2&&$(r,1)):(r=Dh(s),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(He(),C(r,1,1,()=>{r=null}),ze())},i(s){n||($(r),n=!0)},o(s){C(r),n=!1},d(s){r&&r.d(s),s&&d(e)}}}function gA(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g=t[1].value!=null&&Sh(t);return{c(){e=y("div"),g&&g.c(),n=D(),r=y("div"),s=y("ul"),i=y("li"),o=B("1. search for customer by name"),l=D(),a=y("li"),u=B("2. Press give loan button"),c=D(),f=y("li"),h=B("3. Create Item"),this.h()},l(_){e=w(_,"DIV",{class:!0});var v=b(e);g&&g.l(v),v.forEach(d),n=A(_),r=w(_,"DIV",{class:!0});var I=b(r);s=w(I,"UL",{class:!0});var k=b(s);i=w(k,"LI",{});var S=b(i);o=j(S,"1. search for customer by name"),S.forEach(d),l=A(k),a=w(k,"LI",{});var T=b(a);u=j(T,"2. Press give loan button"),T.forEach(d),c=A(k),f=w(k,"LI",{});var P=b(f);h=j(P,"3. Create Item"),P.forEach(d),k.forEach(d),I.forEach(d),this.h()},h(){E(e,"class","py-5"),E(s,"class","border shadow-sm p-10 mt-5 rounded-lg w-82 "),E(r,"class","flex justify-center pt-20")},m(_,v){N(_,e,v),g&&g.m(e,null),N(_,n,v),N(_,r,v),p(r,s),p(s,i),p(i,o),p(s,l),p(s,a),p(a,u),p(s,c),p(s,f),p(f,h),m=!0},p(_,[v]){_[1].value!=null?g?(g.p(_,v),v&2&&$(g,1)):(g=Sh(_),g.c(),$(g,1),g.m(e,null)):g&&(He(),C(g,1,1,()=>{g=null}),ze())},i(_){m||($(g),m=!0)},o(_){C(g),m=!1},d(_){_&&d(e),g&&g.d(),_&&d(n),_&&d(r)}}}function _A(t,e,n){let r;Ge(t,So,i=>n(1,r=i));let{click:s}=e;return t.$$set=i=>{"click"in i&&n(0,s=i.click)},[s,r]}class vA extends De{constructor(e){super(),Ae(this,e,_A,gA,$e,{click:0})}}function yA(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I;return s=new Rn({props:{title:"← New Receipt"}}),a=new Zt({props:{placeholder:"Search for customer",keydown:wA,isText:!0,type:"text"}}),c=new Yt({props:{click:!0,title:"GO"}}),g=new vA({}),{c(){e=y("div"),n=y("div"),r=y("div"),x(s.$$.fragment),i=D(),o=y("div"),l=y("div"),x(a.$$.fragment),u=D(),x(c.$$.fragment),f=D(),h=y("div"),m=D(),x(g.$$.fragment),this.h()},l(k){e=w(k,"DIV",{class:!0});var S=b(e);n=w(S,"DIV",{class:!0});var T=b(n);r=w(T,"DIV",{style:!0});var P=b(r);G(s.$$.fragment,P),P.forEach(d),T.forEach(d),i=A(S),o=w(S,"DIV",{class:!0});var M=b(o);l=w(M,"DIV",{class:!0});var R=b(l);G(a.$$.fragment,R),R.forEach(d),u=A(M),G(c.$$.fragment,M),M.forEach(d),S.forEach(d),f=A(k),h=w(k,"DIV",{class:!0}),b(h).forEach(d),m=A(k),G(g.$$.fragment,k),this.h()},h(){ht(r,"cursor","pointer"),E(n,"class","flex justify"),E(l,"class","w-30"),E(o,"class","flex justify-start"),E(e,"class","flex justify-between"),E(h,"class","pt-5")},m(k,S){N(k,e,S),p(e,n),p(n,r),q(s,r,null),p(e,i),p(e,o),p(o,l),q(a,l,null),p(o,u),q(c,o,null),N(k,f,S),N(k,h,S),N(k,m,S),q(g,k,S),_=!0,v||(I=[pe(r,"keypress",t[1]),pe(r,"click",t[2])],v=!0)},p:_e,i(k){_||($(s.$$.fragment,k),$(a.$$.fragment,k),$(c.$$.fragment,k),$(g.$$.fragment,k),_=!0)},o(k){C(s.$$.fragment,k),C(a.$$.fragment,k),C(c.$$.fragment,k),C(g.$$.fragment,k),_=!1},d(k){k&&d(e),H(s),H(a),H(c),k&&d(f),k&&d(h),k&&d(m),H(g,k),v=!1,lt(I)}}}const wA=()=>{};function bA(t,e,n){let{addReceipt:r}=e;function s(o){ot.call(this,t,o)}const i=()=>n(0,r=!1);return t.$$set=o=>{"addReceipt"in o&&n(0,r=o.addReceipt)},[r,s,i]}class EA extends De{constructor(e){super(),Ae(this,e,bA,yA,$e,{addReceipt:0})}}function IA(t){let e,n,r,s,i,o,l,a;function u(h,m){return h[2]!=null&&h[2]!=""?SA:kA}let c=u(t),f=c(t);return{c(){e=y("div"),n=y("label"),r=B("From"),s=D(),i=y("input"),o=D(),f.c(),this.h()},l(h){e=w(h,"DIV",{class:!0});var m=b(e);n=w(m,"LABEL",{for:!0,class:!0});var g=b(n);r=j(g,"From"),g.forEach(d),s=A(m),i=w(m,"INPUT",{class:!0,max:!0,type:!0}),o=A(m),f.l(m),m.forEach(d),this.h()},h(){E(n,"for","from"),E(n,"class","text-sm"),E(i,"class","text-sm border"),E(i,"max",new Date().toISOString().split("T")[0]),E(i,"type","date"),E(e,"class","space-x-2")},m(h,m){N(h,e,m),p(e,n),p(n,r),p(e,s),p(e,i),nn(i,t[2]),p(e,o),f.m(e,null),l||(a=pe(i,"input",t[5]),l=!0)},p(h,m){m&4&&nn(i,h[2]),c===(c=u(h))&&f?f.p(h,m):(f.d(1),f=c(h),f&&(f.c(),f.m(e,null)))},i:_e,o:_e,d(h){h&&d(e),f.d(),l=!1,a()}}}function TA(t){let e,n,r,s;function i(l){t[4](l)}let o={placeholder:"Live Search for customer",keydown:AA,isText:!0,type:"text"};return t[0]!==void 0&&(o.value=t[0]),n=new Zt({props:o}),fe.push(()=>he(n,"value",i)),{c(){e=y("div"),x(n.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var a=b(e);G(n.$$.fragment,a),a.forEach(d),this.h()},h(){E(e,"class","w-30")},m(l,a){N(l,e,a),q(n,e,null),s=!0},p(l,a){const u={};!r&&a&1&&(r=!0,u.value=l[0],de(()=>r=!1)),n.$set(u)},i(l){s||($(n.$$.fragment,l),s=!0)},o(l){C(n.$$.fragment,l),s=!1},d(l){l&&d(e),H(n)}}}function kA(t){let e;return{c(){e=y("input"),this.h()},l(n){e=w(n,"INPUT",{class:!0,type:!0}),this.h()},h(){e.disabled=!0,E(e,"class","text-sm text-slate-300"),E(e,"type","date")},m(n,r){N(n,e,r)},p:_e,d(n){n&&d(e)}}}function SA(t){let e,n,r,s,i,o;return{c(){e=y("label"),n=B("To"),r=D(),s=y("input"),this.h()},l(l){e=w(l,"LABEL",{for:!0,class:!0});var a=b(e);n=j(a,"To"),a.forEach(d),r=A(l),s=w(l,"INPUT",{class:!0,min:!0,max:!0,type:!0}),this.h()},h(){E(e,"for","To"),E(e,"class","text-sm"),E(s,"class","text-sm border"),E(s,"min",t[2]),E(s,"max",new Date().toISOString().split("T")[0]),E(s,"type","date")},m(l,a){N(l,e,a),p(e,n),N(l,r,a),N(l,s,a),nn(s,t[1]),i||(o=pe(s,"input",t[6]),i=!0)},p(l,a){a&4&&E(s,"min",l[2]),a&2&&nn(s,l[1])},d(l){l&&d(e),l&&d(r),l&&d(s),i=!1,o()}}}function DA(t){let e,n,r,s;const i=[TA,IA],o=[];function l(a,u){return a[3]=="name"?0:1}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ee()},l(a){n.l(a),r=Ee()},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,[u]){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}const AA=()=>{};function $A(t,e,n){let{search:r,searchBy:s}=e,{toDate:i="",fromDate:o=""}=e;function l(c){r=c,n(0,r)}function a(){o=this.value,n(2,o)}function u(){i=this.value,n(1,i)}return t.$$set=c=>{"search"in c&&n(0,r=c.search),"searchBy"in c&&n(3,s=c.searchBy),"toDate"in c&&n(1,i=c.toDate),"fromDate"in c&&n(2,o=c.fromDate)},[r,i,o,s,l,a,u]}class NA extends De{constructor(e){super(),Ae(this,e,$A,DA,$e,{search:0,searchBy:3,toDate:1,fromDate:2})}}function RA(t){let e,n,r,s;return{c(){e=y("span"),n=B("Search by Date"),this.h()},l(i){e=w(i,"SPAN",{class:!0});var o=b(e);n=j(o,"Search by Date"),o.forEach(d),this.h()},h(){E(e,"class","border rounded px-4 py-1 font-bold shadow-md")},m(i,o){N(i,e,o),p(e,n),r||(s=[pe(e,"keypress",t[2]),pe(e,"click",t[4])],r=!0)},p:_e,d(i){i&&d(e),r=!1,lt(s)}}}function CA(t){let e,n,r,s;return{c(){e=y("span"),n=B("Search by Name"),this.h()},l(i){e=w(i,"SPAN",{class:!0});var o=b(e);n=j(o,"Search by Name"),o.forEach(d),this.h()},h(){E(e,"class","border rounded px-4 py-1 font-bold shadow-md")},m(i,o){N(i,e,o),p(e,n),r||(s=[pe(e,"keypress",t[1]),pe(e,"click",t[3])],r=!0)},p:_e,d(i){i&&d(e),r=!1,lt(s)}}}function OA(t){let e,n,r,s,i;function o(u,c){return u[0]=="date"?CA:RA}let l=o(t),a=l(t);return{c(){e=y("div"),n=y("span"),r=B("Switch to"),s=D(),i=y("div"),a.c(),this.h()},l(u){e=w(u,"DIV",{class:!0});var c=b(e);n=w(c,"SPAN",{class:!0});var f=b(n);r=j(f,"Switch to"),f.forEach(d),s=A(c),i=w(c,"DIV",{class:!0});var h=b(i);a.l(h),h.forEach(d),c.forEach(d),this.h()},h(){E(n,"class","text-sm pr-2"),E(i,"class","space-x-2 "),E(e,"class","flex text-xs pb-4")},m(u,c){N(u,e,c),p(e,n),p(n,r),p(e,s),p(e,i),a.m(i,null)},p(u,[c]){l===(l=o(u))&&a?a.p(u,c):(a.d(1),a=l(u),a&&(a.c(),a.m(i,null)))},i:_e,o:_e,d(u){u&&d(e),a.d()}}}function PA(t,e,n){let{searchBy:r}=e;function s(a){ot.call(this,t,a)}function i(a){ot.call(this,t,a)}const o=()=>{n(0,r="name"),tn("i","Switched to search by name")},l=()=>{n(0,r="date"),tn("s","Switched to search by date")};return t.$$set=a=>{"searchBy"in a&&n(0,r=a.searchBy)},[r,s,i,o,l]}class LA extends De{constructor(e){super(),Ae(this,e,PA,OA,$e,{searchBy:0})}}function $h(t,e,n){const r=t.slice();return r[24]=e[n],r[26]=n,r}function MA(t){let e,n;return e=new Yt({props:{title:"Clear Search results",click:t[20]}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s&2560&&(i.click=r[20]),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function UA(t){let e,n;return e=new Yt({props:{click:t[19],title:"GO"}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s&3008&&(i.click=r[19]),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function Nh(t){let e,n=t[3],r=[];for(let s=0;s<n.length;s+=1)r[s]=Rh($h(t,n,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ee()},l(s){for(let i=0;i<r.length;i+=1)r[i].l(s);e=Ee()},m(s,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(s,i);N(s,e,i)},p(s,i){if(i&4110){n=s[3];let o;for(o=0;o<n.length;o+=1){const l=$h(s,n,o);r[o]?r[o].p(l,i):(r[o]=Rh(l),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){pn(r,s),s&&d(e)}}}function Rh(t){let e,n,r,s,i=t[26]+1+"",o,l,a,u,c=t[24].data.receiptId.substring(0,7)+"",f,h,m,g,_=t[24].data.borrower+"",v,I,k,S=xe(t[24].data.amount)+"",T,P,M,R=xe(t[24].data.balance)+"",O,F,L,Q=t[24].data.days_left+"",te,re,z,K=In(t[24].data.last_paid)+"",U,Y,V,W;function ue(){return t[22](t[24])}return{c(){e=y("div"),n=D(),r=y("tr"),s=y("td"),o=B(i),l=B("."),a=D(),u=y("td"),f=B(c),h=B("..."),m=D(),g=y("td"),v=B(_),I=D(),k=y("td"),T=B(S),P=D(),M=y("td"),O=B(R),F=D(),L=y("td"),te=B(Q),re=D(),z=y("td"),U=B(K),Y=D(),this.h()},l(oe){e=w(oe,"DIV",{class:!0}),b(e).forEach(d),n=A(oe),r=w(oe,"TR",{class:!0,style:!0});var ne=b(r);s=w(ne,"TD",{class:!0});var ie=b(s);o=j(ie,i),l=j(ie,"."),ie.forEach(d),a=A(ne),u=w(ne,"TD",{class:!0});var ce=b(u);f=j(ce,c),h=j(ce,"..."),ce.forEach(d),m=A(ne),g=w(ne,"TD",{class:!0});var J=b(g);v=j(J,_),J.forEach(d),I=A(ne),k=w(ne,"TD",{class:!0});var we=b(k);T=j(we,S),we.forEach(d),P=A(ne),M=w(ne,"TD",{class:!0});var be=b(M);O=j(be,R),be.forEach(d),F=A(ne),L=w(ne,"TD",{class:!0});var ye=b(L);te=j(ye,Q),ye.forEach(d),re=A(ne),z=w(ne,"TD",{class:!0});var ve=b(z);U=j(ve,K),ve.forEach(d),Y=A(ne),ne.forEach(d),this.h()},h(){E(e,"class","mt-3"),E(s,"class","px-6 py-2 text-sm font-medium text-gray-900whitespace-nowrap"),E(u,"class","px-6 py-2 text-sm font-medium text-gray-900whitespace-nowrap"),E(g,"class","px-6 py-2 text-sm font-medium text-gray-900whitespace-nowrap"),E(k,"class","px-6 py-2 text-sm font-medium text-gray-900whitespace-nowrap"),E(M,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(L,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(z,"class","text-sm text-gray-900 font-light px-6 py-2 whitespace-nowrap"),E(r,"class","bg-slate-50 space-y-4"),ht(r,"cursor","pointer")},m(oe,ne){N(oe,e,ne),N(oe,n,ne),N(oe,r,ne),p(r,s),p(s,o),p(s,l),p(r,a),p(r,u),p(u,f),p(u,h),p(r,m),p(r,g),p(g,v),p(r,I),p(r,k),p(k,T),p(r,P),p(r,M),p(M,O),p(r,F),p(r,L),p(L,te),p(r,re),p(r,z),p(z,U),p(r,Y),V||(W=[pe(r,"keypress",t[13]),pe(r,"click",ue)],V=!0)},p(oe,ne){t=oe,ne&8&&c!==(c=t[24].data.receiptId.substring(0,7)+"")&&me(f,c),ne&8&&_!==(_=t[24].data.borrower+"")&&me(v,_),ne&8&&S!==(S=xe(t[24].data.amount)+"")&&me(T,S),ne&8&&R!==(R=xe(t[24].data.balance)+"")&&me(O,R),ne&8&&Q!==(Q=t[24].data.days_left+"")&&me(te,Q),ne&8&&K!==(K=In(t[24].data.last_paid)+"")&&me(U,K)},d(oe){oe&&d(e),oe&&d(n),oe&&d(r),V=!1,lt(W)}}}function VA(t){let e,n,r,s,i=t[5].value!=null&&Nh(t);return{c(){e=y("div"),n=D(),i&&i.c(),r=D(),s=y("div"),this.h()},l(o){e=w(o,"DIV",{class:!0}),b(e).forEach(d),n=A(o),i&&i.l(o),r=A(o),s=w(o,"DIV",{class:!0}),b(s).forEach(d),this.h()},h(){E(e,"class","hover:text-lg my-3"),E(s,"class","mt-2")},m(o,l){N(o,e,l),N(o,n,l),i&&i.m(o,l),N(o,r,l),N(o,s,l)},p(o,l){o[5].value!=null?i?i.p(o,l):(i=Nh(o),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(o){o&&d(e),o&&d(n),i&&i.d(o),o&&d(r),o&&d(s)}}}function Ch(t){let e,n=t[9]?t[7]+" to "+t[8]:"today",r;return{c(){e=B("No Receipts found for "),r=B(n)},l(s){e=j(s,"No Receipts found for "),r=j(s,n)},m(s,i){N(s,e,i),N(s,r,i)},p(s,i){i&896&&n!==(n=s[9]?s[7]+" to "+s[8]:"today")&&me(r,n)},d(s){s&&d(e),s&&d(r)}}}function FA(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v=t[3].length+"",I,k,S,T,P=xe(t[10])+"",M,R,O,F,L,Q,te,re,z,K,U,Y,V,W,ue,oe,ne,ie,ce,J,we,be,ye,ve;function nt(X){t[14](X)}let Oe={};t[6]!==void 0&&(Oe.searchBy=t[6]),r=new LA({props:Oe}),fe.push(()=>he(r,"searchBy",nt)),L=new Rn({props:{title:"Receipts 🧾"}});function Re(X){t[15](X)}function st(X){t[16](X)}function Pe(X){t[17](X)}function Ce(X){t[18](X)}let Me={};t[4]!==void 0&&(Me.search=t[4]),t[6]!==void 0&&(Me.searchBy=t[6]),t[7]!==void 0&&(Me.fromDate=t[7]),t[8]!==void 0&&(Me.toDate=t[8]),re=new NA({props:Me}),fe.push(()=>he(re,"search",Re)),fe.push(()=>he(re,"searchBy",st)),fe.push(()=>he(re,"fromDate",Pe)),fe.push(()=>he(re,"toDate",Ce));const Z=[UA,MA],Te=[];function Je(X,ge){return X[9]==!1&&X[6]=="date"?0:X[9]==!0?1:-1}~(W=Je(t))&&(ue=Te[W]=Z[W](t)),ne=new Yt({props:{click:t[21],title:"Add payment receipt ✜"}}),be=new Ul({props:{headers:["","PaymentID","Borrower","Paid","Balance","Days left","Last paid"],$$slots:{default:[VA]},$$scope:{ctx:t}}});let Ke=t[3].length==0&&Ch(t);return{c(){e=y("div"),n=y("div"),x(r.$$.fragment),i=D(),o=y("span"),l=B(t[4]),a=B(", "),u=B(t[7]),c=B(" to "),f=B(t[8]),h=D(),m=y("div"),g=y("span"),_=B("Results: "),I=B(v),k=D(),S=y("span"),T=B("Total: "),M=B(P),R=D(),O=y("div"),F=y("div"),x(L.$$.fragment),Q=D(),te=y("div"),x(re.$$.fragment),V=D(),ue&&ue.c(),oe=D(),x(ne.$$.fragment),ie=D(),ce=y("div"),J=D(),we=y("div"),x(be.$$.fragment),ye=D(),Ke&&Ke.c(),this.h()},l(X){e=w(X,"DIV",{class:!0});var ge=b(e);n=w(ge,"DIV",{class:!0});var et=b(n);G(r.$$.fragment,et),i=A(et),o=w(et,"SPAN",{class:!0});var Ye=b(o);l=j(Ye,t[4]),a=j(Ye,", "),u=j(Ye,t[7]),c=j(Ye," to "),f=j(Ye,t[8]),Ye.forEach(d),et.forEach(d),h=A(ge),m=w(ge,"DIV",{class:!0});var it=b(m);g=w(it,"SPAN",{class:!0});var rt=b(g);_=j(rt,"Results: "),I=j(rt,v),rt.forEach(d),k=A(it),S=w(it,"SPAN",{class:!0});var ae=b(S);T=j(ae,"Total: "),M=j(ae,P),ae.forEach(d),it.forEach(d),ge.forEach(d),R=A(X),O=w(X,"DIV",{class:!0});var Fe=b(O);F=w(Fe,"DIV",{class:!0});var bt=b(F);G(L.$$.fragment,bt),bt.forEach(d),Q=A(Fe),te=w(Fe,"DIV",{class:!0});var Et=b(te);G(re.$$.fragment,Et),V=A(Et),ue&&ue.l(Et),Et.forEach(d),oe=A(Fe),G(ne.$$.fragment,Fe),Fe.forEach(d),ie=A(X),ce=w(X,"DIV",{class:!0}),b(ce).forEach(d),J=A(X),we=w(X,"DIV",{});var It=b(we);G(be.$$.fragment,It),ye=A(It),Ke&&Ke.l(It),It.forEach(d),this.h()},h(){E(o,"class","mx-2"),E(n,"class","flex text-sm"),E(g,"class","text-sm border px-2 mx-2"),E(S,"class","text-sm border px-2 mx-2"),E(m,"class",""),E(e,"class","flex justify-between"),E(F,"class","flex justify"),E(te,"class","flex justify-start"),E(O,"class","flex justify-between"),E(ce,"class","pt-5")},m(X,ge){N(X,e,ge),p(e,n),q(r,n,null),p(n,i),p(n,o),p(o,l),p(o,a),p(o,u),p(o,c),p(o,f),p(e,h),p(e,m),p(m,g),p(g,_),p(g,I),p(m,k),p(m,S),p(S,T),p(S,M),N(X,R,ge),N(X,O,ge),p(O,F),q(L,F,null),p(O,Q),p(O,te),q(re,te,null),p(te,V),~W&&Te[W].m(te,null),p(O,oe),q(ne,O,null),N(X,ie,ge),N(X,ce,ge),N(X,J,ge),N(X,we,ge),q(be,we,null),p(we,ye),Ke&&Ke.m(we,null),ve=!0},p(X,[ge]){const et={};!s&&ge&64&&(s=!0,et.searchBy=X[6],de(()=>s=!1)),r.$set(et),(!ve||ge&16)&&me(l,X[4]),(!ve||ge&128)&&me(u,X[7]),(!ve||ge&256)&&me(f,X[8]),(!ve||ge&8)&&v!==(v=X[3].length+"")&&me(I,v),(!ve||ge&1024)&&P!==(P=xe(X[10])+"")&&me(M,P);const Ye={};!z&&ge&16&&(z=!0,Ye.search=X[4],de(()=>z=!1)),!K&&ge&64&&(K=!0,Ye.searchBy=X[6],de(()=>K=!1)),!U&&ge&128&&(U=!0,Ye.fromDate=X[7],de(()=>U=!1)),!Y&&ge&256&&(Y=!0,Ye.toDate=X[8],de(()=>Y=!1)),re.$set(Ye);let it=W;W=Je(X),W===it?~W&&Te[W].p(X,ge):(ue&&(He(),C(Te[it],1,1,()=>{Te[it]=null}),ze()),~W?(ue=Te[W],ue?ue.p(X,ge):(ue=Te[W]=Z[W](X),ue.c()),$(ue,1),ue.m(te,null)):ue=null);const rt={};ge&1&&(rt.click=X[21]),ne.$set(rt);const ae={};ge&134221870&&(ae.$$scope={dirty:ge,ctx:X}),be.$set(ae),X[3].length==0?Ke?Ke.p(X,ge):(Ke=Ch(X),Ke.c(),Ke.m(we,null)):Ke&&(Ke.d(1),Ke=null)},i(X){ve||($(r.$$.fragment,X),$(L.$$.fragment,X),$(re.$$.fragment,X),$(ue),$(ne.$$.fragment,X),$(be.$$.fragment,X),ve=!0)},o(X){C(r.$$.fragment,X),C(L.$$.fragment,X),C(re.$$.fragment,X),C(ue),C(ne.$$.fragment,X),C(be.$$.fragment,X),ve=!1},d(X){X&&d(e),H(r),X&&d(R),X&&d(O),H(L),H(re),~W&&Te[W].d(),H(ne),X&&d(ie),X&&d(ce),X&&d(J),X&&d(we),H(be),Ke&&Ke.d()}}}function BA(t,e,n){let r,s,i,o,l,a;Ge(t,Ll,L=>n(5,o=L)),Ge(t,rn,L=>n(11,l=L)),Ge(t,So,L=>n(12,a=L));let{addReceipt:u,loanDetail:c,loanData:f}=e,h="name",m,g,_=!1;function v(L){ot.call(this,t,L)}function I(L){h=L,n(6,h)}function k(L){s=L,n(4,s)}function S(L){h=L,n(6,h)}function T(L){m=L,n(7,m)}function P(L){g=L,n(8,g)}const M=()=>{n(9,_=!0),h=="date"&&aA(l.BusinessId,m,g)},R=()=>{n(9,_=!1),Jg(l.BusinessId)},O=()=>n(0,u=!0),F=L=>{n(1,c=!0),n(2,f=a.value==null?{}:a.value.filter(Q=>Q.customer_id===L.data.borrowerId)[0].data),console.log(f)};return t.$$set=L=>{"addReceipt"in L&&n(0,u=L.addReceipt),"loanDetail"in L&&n(1,c=L.loanDetail),"loanData"in L&&n(2,f=L.loanData)},t.$$.update=()=>{t.$$.dirty&32&&o.value!=null&&o.value.sort((L,Q)=>Q.data.last_paid-L.data.last_paid),t.$$.dirty&48&&n(3,r=o.value==null?[]:o.value.sort((L,Q)=>Q.data.last_paid-L.data.last_paid).filter(L=>L.data.borrower.toLowerCase().includes(s.toLowerCase()))),t.$$.dirty&8&&n(10,i=r.reduce((L,{data:Q})=>L+Q.amount,0))},n(4,s=""),[u,c,f,r,s,o,h,m,g,_,i,l,a,v,I,k,S,T,P,M,R,O,F]}class jA extends De{constructor(e){super(),Ae(this,e,BA,FA,$e,{addReceipt:0,loanDetail:1,loanData:2})}}function xA(t){let e,n,r,s,i;function o(c){t[6](c)}function l(c){t[7](c)}function a(c){t[8](c)}let u={};return t[1]!==void 0&&(u.loanDetail=t[1]),t[2]!==void 0&&(u.loanData=t[2]),t[0]!==void 0&&(u.addReceipt=t[0]),e=new jA({props:u}),fe.push(()=>he(e,"loanDetail",o)),fe.push(()=>he(e,"loanData",l)),fe.push(()=>he(e,"addReceipt",a)),{c(){x(e.$$.fragment)},l(c){G(e.$$.fragment,c)},m(c,f){q(e,c,f),i=!0},p(c,f){const h={};!n&&f&2&&(n=!0,h.loanDetail=c[1],de(()=>n=!1)),!r&&f&4&&(r=!0,h.loanData=c[2],de(()=>r=!1)),!s&&f&1&&(s=!0,h.addReceipt=c[0],de(()=>s=!1)),e.$set(h)},i(c){i||($(e.$$.fragment,c),i=!0)},o(c){C(e.$$.fragment,c),i=!1},d(c){H(e,c)}}}function qA(t){let e,n,r,s;function i(a){t[4](a)}function o(a){t[5](a)}let l={};return t[2]!==void 0&&(l.loanData=t[2]),t[1]!==void 0&&(l.isDetail=t[1]),e=new Yg({props:l}),fe.push(()=>he(e,"loanData",i)),fe.push(()=>he(e,"isDetail",o)),{c(){x(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,u){q(e,a,u),s=!0},p(a,u){const c={};!n&&u&4&&(n=!0,c.loanData=a[2],de(()=>n=!1)),!r&&u&2&&(r=!0,c.isDetail=a[1],de(()=>r=!1)),e.$set(c)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){C(e.$$.fragment,a),s=!1},d(a){H(e,a)}}}function HA(t){let e,n,r;function s(o){t[3](o)}let i={};return t[0]!==void 0&&(i.addReceipt=t[0]),e=new EA({props:i}),fe.push(()=>he(e,"addReceipt",s)),{c(){x(e.$$.fragment)},l(o){G(e.$$.fragment,o)},m(o,l){q(e,o,l),r=!0},p(o,l){const a={};!n&&l&1&&(n=!0,a.addReceipt=o[0],de(()=>n=!1)),e.$set(a)},i(o){r||($(e.$$.fragment,o),r=!0)},o(o){C(e.$$.fragment,o),r=!1},d(o){H(e,o)}}}function zA(t){let e,n,r,s;const i=[HA,qA,xA],o=[];function l(a,u){return a[0]?0:a[1]?1:2}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ee()},l(a){n.l(a),r=Ee()},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,[u]){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}function KA(t,e,n){let r=!1,s=!1,i;function o(h){r=h,n(0,r)}function l(h){i=h,n(2,i)}function a(h){s=h,n(1,s)}function u(h){s=h,n(1,s)}function c(h){i=h,n(2,i)}function f(h){r=h,n(0,r)}return[r,s,i,o,l,a,u,c,f]}class GA extends De{constructor(e){super(),Ae(this,e,KA,zA,$e,{})}}function Zg(t){const e=t-1;return e*e*e+1}function Oh(t,{delay:e=0,duration:n=400,easing:r=Zg,x:s=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(t),a=+l.opacity,u=l.transform==="none"?"":l.transform,c=a*(1-o),[f,h]=fc(s),[m,g]=fc(i);return{delay:e,duration:n,easing:r,css:(_,v)=>`
			transform: ${u} translate(${(1-_)*f}${h}, ${(1-_)*m}${g});
			opacity: ${a-c*v}`}}function WA(t){let e,n,r,s,i,o,l,a,u,c,f=t[1].name+"",h,m,g,_,v,I,k,S,T,P,M,R,O,F,L,Q,te,re,z,K,U;return{c(){e=y("div"),n=y("div"),r=y("span"),s=B("Account Settings"),i=D(),o=y("div"),l=y("span"),a=B("Business Name"),u=D(),c=y("span"),h=B(f),m=D(),g=y("hr"),_=D(),v=y("div"),I=y("div"),k=y("span"),S=B("Plan"),T=D(),P=y("span"),M=B("--"),R=D(),O=y("hr"),F=D(),L=y("div"),Q=y("span"),te=B("Expiry"),re=D(),z=y("span"),K=B("__"),this.h()},l(Y){e=w(Y,"DIV",{class:!0});var V=b(e);n=w(V,"DIV",{class:!0});var W=b(n);r=w(W,"SPAN",{class:!0});var ue=b(r);s=j(ue,"Account Settings"),ue.forEach(d),i=A(W),o=w(W,"DIV",{class:!0});var oe=b(o);l=w(oe,"SPAN",{class:!0});var ne=b(l);a=j(ne,"Business Name"),ne.forEach(d),u=A(oe),c=w(oe,"SPAN",{class:!0});var ie=b(c);h=j(ie,f),ie.forEach(d),oe.forEach(d),m=A(W),g=w(W,"HR",{}),_=A(W),v=w(W,"DIV",{});var ce=b(v);I=w(ce,"DIV",{class:!0});var J=b(I);k=w(J,"SPAN",{class:!0});var we=b(k);S=j(we,"Plan"),we.forEach(d),T=A(J),P=w(J,"SPAN",{class:!0});var be=b(P);M=j(be,"--"),be.forEach(d),J.forEach(d),R=A(ce),O=w(ce,"HR",{}),F=A(ce),L=w(ce,"DIV",{class:!0});var ye=b(L);Q=w(ye,"SPAN",{class:!0});var ve=b(Q);te=j(ve,"Expiry"),ve.forEach(d),re=A(ye),z=w(ye,"SPAN",{class:!0});var nt=b(z);K=j(nt,"__"),nt.forEach(d),ye.forEach(d),ce.forEach(d),W.forEach(d),V.forEach(d),this.h()},h(){E(r,"class","font-bold pb-5 flex justify-center"),E(l,"class","font-semibold"),E(c,"class","text-sm"),E(o,"class","flex justify-between py-4"),E(k,"class","font-semibold"),E(P,"class","text-sm"),E(I,"class","flex justify-between py-4"),E(Q,"class","font-semibold"),E(z,"class","text-sm"),E(L,"class","flex justify-between py-4"),E(n,"class",U="space-y-3 "+(t[0].size>600?"px-10":"")+" py-5"),E(e,"class","")},m(Y,V){N(Y,e,V),p(e,n),p(n,r),p(r,s),p(n,i),p(n,o),p(o,l),p(l,a),p(o,u),p(o,c),p(c,h),p(n,m),p(n,g),p(n,_),p(n,v),p(v,I),p(I,k),p(k,S),p(I,T),p(I,P),p(P,M),p(v,R),p(v,O),p(v,F),p(v,L),p(L,Q),p(Q,te),p(L,re),p(L,z),p(z,K)},p(Y,[V]){V&2&&f!==(f=Y[1].name+"")&&me(h,f),V&1&&U!==(U="space-y-3 "+(Y[0].size>600?"px-10":"")+" py-5")&&E(n,"class",U)},i:_e,o:_e,d(Y){Y&&d(e)}}}function QA(t,e,n){let r,s,i;return Ge(t,dn,o=>n(2,r=o)),Ge(t,rs,o=>n(0,s=o)),Ge(t,rn,o=>n(1,i=o)),Nr(o=>{}),t.$$.update=()=>{t.$$.dirty&4},[s,i,r]}class YA extends De{constructor(e){super(),Ae(this,e,QA,WA,$e,{})}}function XA(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S;return{c(){e=y("div"),n=y("div"),r=B("Click to copy contact."),s=D(),i=y("div"),o=B("Our Email"),l=D(),a=y("div"),u=B("philip.mugz@yahoo.com"),c=D(),f=y("div"),h=B("Our Phone"),m=D(),g=y("div"),_=D(),v=y("div"),I=B("+256 788607954"),this.h()},l(T){e=w(T,"DIV",{class:!0});var P=b(e);n=w(P,"DIV",{class:!0});var M=b(n);r=j(M,"Click to copy contact."),M.forEach(d),s=A(P),i=w(P,"DIV",{class:!0});var R=b(i);o=j(R,"Our Email"),R.forEach(d),l=A(P),a=w(P,"DIV",{style:!0});var O=b(a);u=j(O,"philip.mugz@yahoo.com"),O.forEach(d),c=A(P),f=w(P,"DIV",{class:!0});var F=b(f);h=j(F,"Our Phone"),F.forEach(d),m=A(P),g=w(P,"DIV",{}),b(g).forEach(d),_=A(P),v=w(P,"DIV",{style:!0});var L=b(v);I=j(L,"+256 788607954"),L.forEach(d),P.forEach(d),this.h()},h(){E(n,"class","text-sm underline mb-2"),E(i,"class","font-bold"),ht(a,"cursor","pointer"),E(f,"class","font-bold mt-2"),ht(v,"cursor","pointer"),E(e,"class","p-10")},m(T,P){N(T,e,P),p(e,n),p(n,r),p(e,s),p(e,i),p(i,o),p(e,l),p(e,a),p(a,u),p(e,c),p(e,f),p(f,h),p(e,m),p(e,g),p(e,_),p(e,v),p(v,I),k||(S=[pe(a,"keypress",t[1]),pe(a,"click",t[2]),pe(v,"keypress",t[0]),pe(v,"click",t[3])],k=!0)},p:_e,i:_e,o:_e,d(T){T&&d(e),k=!1,lt(S)}}}function JA(t){function e(i){ot.call(this,t,i)}function n(i){ot.call(this,t,i)}return[e,n,()=>{navigator.clipboard.writeText("philip.mugz@yahoo.com")},()=>{navigator.clipboard.writeText("+256 788607954")}]}class ZA extends De{constructor(e){super(),Ae(this,e,JA,XA,$e,{})}}const e$=t=>zn(wn,"business",t);async function t$(t){return(await Am(e$(t))).data()}const e_=t=>zn(wn,"users",t);async function t_(t){return(await Am(e_(t))).data()}async function n$(t,e){let n=await Io(e);await $s(e_(t),{profile:n}),t_(t).then(r=>{dn.update(s=>r)})}function r$(t,e){TE(Eo,t.trim(),e).then(async function(){let n=await t_(Eo.currentUser.uid),r=await t$(n.businessId);dn.update(s=>n),rn.update(s=>r),ko.update(s=>({status:200,code:"authorized"}))}).catch(n=>{updateUserStore(n)})}async function n_(){try{await Eo.signOut(),dn.update(t=>{}),rn.update(t=>{}),ko.update(t=>({status:200,code:"signedout"}))}catch(t){console.log(t)}}async function s$(){return Eo.onAuthStateChanged(t=>{if(console.log(t),t==null)return n_(),!1})}function i$(t){let e,n,r,s,i,o,l=(t[0].length==0?"Are you sure":t[0])+"",a,u,c,f,h,m,g;return{c(){e=y("div"),n=y("div"),r=B("Log out"),s=D(),i=y("div"),o=y("span"),a=B(l),u=D(),c=y("div"),f=y("span"),h=B("Logout"),this.h()},l(_){e=w(_,"DIV",{class:!0});var v=b(e);n=w(v,"DIV",{class:!0});var I=b(n);r=j(I,"Log out"),I.forEach(d),s=A(v),i=w(v,"DIV",{class:!0});var k=b(i);o=w(k,"SPAN",{class:!0});var S=b(o);a=j(S,l),S.forEach(d),k.forEach(d),u=A(v),c=w(v,"DIV",{class:!0});var T=b(c);f=w(T,"SPAN",{class:!0});var P=b(f);h=j(P,"Logout"),P.forEach(d),T.forEach(d),v.forEach(d),this.h()},h(){E(n,"class","mt-10 flex justify-center text-lg font-semibold"),E(o,"class","flex items-center "),E(i,"class","flex justify-center"),E(f,"class","border px-5 py-1 mb-5 bg-red-500 text-white rounded-full"),E(c,"class","space-y-10 flex justify-center"),E(e,"class","space-y-5")},m(_,v){N(_,e,v),p(e,n),p(n,r),p(e,s),p(e,i),p(i,o),p(o,a),p(e,u),p(e,c),p(c,f),p(f,h),m||(g=[pe(f,"keypress",t[1]),pe(f,"click",t[2])],m=!0)},p(_,[v]){v&1&&l!==(l=(_[0].length==0?"Are you sure":_[0])+"")&&me(a,l)},i:_e,o:_e,d(_){_&&d(e),m=!1,lt(g)}}}function o$(t,e,n){let{message:r=""}=e;function s(o){ot.call(this,t,o)}const i=()=>{n_()};return t.$$set=o=>{"message"in o&&n(0,r=o.message)},[r,s,i]}class a$ extends De{constructor(e){super(),Ae(this,e,o$,i$,$e,{message:0})}}function l$(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_;return{c(){e=y("div"),n=y("span"),r=B("Click the button to get a shareable"),s=y("br"),i=B(" signup link for your team."),o=D(),l=y("div"),a=D(),u=y("div"),c=y("div"),f=y("span"),h=B("Copy sharable link."),this.h()},l(v){e=w(v,"DIV",{class:!0});var I=b(e);n=w(I,"SPAN",{class:!0});var k=b(n);r=j(k,"Click the button to get a shareable"),s=w(k,"BR",{}),i=j(k," signup link for your team."),k.forEach(d),o=A(I),l=w(I,"DIV",{}),b(l).forEach(d),a=A(I),u=w(I,"DIV",{class:!0});var S=b(u);c=w(S,"DIV",{class:!0});var T=b(c);f=w(T,"SPAN",{class:!0});var P=b(f);h=j(P,"Copy sharable link."),P.forEach(d),T.forEach(d),S.forEach(d),I.forEach(d),this.h()},h(){E(n,"class","text-md flex justify-center"),E(f,"class","bg-indigo-600 hover:bg-indigo-800 px-5 py-2 text-white shadow rounded"),E(c,"class","flex justify-center"),E(u,"class","mb-3 "),E(e,"class",m=(t[0].size>800?"p-10":"p-4")+" space-y-5")},m(v,I){N(v,e,I),p(e,n),p(n,r),p(n,s),p(n,i),p(e,o),p(e,l),p(e,a),p(e,u),p(u,c),p(c,f),p(f,h),g||(_=[pe(f,"keypress",t[2]),pe(f,"click",t[3])],g=!0)},p(v,[I]){I&1&&m!==(m=(v[0].size>800?"p-10":"p-4")+" space-y-5")&&E(e,"class",m)},i:_e,o:_e,d(v){v&&d(e),g=!1,lt(_)}}}function u$(t,e,n){let r,s;Ge(t,rs,l=>n(0,r=l)),Ge(t,rn,l=>n(1,s=l));function i(l){ot.call(this,t,l)}return[r,s,i,async()=>{await navigator.clipboard.writeText(window.location.origin+"/teamcollab/"+s.BusinessId+"/signup")}]}class r_ extends De{constructor(e){super(),Ae(this,e,u$,l$,$e,{})}}function Ph(t){let e,n;return e=new Yt({props:{title:"Save new Image",click:t[6]}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,s){const i={};s&22&&(i.click=r[6]),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function c$(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k=t[2].name+"",S,T,P,M,R,O,F,L,Q,te,re=t[2].email+"",z,K,U,Y,V,W,ue,oe,ne,ie,ce,J,we=new Date(t[0].lastLoggedIn.seconds*1e3+t[0].lastLoggedIn.nanoseconds/1e6).toDateString()+"",be,ye,ve,nt,Oe;function Re(Ce){t[5](Ce)}let st={size:"40",src:t[2].profile??""};t[1]!==void 0&&(st.avatar=t[1]),a=new gn({props:st}),fe.push(()=>he(a,"avatar",Re));let Pe=t[2].profile==null&&t[1]!=null&&t[2].profile!=t[1]&&Ph(t);return{c(){e=y("div"),n=y("div"),r=y("span"),s=B("Account Settings"),i=D(),o=y("div"),l=y("div"),x(a.$$.fragment),c=D(),f=y("div"),h=D(),m=y("div"),g=y("span"),_=B("Name"),v=D(),I=y("span"),S=B(k),T=D(),P=y("hr"),M=D(),R=y("div"),O=y("div"),F=y("span"),L=B("Email"),Q=D(),te=y("span"),z=B(re),K=D(),U=y("hr"),Y=D(),V=y("div"),W=D(),ue=y("div"),oe=y("div"),ne=y("span"),ie=B("last loggedIn"),ce=D(),J=y("span"),be=B(we),ye=D(),ve=y("div"),Pe&&Pe.c(),this.h()},l(Ce){e=w(Ce,"DIV",{class:!0});var Me=b(e);n=w(Me,"DIV",{class:!0});var Z=b(n);r=w(Z,"SPAN",{class:!0});var Te=b(r);s=j(Te,"Account Settings"),Te.forEach(d),i=A(Z),o=w(Z,"DIV",{});var Je=b(o);l=w(Je,"DIV",{class:!0});var Ke=b(l);G(a.$$.fragment,Ke),Ke.forEach(d),c=A(Je),f=w(Je,"DIV",{}),b(f).forEach(d),h=A(Je),m=w(Je,"DIV",{class:!0});var X=b(m);g=w(X,"SPAN",{class:!0});var ge=b(g);_=j(ge,"Name"),ge.forEach(d),v=A(X),I=w(X,"SPAN",{class:!0});var et=b(I);S=j(et,k),et.forEach(d),X.forEach(d),T=A(Je),P=w(Je,"HR",{}),Je.forEach(d),M=A(Z),R=w(Z,"DIV",{});var Ye=b(R);O=w(Ye,"DIV",{class:!0});var it=b(O);F=w(it,"SPAN",{class:!0});var rt=b(F);L=j(rt,"Email"),rt.forEach(d),Q=A(it),te=w(it,"SPAN",{class:!0});var ae=b(te);z=j(ae,re),ae.forEach(d),it.forEach(d),K=A(Ye),U=w(Ye,"HR",{}),Ye.forEach(d),Y=A(Z),V=w(Z,"DIV",{}),b(V).forEach(d),W=A(Z),ue=w(Z,"DIV",{});var Fe=b(ue);oe=w(Fe,"DIV",{class:!0});var bt=b(oe);ne=w(bt,"SPAN",{class:!0});var Et=b(ne);ie=j(Et,"last loggedIn"),Et.forEach(d),ce=A(bt),J=w(bt,"SPAN",{class:!0});var It=b(J);be=j(It,we),It.forEach(d),bt.forEach(d),Fe.forEach(d),ye=A(Z),ve=w(Z,"DIV",{class:!0});var ct=b(ve);Pe&&Pe.l(ct),ct.forEach(d),Z.forEach(d),Me.forEach(d),this.h()},h(){E(r,"class","font-bold pb-5 flex justify-center"),E(l,"class","flex justify-center"),E(g,"class","font-semibold"),E(I,"class","text-sm"),E(m,"class","flex justify-between py-4"),E(F,"class","font-semibold"),E(te,"class","text-sm"),E(O,"class","flex justify-between pb-4"),E(ne,"class","font-semibold"),E(J,"class","text-sm"),E(oe,"class","flex justify-between py-4"),E(ve,"class","flex justify-center"),E(n,"class",nt="space-y-4 "+(t[3].size>600?"px-10":"")+" py-5"),E(e,"class","")},m(Ce,Me){N(Ce,e,Me),p(e,n),p(n,r),p(r,s),p(n,i),p(n,o),p(o,l),q(a,l,null),p(o,c),p(o,f),p(o,h),p(o,m),p(m,g),p(g,_),p(m,v),p(m,I),p(I,S),p(o,T),p(o,P),p(n,M),p(n,R),p(R,O),p(O,F),p(F,L),p(O,Q),p(O,te),p(te,z),p(R,K),p(R,U),p(n,Y),p(n,V),p(n,W),p(n,ue),p(ue,oe),p(oe,ne),p(ne,ie),p(oe,ce),p(oe,J),p(J,be),p(n,ye),p(n,ve),Pe&&Pe.m(ve,null),Oe=!0},p(Ce,[Me]){const Z={};Me&4&&(Z.src=Ce[2].profile??""),!u&&Me&2&&(u=!0,Z.avatar=Ce[1],de(()=>u=!1)),a.$set(Z),(!Oe||Me&4)&&k!==(k=Ce[2].name+"")&&me(S,k),(!Oe||Me&4)&&re!==(re=Ce[2].email+"")&&me(z,re),(!Oe||Me&1)&&we!==(we=new Date(Ce[0].lastLoggedIn.seconds*1e3+Ce[0].lastLoggedIn.nanoseconds/1e6).toDateString()+"")&&me(be,we),Ce[2].profile==null&&Ce[1]!=null&&Ce[2].profile!=Ce[1]?Pe?(Pe.p(Ce,Me),Me&6&&$(Pe,1)):(Pe=Ph(Ce),Pe.c(),$(Pe,1),Pe.m(ve,null)):Pe&&(He(),C(Pe,1,1,()=>{Pe=null}),ze()),(!Oe||Me&8&&nt!==(nt="space-y-4 "+(Ce[3].size>600?"px-10":"")+" py-5"))&&E(n,"class",nt)},i(Ce){Oe||($(a.$$.fragment,Ce),$(Pe),Oe=!0)},o(Ce){C(a.$$.fragment,Ce),C(Pe),Oe=!1},d(Ce){Ce&&d(e),H(a),Pe&&Pe.d()}}}function f$(t,e,n){let r,s,i,o;Ge(t,dn,c=>n(0,s=c)),Ge(t,rs,c=>n(3,i=c)),Ge(t,rn,c=>n(4,o=c)),Nr(c=>{});let l;function a(c){l=c,n(1,l)}const u=()=>{n$(r.uid,{avatar:l,businessName:o.name,name:r.name})};return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=s)},[s,l,r,i,o,a,u]}class h$ extends De{constructor(e){super(),Ae(this,e,f$,c$,$e,{})}}function d$(t){let e;return{c(){e=y("div")},l(n){e=w(n,"DIV",{}),b(e).forEach(d)},m(n,r){N(n,e,r)},p:_e,i:_e,o:_e,d(n){n&&d(e)}}}function p$(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P,M,R,O,F,L,Q,te,re,z,K,U,Y,V,W,ue,oe;n=new Rn({props:{title:"Settings ⚙️"}});const ne=[y$,v$,_$,g$,m$],ie=[];function ce(J,we){return we&5&&(U=null),J[0]==1?0:J[0]==2?1:(U==null&&(U=!!(J[0]==3&&$_(J[2]))),U?2:J[0]==4?3:J[0]==5?4:-1)}return~(Y=ce(t,-1))&&(V=ie[Y]=ne[Y](t)),{c(){e=y("div"),x(n.$$.fragment),r=D(),s=y("div"),i=y("div"),o=y("div"),l=y("span"),a=B("Account Settings"),c=D(),f=y("div"),h=y("span"),m=B("Personal Settings"),_=D(),v=y("div"),I=y("span"),k=B("Team"),T=D(),P=y("div"),M=y("span"),R=B("Contact Us"),F=D(),L=y("div"),Q=y("span"),te=B("LogOut"),z=D(),K=y("div"),V&&V.c(),this.h()},l(J){e=w(J,"DIV",{class:!0});var we=b(e);G(n.$$.fragment,we),r=A(we),s=w(we,"DIV",{class:!0});var be=b(s);i=w(be,"DIV",{class:!0});var ye=b(i);o=w(ye,"DIV",{});var ve=b(o);l=w(ve,"SPAN",{class:!0});var nt=b(l);a=j(nt,"Account Settings"),nt.forEach(d),ve.forEach(d),c=A(ye),f=w(ye,"DIV",{});var Oe=b(f);h=w(Oe,"SPAN",{class:!0});var Re=b(h);m=j(Re,"Personal Settings"),Re.forEach(d),Oe.forEach(d),_=A(ye),v=w(ye,"DIV",{});var st=b(v);I=w(st,"SPAN",{class:!0});var Pe=b(I);k=j(Pe,"Team"),Pe.forEach(d),st.forEach(d),T=A(ye),P=w(ye,"DIV",{});var Ce=b(P);M=w(Ce,"SPAN",{class:!0});var Me=b(M);R=j(Me,"Contact Us"),Me.forEach(d),Ce.forEach(d),F=A(ye),L=w(ye,"DIV",{});var Z=b(L);Q=w(Z,"SPAN",{class:!0});var Te=b(Q);te=j(Te,"LogOut"),Te.forEach(d),Z.forEach(d),ye.forEach(d),z=A(be),K=w(be,"DIV",{class:!0});var Je=b(K);V&&V.l(Je),Je.forEach(d),be.forEach(d),we.forEach(d),this.h()},h(){E(l,"class",u=Jt(t[0]==1?"isActive px-3":"")+" svelte-14zpvol"),E(h,"class",g=Jt(t[0]==2?"isActive px-3":"")+" svelte-14zpvol"),E(I,"class",S=Jt(t[0]==3?"isActive px-3 ":"")+" svelte-14zpvol"),E(M,"class",O=Jt(t[0]==4?"isActive px-3":"")+" svelte-14zpvol"),E(Q,"class",re=Jt(t[0]==5?"isActive px-3":"")+" svelte-14zpvol"),E(i,"class","w-1/2 space-y-10"),E(K,"class","border shadow rounded-md h-full w-full "),E(s,"class","mt-10 flex justify-evenly"),E(e,"class","mx-32")},m(J,we){N(J,e,we),q(n,e,null),p(e,r),p(e,s),p(s,i),p(i,o),p(o,l),p(l,a),p(i,c),p(i,f),p(f,h),p(h,m),p(i,_),p(i,v),p(v,I),p(I,k),p(i,T),p(i,P),p(P,M),p(M,R),p(i,F),p(i,L),p(L,Q),p(Q,te),p(s,z),p(s,K),~Y&&ie[Y].m(K,null),W=!0,ue||(oe=[pe(o,"keypress",t[8]),pe(o,"click",t[9]),pe(f,"keypress",t[7]),pe(f,"click",t[10]),pe(v,"keypress",t[6]),pe(v,"click",t[11]),pe(P,"keypress",t[5]),pe(P,"click",t[12]),pe(L,"keypress",t[4]),pe(L,"click",t[13])],ue=!0)},p(J,we){(!W||we&1&&u!==(u=Jt(J[0]==1?"isActive px-3":"")+" svelte-14zpvol"))&&E(l,"class",u),(!W||we&1&&g!==(g=Jt(J[0]==2?"isActive px-3":"")+" svelte-14zpvol"))&&E(h,"class",g),(!W||we&1&&S!==(S=Jt(J[0]==3?"isActive px-3 ":"")+" svelte-14zpvol"))&&E(I,"class",S),(!W||we&1&&O!==(O=Jt(J[0]==4?"isActive px-3":"")+" svelte-14zpvol"))&&E(M,"class",O),(!W||we&1&&re!==(re=Jt(J[0]==5?"isActive px-3":"")+" svelte-14zpvol"))&&E(Q,"class",re);let be=Y;Y=ce(J,we),Y!==be&&(V&&(He(),C(ie[be],1,1,()=>{ie[be]=null}),ze()),~Y?(V=ie[Y],V||(V=ie[Y]=ne[Y](J),V.c()),$(V,1),V.m(K,null)):V=null)},i(J){W||($(n.$$.fragment,J),$(V),W=!0)},o(J){C(n.$$.fragment,J),C(V),W=!1},d(J){J&&d(e),H(n),~Y&&ie[Y].d(),ue=!1,lt(oe)}}}function m$(t){let e,n;return e=new a$({}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function g$(t){let e,n;return e=new ZA({}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function _$(t){let e,n;return e=new r_({}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function v$(t){let e,n;return e=new h$({}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function y$(t){let e,n;return e=new YA({}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function w$(t){let e,n,r,s;const i=[p$,d$],o=[];function l(a,u){return a[1].size>768?0:1}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ee()},l(a){n.l(a),r=Ee()},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,[u]){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}function b$(t,e,n){let r,s;Ge(t,rs,I=>n(1,r=I)),Ge(t,dn,I=>n(2,s=I));let i=1;function o(I){n(0,i=I)}function l(I){ot.call(this,t,I)}function a(I){ot.call(this,t,I)}function u(I){ot.call(this,t,I)}function c(I){ot.call(this,t,I)}function f(I){ot.call(this,t,I)}return[i,r,s,o,l,a,u,c,f,()=>o(1),()=>o(2),()=>o(3),()=>o(4),()=>o(5)]}class E$ extends De{constructor(e){super(),Ae(this,e,b$,w$,$e,{})}}function Lh(t,e,n){const r=t.slice();return r[10]=e[n],r}function Mh(t){let e,n=t[10].charAt(0).toUpperCase()+t[10].slice(1)+"",r;return{c(){e=y("option"),r=B(n),this.h()},l(s){e=w(s,"OPTION",{});var i=b(e);r=j(i,n),i.forEach(d),this.h()},h(){e.__value=t[10],e.value=e.__value},m(s,i){N(s,e,i),p(e,r)},p:_e,d(s){s&&d(e)}}}function I$(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P,M,R;function O(V){t[5](V)}let F={size:"1",src:"",upload:!0};t[4]!==void 0&&(F.avatar=t[4]),r=new gn({props:F}),fe.push(()=>he(r,"avatar",O));function L(V){t[6](V)}let Q={type:"Text",label:"Team member Name",isText:!0};t[0]!==void 0&&(Q.value=t[0]),o=new Pt({props:Q}),fe.push(()=>he(o,"value",L));function te(V){t[7](V)}let re={type:"text",label:"Nin Number",isText:!0};t[1]!==void 0&&(re.value=t[1]),u=new Pt({props:re}),fe.push(()=>he(u,"value",te));function z(V){t[8](V)}let K={type:"text",label:"Phone Number",isText:!0};t[2]!==void 0&&(K.value=t[2]),h=new Pt({props:K}),fe.push(()=>he(h,"value",z));let U=Object.keys(Nn),Y=[];for(let V=0;V<U.length;V+=1)Y[V]=Mh(Lh(t,U,V));return{c(){e=y("div"),n=y("div"),x(r.$$.fragment),i=D(),x(o.$$.fragment),a=D(),x(u.$$.fragment),f=D(),x(h.$$.fragment),g=D(),_=y("div"),v=y("div"),I=y("label"),k=B("Set their Role:"),S=D(),T=y("select");for(let V=0;V<Y.length;V+=1)Y[V].c();this.h()},l(V){e=w(V,"DIV",{class:!0});var W=b(e);n=w(W,"DIV",{class:!0});var ue=b(n);G(r.$$.fragment,ue),ue.forEach(d),i=A(W),G(o.$$.fragment,W),a=A(W),G(u.$$.fragment,W),f=A(W),G(h.$$.fragment,W),g=A(W),_=w(W,"DIV",{class:!0});var oe=b(_);v=w(oe,"DIV",{class:!0});var ne=b(v);I=w(ne,"LABEL",{for:!0,class:!0});var ie=b(I);k=j(ie,"Set their Role:"),ie.forEach(d),S=A(ne),T=w(ne,"SELECT",{id:!0,name:!0,class:!0});var ce=b(T);for(let J=0;J<Y.length;J+=1)Y[J].l(ce);ce.forEach(d),ne.forEach(d),oe.forEach(d),W.forEach(d),this.h()},h(){E(n,"class","flex justify-center pb-5"),E(I,"for",""),E(I,"class","font-bold"),E(T,"id","cars"),E(T,"name","cars"),E(T,"class","text-black"),t[3]===void 0&&Qs(()=>t[9].call(T)),E(v,"class","pt-3 pr-10 pl-4 shadow-lg py-4 text-sm "),E(_,"class","flex justify-start"),E(e,"class","space-y-2 px-5")},m(V,W){N(V,e,W),p(e,n),q(r,n,null),p(e,i),q(o,e,null),p(e,a),q(u,e,null),p(e,f),q(h,e,null),p(e,g),p(e,_),p(_,v),p(v,I),p(I,k),p(v,S),p(v,T);for(let ue=0;ue<Y.length;ue+=1)Y[ue]&&Y[ue].m(T,null);zr(T,t[3],!0),P=!0,M||(R=pe(T,"change",t[9]),M=!0)},p(V,[W]){const ue={};!s&&W&16&&(s=!0,ue.avatar=V[4],de(()=>s=!1)),r.$set(ue);const oe={};!l&&W&1&&(l=!0,oe.value=V[0],de(()=>l=!1)),o.$set(oe);const ne={};!c&&W&2&&(c=!0,ne.value=V[1],de(()=>c=!1)),u.$set(ne);const ie={};if(!m&&W&4&&(m=!0,ie.value=V[2],de(()=>m=!1)),h.$set(ie),W&0){U=Object.keys(Nn);let ce;for(ce=0;ce<U.length;ce+=1){const J=Lh(V,U,ce);Y[ce]?Y[ce].p(J,W):(Y[ce]=Mh(J),Y[ce].c(),Y[ce].m(T,null))}for(;ce<Y.length;ce+=1)Y[ce].d(1);Y.length=U.length}W&8&&zr(T,V[3])},i(V){P||($(r.$$.fragment,V),$(o.$$.fragment,V),$(u.$$.fragment,V),$(h.$$.fragment,V),P=!0)},o(V){C(r.$$.fragment,V),C(o.$$.fragment,V),C(u.$$.fragment,V),C(h.$$.fragment,V),P=!1},d(V){V&&d(e),H(r),H(o),H(u),H(h),pn(Y,V),M=!1,R()}}}function T$(t,e,n){let{name:r,nin:s,contact:i,roleVal:o,avatar:l}=e;function a(m){l=m,n(4,l)}function u(m){r=m,n(0,r)}function c(m){s=m,n(1,s)}function f(m){i=m,n(2,i)}function h(){o=Cl(this),n(3,o)}return t.$$set=m=>{"name"in m&&n(0,r=m.name),"nin"in m&&n(1,s=m.nin),"contact"in m&&n(2,i=m.contact),"roleVal"in m&&n(3,o=m.roleVal),"avatar"in m&&n(4,l=m.avatar)},[r,s,i,o,l,a,u,c,f,h]}class k$ extends De{constructor(e){super(),Ae(this,e,T$,I$,$e,{name:0,nin:1,contact:2,roleVal:3,avatar:4})}}const S$=(t,e)=>zn(wn,"business",t,"team",e);async function D$(t,e,n){try{let r=await Io(e),s=Ao();console.log(t,s,n),n.memberId=s,n.memberUrl=r;try{await aa(S$(t,s),n),tn("s","Team member added")}catch(i){tn("d","Error Occured Try again"),console.log(i)}}catch(r){console.log(r),tn("d","Error Occured Try again")}}async function A$(t){let e="business/"+t+"/team";await uc(e,t,Ml)}function Uh(t,e,n){const r=t.slice();return r[19]=e[n],r}function $$(t){let e,n,r,s;const i=[C$,R$],o=[];function l(a,u){return a[1]?0:1}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ee()},l(a){n.l(a),r=Ee()},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,u){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}function N$(t){let e,n,r,s,i,o,l,a,u=t[9],c=[];for(let h=0;h<u.length;h+=1)c[h]=Vh(Uh(t,u,h));const f=h=>C(c[h],1,1,()=>{c[h]=null});return{c(){e=y("div"),n=y("div"),r=B(`Will this member need to\r
				`),s=y("p"),i=B("access to the platform?"),o=D(),l=y("div");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=w(h,"DIV",{class:!0});var m=b(e);n=w(m,"DIV",{class:!0});var g=b(n);r=j(g,`Will this member need to\r
				`),s=w(g,"P",{});var _=b(s);i=j(_,"access to the platform?"),_.forEach(d),g.forEach(d),o=A(m),l=w(m,"DIV",{class:!0});var v=b(l);for(let I=0;I<c.length;I+=1)c[I].l(v);v.forEach(d),m.forEach(d),this.h()},h(){E(n,"class","text-center"),E(l,"class","flex justify-evenly py-5"),E(e,"class","p-5")},m(h,m){N(h,e,m),p(e,n),p(n,r),p(n,s),p(s,i),p(e,o),p(e,l);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(l,null);a=!0},p(h,m){if(m&770){u=h[9];let g;for(g=0;g<u.length;g+=1){const _=Uh(h,u,g);c[g]?(c[g].p(_,m),$(c[g],1)):(c[g]=Vh(_),c[g].c(),$(c[g],1),c[g].m(l,null))}for(He(),g=u.length;g<c.length;g+=1)f(g);ze()}},i(h){if(!a){for(let m=0;m<u.length;m+=1)$(c[m]);a=!0}},o(h){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)C(c[m]);a=!1},d(h){h&&d(e),pn(c,h)}}}function R$(t){let e,n,r,s,i,o,l;function a(g){t[11](g)}function u(g){t[12](g)}function c(g){t[13](g)}function f(g){t[14](g)}function h(g){t[15](g)}let m={};return t[2]!==void 0&&(m.name=t[2]),t[3]!==void 0&&(m.nin=t[3]),t[4]!==void 0&&(m.contact=t[4]),t[5]!==void 0&&(m.roleVal=t[5]),t[6]!==void 0&&(m.avatar=t[6]),e=new k$({props:m}),fe.push(()=>he(e,"name",a)),fe.push(()=>he(e,"nin",u)),fe.push(()=>he(e,"contact",c)),fe.push(()=>he(e,"roleVal",f)),fe.push(()=>he(e,"avatar",h)),{c(){x(e.$$.fragment)},l(g){G(e.$$.fragment,g)},m(g,_){q(e,g,_),l=!0},p(g,_){const v={};!n&&_&4&&(n=!0,v.name=g[2],de(()=>n=!1)),!r&&_&8&&(r=!0,v.nin=g[3],de(()=>r=!1)),!s&&_&16&&(s=!0,v.contact=g[4],de(()=>s=!1)),!i&&_&32&&(i=!0,v.roleVal=g[5],de(()=>i=!1)),!o&&_&64&&(o=!0,v.avatar=g[6],de(()=>o=!1)),e.$set(v)},i(g){l||($(e.$$.fragment,g),l=!0)},o(g){C(e.$$.fragment,g),l=!1},d(g){H(e,g)}}}function C$(t){let e,n;return e=new r_({}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p:_e,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function Vh(t){let e,n,r,s;function i(){return t[10](t[19])}return e=new Yt({props:{click:i,danger:t[19].state,title:t[19].title}}),{c(){x(e.$$.fragment),n=D(),r=y("div")},l(o){G(e.$$.fragment,o),n=A(o),r=w(o,"DIV",{}),b(r).forEach(d)},m(o,l){q(e,o,l),N(o,n,l),N(o,r,l),s=!0},p(o,l){t=o;const a={};l&2&&(a.click=i),e.$set(a)},i(o){s||($(e.$$.fragment,o),s=!0)},o(o){C(e.$$.fragment,o),s=!1},d(o){H(e,o),o&&d(n),o&&d(r)}}}function O$(t){let e,n,r,s;const i=[N$,$$],o=[];function l(a,u){return a[0]==1?0:a[0]==2?1:-1}return~(e=l(t))&&(n=o[e]=i[e](t)),{c(){n&&n.c(),r=Ee()},l(a){n&&n.l(a),r=Ee()},m(a,u){~e&&o[e].m(a,u),N(a,r,u),s=!0},p(a,u){let c=e;e=l(a),e===c?~e&&o[e].p(a,u):(n&&(He(),C(o[c],1,1,()=>{o[c]=null}),ze()),~e?(n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r)):n=null)},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){~e&&o[e].d(a),a&&d(r)}}}function P$(t){let e,n;return e=new Xs({props:{createTitle:"Save Customer",title:"Add Team member ✜",modalTitle:"Team member",nextButton:t[0]<2,nextFunc:t[16],close:t[17],action:t[18],$$slots:{default:[O$]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.nextButton=r[0]<2),s&1&&(i.close=r[17]),s&252&&(i.action=r[18]),s&4194431&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function L$(t,e,n){let r;Ge(t,rn,M=>n(7,r=M));let s=1;function i(){n(0,s++,s),n(0,s=s<=2?s:1)}let o=[{state:!0,title:"Yes, they will."},{state:!1,title:"No, they won't."}],l;Nr(M=>{n(1,l=void 0)});let a,u,c,f,h;const m=M=>{n(1,l=M.state),i()};function g(M){a=M,n(2,a)}function _(M){u=M,n(3,u)}function v(M){c=M,n(4,c)}function I(M){f=M,n(5,f)}function k(M){h=M,n(6,h)}return[s,l,a,u,c,f,h,r,i,o,m,g,_,v,I,k,()=>i(),()=>n(0,s=1),()=>D$(r.BusinessId,{avatar:h,businessName:r.name,name:a},{name:a,nin:u,contact:c,roleVal:f})]}class M$ extends De{constructor(e){super(),Ae(this,e,L$,P$,$e,{})}}function U$(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P,M,R;return s=new gn({props:{src:t[1].memberUrl??"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Uganda_-_Ruwenzori_Mountain_Lady.jpg/330px-Uganda_-_Ruwenzori_Mountain_Lady.jpg",size:2}}),l=new va({props:{name:t[1].name}}),m=new Wt({props:{title:"Role",data:t[1].roleVal}}),_=new Wt({props:{title:"Nin number",data:t[1].nin}}),I=new Wt({props:{title:"Phone Number",data:t[1].contact}}),S=new Wt({props:{title:"Customers Onboarded",data:JSON.stringify(t[2].length)}}),M=new Yt({props:{title:"Go back",danger:!1,click:t[4]}}),{c(){e=y("div"),n=y("div"),r=y("div"),x(s.$$.fragment),i=D(),o=y("div"),x(l.$$.fragment),a=D(),u=y("div"),c=y("span"),f=B("Personal details"),h=D(),x(m.$$.fragment),g=D(),x(_.$$.fragment),v=D(),x(I.$$.fragment),k=D(),x(S.$$.fragment),T=D(),P=y("div"),x(M.$$.fragment),this.h()},l(O){e=w(O,"DIV",{class:!0});var F=b(e);n=w(F,"DIV",{class:!0});var L=b(n);r=w(L,"DIV",{class:!0});var Q=b(r);G(s.$$.fragment,Q),Q.forEach(d),i=A(L),o=w(L,"DIV",{class:!0});var te=b(o);G(l.$$.fragment,te),te.forEach(d),a=A(L),u=w(L,"DIV",{class:!0});var re=b(u);c=w(re,"SPAN",{class:!0});var z=b(c);f=j(z,"Personal details"),z.forEach(d),re.forEach(d),h=A(L),G(m.$$.fragment,L),g=A(L),G(_.$$.fragment,L),v=A(L),G(I.$$.fragment,L),k=A(L),G(S.$$.fragment,L),T=A(L),P=w(L,"DIV",{class:!0});var K=b(P);G(M.$$.fragment,K),K.forEach(d),L.forEach(d),F.forEach(d),this.h()},h(){E(r,"class","flex justify-center "),E(o,"class","flex justify-center pt-1"),E(c,"class","text-sm text-gray-500 "),E(u,"class","pt-5"),E(P,"class","flex justify-center"),E(n,"class","border shadow-2xl w-80 rounded-3xl p-8 "),E(e,"class","flex justify-center pt-7")},m(O,F){N(O,e,F),p(e,n),p(n,r),q(s,r,null),p(n,i),p(n,o),q(l,o,null),p(n,a),p(n,u),p(u,c),p(c,f),p(n,h),q(m,n,null),p(n,g),q(_,n,null),p(n,v),q(I,n,null),p(n,k),q(S,n,null),p(n,T),p(n,P),q(M,P,null),R=!0},p(O,[F]){const L={};F&2&&(L.src=O[1].memberUrl??"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Uganda_-_Ruwenzori_Mountain_Lady.jpg/330px-Uganda_-_Ruwenzori_Mountain_Lady.jpg"),s.$set(L);const Q={};F&2&&(Q.name=O[1].name),l.$set(Q);const te={};F&2&&(te.data=O[1].roleVal),m.$set(te);const re={};F&2&&(re.data=O[1].nin),_.$set(re);const z={};F&2&&(z.data=O[1].contact),I.$set(z);const K={};F&4&&(K.data=JSON.stringify(O[2].length)),S.$set(K);const U={};F&1&&(U.click=O[4]),M.$set(U)},i(O){R||($(s.$$.fragment,O),$(l.$$.fragment,O),$(m.$$.fragment,O),$(_.$$.fragment,O),$(I.$$.fragment,O),$(S.$$.fragment,O),$(M.$$.fragment,O),R=!0)},o(O){C(s.$$.fragment,O),C(l.$$.fragment,O),C(m.$$.fragment,O),C(_.$$.fragment,O),C(I.$$.fragment,O),C(S.$$.fragment,O),C(M.$$.fragment,O),R=!1},d(O){O&&d(e),H(s),H(l),H(m),H(_),H(I),H(S),H(M)}}}function V$(t,e,n){let r,s;Ge(t,Ys,a=>n(3,s=a));let{data:i,isDetail:o}=e;console.log(i.name);const l=()=>{n(0,o=!1)};return t.$$set=a=>{"data"in a&&n(1,i=a.data),"isDetail"in a&&n(0,o=a.isDetail)},t.$$.update=()=>{t.$$.dirty&10&&n(2,r=s.value.filter(a=>a.data.fieldAgent?.toLowerCase().includes(i.name.toLowerCase())))},[o,i,r,s,l]}class F$ extends De{constructor(e){super(),Ae(this,e,V$,U$,$e,{data:1,isDetail:0})}}function Fh(t,e,n){const r=t.slice();return r[7]=e[n],r}function B$(t){let e,n,r,s,i;r=new Qg({props:{data:"",click:q$,role:t[2].role,src:"https://images.unsplash.com/photo-1605980776566-0486c3ac7617?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8YmxhY2slMjBwZXJzb258ZW58MHx8MHx8&w=1000&q=80",name:t[2].name}});let o=t[3].value!=null&&Bh(t);return{c(){e=y("div"),n=y("div"),x(r.$$.fragment),s=D(),o&&o.c(),this.h()},l(l){e=w(l,"DIV",{class:!0});var a=b(e);n=w(a,"DIV",{class:!0});var u=b(n);G(r.$$.fragment,u),s=A(u),o&&o.l(u),u.forEach(d),a.forEach(d),this.h()},h(){E(n,"class","pl-10 "),E(e,"class","flex justify-center")},m(l,a){N(l,e,a),p(e,n),q(r,n,null),p(n,s),o&&o.m(n,null),i=!0},p(l,a){const u={};a&4&&(u.role=l[2].role),a&4&&(u.name=l[2].name),r.$set(u),l[3].value!=null?o?(o.p(l,a),a&8&&$(o,1)):(o=Bh(l),o.c(),$(o,1),o.m(n,null)):o&&(He(),C(o,1,1,()=>{o=null}),ze())},i(l){i||($(r.$$.fragment,l),$(o),i=!0)},o(l){C(r.$$.fragment,l),C(o),i=!1},d(l){l&&d(e),H(r),o&&o.d()}}}function j$(t){let e,n,r,s;function i(a){t[4](a)}function o(a){t[5](a)}let l={};return t[0]!==void 0&&(l.isDetail=t[0]),t[1]!==void 0&&(l.data=t[1]),e=new F$({props:l}),fe.push(()=>he(e,"isDetail",i)),fe.push(()=>he(e,"data",o)),{c(){x(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,u){q(e,a,u),s=!0},p(a,u){const c={};!n&&u&1&&(n=!0,c.isDetail=a[0],de(()=>n=!1)),!r&&u&2&&(r=!0,c.data=a[1],de(()=>r=!1)),e.$set(c)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){C(e.$$.fragment,a),s=!1},d(a){H(e,a)}}}function Bh(t){let e,n,r=t[3].value,s=[];for(let o=0;o<r.length;o+=1)s[o]=jh(Fh(t,r,o));const i=o=>C(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ee()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=Ee()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);N(o,e,l),n=!0},p(o,l){if(l&11){r=o[3].value;let a;for(a=0;a<r.length;a+=1){const u=Fh(o,r,a);s[a]?(s[a].p(u,l),$(s[a],1)):(s[a]=jh(u),s[a].c(),$(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=r.length;a<s.length;a+=1)i(a);ze()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)$(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)C(s[l]);n=!1},d(o){pn(s,o),o&&d(e)}}}function jh(t){let e,n;function r(){return t[6](t[7])}return e=new Qg({props:{click:r,role:t[7].data.roleVal,src:t[7].data?.memberUrl??"https://images.unsplash.com/photo-1605980776566-0486c3ac7617?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8YmxhY2slMjBwZXJzb258ZW58MHx8MHx8&w=1000&q=80",name:t[7].data.name}}),{c(){x(e.$$.fragment)},l(s){G(e.$$.fragment,s)},m(s,i){q(e,s,i),n=!0},p(s,i){t=s;const o={};i&11&&(o.click=r),i&8&&(o.role=t[7].data.roleVal),i&8&&(o.src=t[7].data?.memberUrl??"https://images.unsplash.com/photo-1605980776566-0486c3ac7617?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8YmxhY2slMjBwZXJzb258ZW58MHx8MHx8&w=1000&q=80"),i&8&&(o.name=t[7].data.name),e.$set(o)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){C(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function x$(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v;r=new Rn({props:{title:"Team 💪"}}),f=new M$({});const I=[j$,B$],k=[];function S(T,P){return T[0]?0:1}return m=S(t),g=k[m]=I[m](t),{c(){e=y("div"),n=y("div"),x(r.$$.fragment),s=D(),i=y("div"),o=y("div"),l=y("h3"),a=B("You can change your team roles here."),u=D(),c=y("div"),x(f.$$.fragment),h=D(),g.c(),_=Ee(),this.h()},l(T){e=w(T,"DIV",{class:!0});var P=b(e);n=w(P,"DIV",{class:!0});var M=b(n);G(r.$$.fragment,M),M.forEach(d),s=A(P),i=w(P,"DIV",{class:!0});var R=b(i);o=w(R,"DIV",{class:!0});var O=b(o);l=w(O,"H3",{});var F=b(l);a=j(F,"You can change your team roles here."),F.forEach(d),O.forEach(d),R.forEach(d),u=A(P),c=w(P,"DIV",{class:!0});var L=b(c);G(f.$$.fragment,L),L.forEach(d),P.forEach(d),h=A(T),g.l(T),_=Ee(),this.h()},h(){E(n,"class","flex justify-center pb-2"),E(o,"class","bg-slate-100"),E(i,"class","flex justify-center "),E(c,"class","flex justify-center mt-3"),E(e,"class","pb-1")},m(T,P){N(T,e,P),p(e,n),q(r,n,null),p(e,s),p(e,i),p(i,o),p(o,l),p(l,a),p(e,u),p(e,c),q(f,c,null),N(T,h,P),k[m].m(T,P),N(T,_,P),v=!0},p(T,[P]){let M=m;m=S(T),m===M?k[m].p(T,P):(He(),C(k[M],1,1,()=>{k[M]=null}),ze(),g=k[m],g?g.p(T,P):(g=k[m]=I[m](T),g.c()),$(g,1),g.m(_.parentNode,_))},i(T){v||($(r.$$.fragment,T),$(f.$$.fragment,T),$(g),v=!0)},o(T){C(r.$$.fragment,T),C(f.$$.fragment,T),C(g),v=!1},d(T){T&&d(e),H(r),H(f),T&&d(h),k[m].d(T),T&&d(_)}}}const q$=()=>{};function H$(t,e,n){let r,s;Ge(t,dn,c=>n(2,r=c)),Ge(t,Ml,c=>n(3,s=c));let i=!1,o;function l(c){i=c,n(0,i)}function a(c){o=c,n(1,o)}return[i,o,r,s,l,a,c=>{n(0,i=!0),n(1,o=c.data)}]}class z$ extends De{constructor(e){super(),Ae(this,e,H$,x$,$e,{})}}function xh(t,e,n){const r=t.slice();return r[4]=e[n],r}function qh(t){let e,n,r,s;function i(){return t[3](t[4])}return n=new b_({props:{click:i,title:t[4].name,isActive:t[1].pageName==t[4].name}}),{c(){e=y("li"),x(n.$$.fragment),r=D(),this.h()},l(o){e=w(o,"LI",{class:!0});var l=b(e);G(n.$$.fragment,l),r=A(l),l.forEach(d),this.h()},h(){E(e,"class","relative svelte-58x4x0")},m(o,l){N(o,e,l),q(n,e,null),p(e,r),s=!0},p(o,l){t=o;const a={};l&2&&(a.isActive=t[1].pageName==t[4].name),n.$set(a)},i(o){s||($(n.$$.fragment,o),s=!0)},o(o){C(n.$$.fragment,o),s=!1},d(o){o&&d(e),H(n)}}}function K$(t){let e,n,r,s,i,o=t[0].name+"",l,a,u,c,f,h,m,g;r=new W_({props:{title:"Micro Finance Manager"}});let _=t[2],v=[];for(let k=0;k<_.length;k+=1)v[k]=qh(xh(t,_,k));const I=k=>C(v[k],1,1,()=>{v[k]=null});return{c(){e=y("aside"),n=y("div"),x(r.$$.fragment),s=D(),i=y("h1"),l=B(o),a=D(),u=y("div"),c=y("ul");for(let k=0;k<v.length;k+=1)v[k].c();f=D(),h=y("h1"),m=B("CLIQ MINI SERVICE"),this.h()},l(k){e=w(k,"ASIDE",{class:!0});var S=b(e);n=w(S,"DIV",{class:!0});var T=b(n);G(r.$$.fragment,T),s=A(T),i=w(T,"H1",{style:!0,class:!0});var P=b(i);l=j(P,o),P.forEach(d),T.forEach(d),a=A(S),u=w(S,"DIV",{class:!0});var M=b(u);c=w(M,"UL",{class:!0});var R=b(c);for(let F=0;F<v.length;F+=1)v[F].l(R);R.forEach(d),M.forEach(d),f=A(S),h=w(S,"H1",{style:!0,class:!0});var O=b(h);m=j(O,"CLIQ MINI SERVICE"),O.forEach(d),S.forEach(d),this.h()},h(){ht(i,"text-transform","capitalize"),E(i,"class","text-slate-300 text-sm"),E(n,"class","text-center"),E(c,"class","relative align-middle"),E(u,"class","mt-5"),ht(h,"position","fixed"),ht(h,"bottom","30px"),E(h,"class","text-slate-300 text-lg font-extrabold "),E(e,"class","w-80 fixed left-0 top-0 h-screen p-5 svelte-58x4x0")},m(k,S){N(k,e,S),p(e,n),q(r,n,null),p(n,s),p(n,i),p(i,l),p(e,a),p(e,u),p(u,c);for(let T=0;T<v.length;T+=1)v[T]&&v[T].m(c,null);p(e,f),p(e,h),p(h,m),g=!0},p(k,[S]){if((!g||S&1)&&o!==(o=k[0].name+"")&&me(l,o),S&6){_=k[2];let T;for(T=0;T<_.length;T+=1){const P=xh(k,_,T);v[T]?(v[T].p(P,S),$(v[T],1)):(v[T]=qh(P),v[T].c(),$(v[T],1),v[T].m(c,null))}for(He(),T=_.length;T<v.length;T+=1)I(T);ze()}},i(k){if(!g){$(r.$$.fragment,k);for(let S=0;S<_.length;S+=1)$(v[S]);g=!0}},o(k){C(r.$$.fragment,k),v=v.filter(Boolean);for(let S=0;S<v.length;S+=1)C(v[S]);g=!1},d(k){k&&d(e),H(r),pn(v,k)}}}function G$(t,e,n){let r,s;Ge(t,rn,l=>n(0,r=l)),Ge(t,To,l=>n(1,s=l));let i=[{name:"Customers 😊",data:_D},{name:"Loans Issued 🤝",data:rA},{name:"Teams 💪",data:z$},{name:"Receipts / Reports 🧾",data:GA},{name:"Settings ⚙️",data:E$}];return Nr(l=>{bc(i[0].name,i[0].data)}),[r,s,i,l=>bc(l.name,l.data)]}class W$ extends De{constructor(e){super(),Ae(this,e,G$,K$,$e,{})}}function Q$(t){let e,n,r;var s=t[0].data;function i(o){return{}}return s&&(e=hc(s,i())),{c(){e&&x(e.$$.fragment),n=Ee()},l(o){e&&G(e.$$.fragment,o),n=Ee()},m(o,l){e&&q(e,o,l),N(o,n,l),r=!0},p(o,[l]){if(l&1&&s!==(s=o[0].data)){if(e){He();const a=e;C(a.$$.fragment,1,0,()=>{H(a,1)}),ze()}s?(e=hc(s,i()),x(e.$$.fragment),$(e.$$.fragment,1),q(e,n.parentNode,n)):e=null}},i(o){r||(e&&$(e.$$.fragment,o),r=!0)},o(o){e&&C(e.$$.fragment,o),r=!1},d(o){o&&d(n),e&&H(e,o)}}}function Y$(t,e,n){let r;return Ge(t,To,s=>n(0,r=s)),[r]}class X$ extends De{constructor(e){super(),Ae(this,e,Y$,Q$,$e,{})}}function J$(t){let e,n,r,s,i,o,l,a,u,c;return{c(){e=y("div"),n=B("We are working on "),r=y("break"),s=B("the smaller screen versions"),i=D(),o=y("div"),l=B("Please use a computer"),a=D(),u=y("h1"),c=B("CLIQ MINI SERVICE"),this.h()},l(f){e=w(f,"DIV",{class:!0});var h=b(e);n=j(h,"We are working on "),r=w(h,"BREAK",{});var m=b(r);s=j(m,"the smaller screen versions"),m.forEach(d),i=A(h),o=w(h,"DIV",{class:!0});var g=b(o);l=j(g,"Please use a computer"),g.forEach(d),h.forEach(d),a=A(f),u=w(f,"H1",{style:!0,class:!0});var _=b(u);c=j(_,"CLIQ MINI SERVICE"),_.forEach(d),this.h()},h(){E(o,"class","text-sm font-medium pt-5 "),E(e,"class","text-xl font-bold px-20 py-40 "),ht(u,"position","fixed"),ht(u,"bottom","30px"),E(u,"class","text-slate-300 text-lg font-extrabold ")},m(f,h){N(f,e,h),p(e,n),p(e,r),p(r,s),p(e,i),p(e,o),p(o,l),N(f,a,h),N(f,u,h),p(u,c)},p:_e,i:_e,o:_e,d(f){f&&d(e),f&&d(a),f&&d(u)}}}class Z$ extends De{constructor(e){super(),Ae(this,e,null,J$,$e,{})}}function eN(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P,M;return{c(){e=y("footer"),n=y("div"),r=y("div"),s=y("div"),i=y("span"),o=B("Contact us!"),l=D(),a=y("div"),u=y("span"),c=B("Email: philip.mugz@yahoo.com"),f=D(),h=y("div"),m=y("span"),g=B("Phone: +256 780293440"),_=D(),v=y("div"),I=y("span"),k=B("WhatsApp: +256 780293440"),S=D(),T=y("span"),P=B("Do more with less!"),this.h()},l(R){e=w(R,"FOOTER",{class:!0});var O=b(e);n=w(O,"DIV",{class:!0});var F=b(n);r=w(F,"DIV",{});var L=b(r);s=w(L,"DIV",{});var Q=b(s);i=w(Q,"SPAN",{class:!0});var te=b(i);o=j(te,"Contact us!"),te.forEach(d),Q.forEach(d),l=A(L),a=w(L,"DIV",{});var re=b(a);u=w(re,"SPAN",{});var z=b(u);c=j(z,"Email: philip.mugz@yahoo.com"),z.forEach(d),re.forEach(d),f=A(L),h=w(L,"DIV",{});var K=b(h);m=w(K,"SPAN",{});var U=b(m);g=j(U,"Phone: +256 780293440"),U.forEach(d),K.forEach(d),_=A(L),v=w(L,"DIV",{});var Y=b(v);I=w(Y,"SPAN",{});var V=b(I);k=j(V,"WhatsApp: +256 780293440"),V.forEach(d),Y.forEach(d),L.forEach(d),S=A(F),T=w(F,"SPAN",{class:!0});var W=b(T);P=j(W,"Do more with less!"),W.forEach(d),F.forEach(d),O.forEach(d),this.h()},h(){E(i,"class","font-bold text-slate-600 underline"),E(T,"class","text-5xl text-slate-200 font-bold "),E(n,"class",M=(t[0].size>700?"flex justify-evenly":"")+" rounded py-20 border-t-2"),E(e,"class","pt-20")},m(R,O){N(R,e,O),p(e,n),p(n,r),p(r,s),p(s,i),p(i,o),p(r,l),p(r,a),p(a,u),p(u,c),p(r,f),p(r,h),p(h,m),p(m,g),p(r,_),p(r,v),p(v,I),p(I,k),p(n,S),p(n,T),p(T,P)},p(R,[O]){O&1&&M!==(M=(R[0].size>700?"flex justify-evenly":"")+" rounded py-20 border-t-2")&&E(n,"class",M)},i:_e,o:_e,d(R){R&&d(e)}}}function tN(t,e,n){let r;return Ge(t,rs,s=>n(0,r=s)),[r]}class nN extends De{constructor(e){super(),Ae(this,e,tN,eN,$e,{})}}function rN(t){let e,n;return{c(){e=y("span"),n=B("Sign In"),this.h()},l(r){e=w(r,"SPAN",{class:!0});var s=b(e);n=j(s,"Sign In"),s.forEach(d),this.h()},h(){E(e,"class","flex justify-center border px-5 py-2 mt-5 bg-gray-400 text-gray-500 rounded-full")},m(r,s){N(r,e,s),p(e,n)},p:_e,d(r){r&&d(e)}}}function sN(t){let e,n,r,s;return{c(){e=y("span"),n=B("Sign In"),this.h()},l(i){e=w(i,"SPAN",{class:!0});var o=b(e);n=j(o,"Sign In"),o.forEach(d),this.h()},h(){E(e,"class","flex justify-center border px-5 py-2 mt-5 bg-blue-500 text-white rounded-full hover:bg-blue-600")},m(i,o){N(i,e,o),p(e,n),r||(s=[pe(e,"keypress",t[2]),pe(e,"click",t[5])],r=!0)},p:_e,d(i){i&&d(e),r=!1,lt(s)}}}function iN(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v;function I(O){t[3](O)}let k={placeholder:"Input your email"};t[0]!==void 0&&(k.value=t[0]),i=new Zt({props:k}),fe.push(()=>he(i,"value",I));function S(O){t[4](O)}let T={placeholder:"Input your password"};t[1]!==void 0&&(T.value=t[1]),h=new Zt({props:T}),fe.push(()=>he(h,"value",S));function P(O,F){return O[0]&&O[1].length>6&&O[1].length>6?sN:rN}let M=P(t),R=M(t);return{c(){e=y("div"),n=y("span"),r=B("Email"),s=D(),x(i.$$.fragment),l=D(),a=y("div"),u=y("span"),c=B("Password"),f=D(),x(h.$$.fragment),g=D(),R.c(),_=Ee(),this.h()},l(O){e=w(O,"DIV",{});var F=b(e);n=w(F,"SPAN",{class:!0});var L=b(n);r=j(L,"Email"),L.forEach(d),s=A(F),G(i.$$.fragment,F),F.forEach(d),l=A(O),a=w(O,"DIV",{});var Q=b(a);u=w(Q,"SPAN",{class:!0});var te=b(u);c=j(te,"Password"),te.forEach(d),f=A(Q),G(h.$$.fragment,Q),Q.forEach(d),g=A(O),R.l(O),_=Ee(),this.h()},h(){E(n,"class","text-sm"),E(u,"class","text-sm")},m(O,F){N(O,e,F),p(e,n),p(n,r),p(e,s),q(i,e,null),N(O,l,F),N(O,a,F),p(a,u),p(u,c),p(a,f),q(h,a,null),N(O,g,F),R.m(O,F),N(O,_,F),v=!0},p(O,[F]){const L={};!o&&F&1&&(o=!0,L.value=O[0],de(()=>o=!1)),i.$set(L);const Q={};!m&&F&2&&(m=!0,Q.value=O[1],de(()=>m=!1)),h.$set(Q),M===(M=P(O))&&R?R.p(O,F):(R.d(1),R=M(O),R&&(R.c(),R.m(_.parentNode,_)))},i(O){v||($(i.$$.fragment,O),$(h.$$.fragment,O),v=!0)},o(O){C(i.$$.fragment,O),C(h.$$.fragment,O),v=!1},d(O){O&&d(e),H(i),O&&d(l),O&&d(a),H(h),O&&d(g),R.d(O),O&&d(_)}}}function oN(t,e,n){let{email:r,password:s}=e;function i(u){ot.call(this,t,u)}function o(u){r=u,n(0,r)}function l(u){s=u,n(1,s)}const a=()=>r$(r,s);return t.$$set=u=>{"email"in u&&n(0,r=u.email),"password"in u&&n(1,s=u.password)},[r,s,i,o,l,a]}class aN extends De{constructor(e){super(),Ae(this,e,oN,iN,$e,{email:0,password:1})}}function lN(t,e,n){tk({email:t,password:e,data:n},"/signUp").then(r=>{ko.update(s=>({status:r.data.status,code:r.data.code})),r.data.status==200?(dn.update(s=>r.data.user),rn.update(s=>r.data.business)):alert("Error "+r.data.status+" "+r.data.data)})}function Hh(t){let e,n,r,s,i,o,l;function a(c){t[10](c)}let u={type:"text",placeholder:"Input your userName"};return t[3]!==void 0&&(u.value=t[3]),i=new Zt({props:u}),fe.push(()=>he(i,"value",a)),{c(){e=y("div"),n=y("span"),r=B("Name"),s=D(),x(i.$$.fragment),this.h()},l(c){e=w(c,"DIV",{});var f=b(e);n=w(f,"SPAN",{class:!0});var h=b(n);r=j(h,"Name"),h.forEach(d),s=A(f),G(i.$$.fragment,f),f.forEach(d),this.h()},h(){E(n,"class","text-sm")},m(c,f){N(c,e,f),p(e,n),p(n,r),p(e,s),q(i,e,null),l=!0},p(c,f){const h={};!o&&f&8&&(o=!0,h.value=c[3],de(()=>o=!1)),i.$set(h)},i(c){l||($(i.$$.fragment,c),l=!0)},o(c){C(i.$$.fragment,c),l=!1},d(c){c&&d(e),H(i)}}}function uN(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P,M,R,O,F,L,Q,te,re,z,K,U,Y,V,W,ue,oe,ne,ie,ce,J;function we(Z){t[7](Z)}let be={type:"text",placeholder:"Please input your name."};t[3]!==void 0&&(be.value=t[3]),i=new Zt({props:be}),fe.push(()=>he(i,"value",we));function ye(Z){t[8](Z)}let ve={type:"name",placeholder:"What's you business name?"};t[4]!==void 0&&(ve.value=t[4]),h=new Zt({props:ve}),fe.push(()=>he(h,"value",ye));function nt(Z){t[9](Z)}let Oe={type:"email",placeholder:"Input your email"};t[0]!==void 0&&(Oe.value=t[0]),S=new Zt({props:Oe}),fe.push(()=>he(S,"value",nt));let Re=t[5].pageName=="collab"&&Hh(t);function st(Z){t[11](Z)}let Pe={placeholder:"Input your password"};t[1]!==void 0&&(Pe.value=t[1]),Q=new Zt({props:Pe}),fe.push(()=>he(Q,"value",st));function Ce(Z){t[12](Z)}let Me={placeholder:"Confirm your password"};return t[2]!==void 0&&(Me.value=t[2]),V=new Zt({props:Me}),fe.push(()=>he(V,"value",Ce)),{c(){e=y("div"),n=y("span"),r=B("Name"),s=D(),x(i.$$.fragment),l=D(),a=y("div"),u=y("span"),c=B("Business Name"),f=D(),x(h.$$.fragment),g=D(),_=y("div"),v=y("span"),I=B("Email"),k=D(),x(S.$$.fragment),P=D(),Re&&Re.c(),M=D(),R=y("div"),O=y("span"),F=B("Password"),L=D(),x(Q.$$.fragment),re=D(),z=y("div"),K=y("span"),U=B("Confirm Password"),Y=D(),x(V.$$.fragment),ue=D(),oe=y("span"),ne=B("Sign Up"),this.h()},l(Z){e=w(Z,"DIV",{});var Te=b(e);n=w(Te,"SPAN",{class:!0});var Je=b(n);r=j(Je,"Name"),Je.forEach(d),s=A(Te),G(i.$$.fragment,Te),Te.forEach(d),l=A(Z),a=w(Z,"DIV",{});var Ke=b(a);u=w(Ke,"SPAN",{class:!0});var X=b(u);c=j(X,"Business Name"),X.forEach(d),f=A(Ke),G(h.$$.fragment,Ke),Ke.forEach(d),g=A(Z),_=w(Z,"DIV",{});var ge=b(_);v=w(ge,"SPAN",{class:!0});var et=b(v);I=j(et,"Email"),et.forEach(d),k=A(ge),G(S.$$.fragment,ge),ge.forEach(d),P=A(Z),Re&&Re.l(Z),M=A(Z),R=w(Z,"DIV",{});var Ye=b(R);O=w(Ye,"SPAN",{class:!0});var it=b(O);F=j(it,"Password"),it.forEach(d),L=A(Ye),G(Q.$$.fragment,Ye),Ye.forEach(d),re=A(Z),z=w(Z,"DIV",{});var rt=b(z);K=w(rt,"SPAN",{class:!0});var ae=b(K);U=j(ae,"Confirm Password"),ae.forEach(d),Y=A(rt),G(V.$$.fragment,rt),rt.forEach(d),ue=A(Z),oe=w(Z,"SPAN",{class:!0});var Fe=b(oe);ne=j(Fe,"Sign Up"),Fe.forEach(d),this.h()},h(){E(n,"class","text-sm"),E(u,"class","text-sm"),E(v,"class","text-sm"),E(O,"class","text-sm"),E(K,"class","text-sm"),E(oe,"class","flex justify-center border px-5 py-2 mt-5 bg-blue-500 text-white rounded-full hover:bg-blue-600")},m(Z,Te){N(Z,e,Te),p(e,n),p(n,r),p(e,s),q(i,e,null),N(Z,l,Te),N(Z,a,Te),p(a,u),p(u,c),p(a,f),q(h,a,null),N(Z,g,Te),N(Z,_,Te),p(_,v),p(v,I),p(_,k),q(S,_,null),N(Z,P,Te),Re&&Re.m(Z,Te),N(Z,M,Te),N(Z,R,Te),p(R,O),p(O,F),p(R,L),q(Q,R,null),N(Z,re,Te),N(Z,z,Te),p(z,K),p(K,U),p(z,Y),q(V,z,null),N(Z,ue,Te),N(Z,oe,Te),p(oe,ne),ie=!0,ce||(J=[pe(oe,"keypress",t[6]),pe(oe,"click",t[13])],ce=!0)},p(Z,[Te]){const Je={};!o&&Te&8&&(o=!0,Je.value=Z[3],de(()=>o=!1)),i.$set(Je);const Ke={};!m&&Te&16&&(m=!0,Ke.value=Z[4],de(()=>m=!1)),h.$set(Ke);const X={};!T&&Te&1&&(T=!0,X.value=Z[0],de(()=>T=!1)),S.$set(X),Z[5].pageName=="collab"?Re?(Re.p(Z,Te),Te&32&&$(Re,1)):(Re=Hh(Z),Re.c(),$(Re,1),Re.m(M.parentNode,M)):Re&&(He(),C(Re,1,1,()=>{Re=null}),ze());const ge={};!te&&Te&2&&(te=!0,ge.value=Z[1],de(()=>te=!1)),Q.$set(ge);const et={};!W&&Te&4&&(W=!0,et.value=Z[2],de(()=>W=!1)),V.$set(et)},i(Z){ie||($(i.$$.fragment,Z),$(h.$$.fragment,Z),$(S.$$.fragment,Z),$(Re),$(Q.$$.fragment,Z),$(V.$$.fragment,Z),ie=!0)},o(Z){C(i.$$.fragment,Z),C(h.$$.fragment,Z),C(S.$$.fragment,Z),C(Re),C(Q.$$.fragment,Z),C(V.$$.fragment,Z),ie=!1},d(Z){Z&&d(e),H(i),Z&&d(l),Z&&d(a),H(h),Z&&d(g),Z&&d(_),H(S),Z&&d(P),Re&&Re.d(Z),Z&&d(M),Z&&d(R),H(Q),Z&&d(re),Z&&d(z),H(V),Z&&d(ue),Z&&d(oe),ce=!1,lt(J)}}}function cN(t,e,n){let r;Ge(t,To,I=>n(5,r=I));let{email:s,pass:i,password:o,name:l}=e,a;function u(I){ot.call(this,t,I)}function c(I){l=I,n(3,l)}function f(I){a=I,n(4,a)}function h(I){s=I,n(0,s)}function m(I){l=I,n(3,l)}function g(I){i=I,n(1,i)}function _(I){o=I,n(2,o)}const v=()=>lN(s,o,{pgName:"signup",businessName:a,name:l});return t.$$set=I=>{"email"in I&&n(0,s=I.email),"pass"in I&&n(1,i=I.pass),"password"in I&&n(2,o=I.password),"name"in I&&n(3,l=I.name)},[s,i,o,l,a,r,u,c,f,h,m,g,_,v]}class fN extends De{constructor(e){super(),Ae(this,e,cN,uN,$e,{email:0,pass:1,password:2,name:3})}}function hN(t){let e,n,r,s,i,o,l,a,u,c,f,h,m,g,_,v,I,k,S,T,P,M,R,O,F,L,Q,te,re,z,K,U;const Y=[mN,pN],V=[];function W(ie,ce){return ie[0]=="signIn"?0:ie[0]=="signUp"?1:-1}~(L=W(t))&&(Q=V[L]=Y[L](t));function ue(ie,ce){if(ie[0]=="signIn")return _N;if(ie[0]=="signUp")return gN}let oe=ue(t),ne=oe&&oe(t);return{c(){e=y("div"),n=y("div"),r=y("div"),s=y("div"),i=B("CLIQ"),o=D(),l=y("div"),a=B("Business-Manager"),u=D(),c=y("div"),f=D(),h=y("div"),m=y("div"),g=y("div"),_=y("div"),v=y("span"),I=y("span"),k=B("Sign In"),T=D(),P=y("span"),M=y("span"),R=B("Sign Up"),F=D(),Q&&Q.c(),te=D(),re=y("div"),ne&&ne.c(),this.h()},l(ie){e=w(ie,"DIV",{class:!0});var ce=b(e);n=w(ce,"DIV",{class:!0});var J=b(n);r=w(J,"DIV",{class:!0});var we=b(r);s=w(we,"DIV",{class:!0});var be=b(s);i=j(be,"CLIQ"),be.forEach(d),o=A(we),l=w(we,"DIV",{class:!0});var ye=b(l);a=j(ye,"Business-Manager"),ye.forEach(d),we.forEach(d),u=A(J),c=w(J,"DIV",{class:!0}),b(c).forEach(d),J.forEach(d),ce.forEach(d),f=A(ie),h=w(ie,"DIV",{class:!0});var ve=b(h);m=w(ve,"DIV",{class:!0});var nt=b(m);g=w(nt,"DIV",{class:!0});var Oe=b(g);_=w(Oe,"DIV",{class:!0});var Re=b(_);v=w(Re,"SPAN",{class:!0});var st=b(v);I=w(st,"SPAN",{class:!0});var Pe=b(I);k=j(Pe,"Sign In"),Pe.forEach(d),st.forEach(d),T=A(Re),P=w(Re,"SPAN",{class:!0});var Ce=b(P);M=w(Ce,"SPAN",{class:!0});var Me=b(M);R=j(Me,"Sign Up"),Me.forEach(d),Ce.forEach(d),Re.forEach(d),F=A(Oe),Q&&Q.l(Oe),te=A(Oe),re=w(Oe,"DIV",{class:!0});var Z=b(re);ne&&ne.l(Z),Z.forEach(d),Oe.forEach(d),nt.forEach(d),ve.forEach(d),this.h()},h(){E(s,"class","flex justify-center"),E(l,"class","text-sm font-semibold "),E(r,"class","text-slate-800 "),E(c,"class","px-10 py-1 rounded-lg shadow-md shadow-b"),E(n,"class","mt-10 px-10 py-2 text-4xl font-bold"),E(e,"class","flex justify-center"),E(I,"class",""),E(v,"class",S=(t[0]=="signIn"?"isActive":"")+" flex justify-center border px-11 py-2 svelte-1pmm1qf"),E(M,"class",""),E(P,"class",O=(t[0]=="signUp"?"isActive":"")+" flex justify-center border px-11 py-2 svelte-1pmm1qf"),E(_,"class","flex justify-between"),E(re,"class","flex justify-center border rounded-lg m-10"),E(g,"class","cardBody space-y-5 border rounded-lg px-5 pt-5 pb-5 shadow svelte-1pmm1qf"),E(m,"class","mt-20"),E(h,"class","flex justify-center ")},m(ie,ce){N(ie,e,ce),p(e,n),p(n,r),p(r,s),p(s,i),p(r,o),p(r,l),p(l,a),p(n,u),p(n,c),N(ie,f,ce),N(ie,h,ce),p(h,m),p(m,g),p(g,_),p(_,v),p(v,I),p(I,k),p(_,T),p(_,P),p(P,M),p(M,R),p(g,F),~L&&V[L].m(g,null),p(g,te),p(g,re),ne&&ne.m(re,null),z=!0,K||(U=[pe(v,"keypress",t[8]),pe(v,"click",t[9]),pe(P,"keypress",t[7]),pe(P,"click",t[10])],K=!0)},p(ie,ce){(!z||ce&1&&S!==(S=(ie[0]=="signIn"?"isActive":"")+" flex justify-center border px-11 py-2 svelte-1pmm1qf"))&&E(v,"class",S),(!z||ce&1&&O!==(O=(ie[0]=="signUp"?"isActive":"")+" flex justify-center border px-11 py-2 svelte-1pmm1qf"))&&E(P,"class",O);let J=L;L=W(ie),L===J?~L&&V[L].p(ie,ce):(Q&&(He(),C(V[J],1,1,()=>{V[J]=null}),ze()),~L?(Q=V[L],Q?Q.p(ie,ce):(Q=V[L]=Y[L](ie),Q.c()),$(Q,1),Q.m(g,te)):Q=null),oe===(oe=ue(ie))&&ne?ne.p(ie,ce):(ne&&ne.d(1),ne=oe&&oe(ie),ne&&(ne.c(),ne.m(re,null)))},i(ie){z||($(Q),z=!0)},o(ie){C(Q),z=!1},d(ie){ie&&d(e),ie&&d(f),ie&&d(h),~L&&V[L].d(),ne&&ne.d(),K=!1,lt(U)}}}function dN(t){let e;return{c(){e=B("home")},l(n){e=j(n,"home")},m(n,r){N(n,e,r)},p:_e,i:_e,o:_e,d(n){n&&d(e)}}}function pN(t){let e,n,r,s;function i(a){t[13](a)}function o(a){t[14](a)}let l={};return t[1]!==void 0&&(l.email=t[1]),t[2]!==void 0&&(l.password=t[2]),e=new fN({props:l}),fe.push(()=>he(e,"email",i)),fe.push(()=>he(e,"password",o)),{c(){x(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,u){q(e,a,u),s=!0},p(a,u){const c={};!n&&u&2&&(n=!0,c.email=a[1],de(()=>n=!1)),!r&&u&4&&(r=!0,c.password=a[2],de(()=>r=!1)),e.$set(c)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){C(e.$$.fragment,a),s=!1},d(a){H(e,a)}}}function mN(t){let e,n,r,s;function i(a){t[11](a)}function o(a){t[12](a)}let l={};return t[1]!==void 0&&(l.email=t[1]),t[2]!==void 0&&(l.password=t[2]),e=new aN({props:l}),fe.push(()=>he(e,"email",i)),fe.push(()=>he(e,"password",o)),{c(){x(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,u){q(e,a,u),s=!0},p(a,u){const c={};!n&&u&2&&(n=!0,c.email=a[1],de(()=>n=!1)),!r&&u&4&&(r=!0,c.password=a[2],de(()=>r=!1)),e.$set(c)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){C(e.$$.fragment,a),s=!1},d(a){H(e,a)}}}function gN(t){let e,n,r,s;return{c(){e=y("span"),n=B("I already have an account."),this.h()},l(i){e=w(i,"SPAN",{class:!0});var o=b(e);n=j(o,"I already have an account."),o.forEach(d),this.h()},h(){E(e,"class","text-blue-600")},m(i,o){N(i,e,o),p(e,n),r||(s=[pe(e,"keypress",t[6]),pe(e,"click",t[16])],r=!0)},p:_e,d(i){i&&d(e),r=!1,lt(s)}}}function _N(t){let e,n,r,s;return{c(){e=y("span"),n=B("I don't have an account."),this.h()},l(i){e=w(i,"SPAN",{class:!0});var o=b(e);n=j(o,"I don't have an account."),o.forEach(d),this.h()},h(){E(e,"class","text-blue-600")},m(i,o){N(i,e,o),p(e,n),r||(s=[pe(e,"keypress",t[5]),pe(e,"click",t[15])],r=!0)},p:_e,d(i){i&&d(e),r=!1,lt(s)}}}function vN(t){let e,n,r,s,i;const o=[dN,hN],l=[];function a(u,c){return u[3]?0:1}return e=a(t),n=l[e]=o[e](t),s=new nN({}),{c(){n.c(),r=D(),x(s.$$.fragment)},l(u){n.l(u),r=A(u),G(s.$$.fragment,u)},m(u,c){l[e].m(u,c),N(u,r,c),q(s,u,c),i=!0},p(u,[c]){let f=e;e=a(u),e===f?l[e].p(u,c):(He(),C(l[f],1,1,()=>{l[f]=null}),ze(),n=l[e],n?n.p(u,c):(n=l[e]=o[e](u),n.c()),$(n,1),n.m(r.parentNode,r))},i(u){i||($(n),$(s.$$.fragment,u),i=!0)},o(u){C(n),C(s.$$.fragment,u),i=!1},d(u){l[e].d(u),u&&d(r),H(s,u)}}}function yN(t,e,n){let r,s="signIn",i="",o="";function l(T){n(0,s=T)}function a(T){ot.call(this,t,T)}function u(T){ot.call(this,t,T)}function c(T){ot.call(this,t,T)}function f(T){ot.call(this,t,T)}const h=()=>{l("signIn")},m=()=>{l("signUp")};function g(T){i=T,n(1,i)}function _(T){o=T,n(2,o)}function v(T){i=T,n(1,i)}function I(T){o=T,n(2,o)}const k=()=>{l("signUp")},S=()=>{l("signIn")};return n(3,r=!1),[s,i,o,r,l,a,u,c,f,h,m,g,_,v,I,k,S]}class wN extends De{constructor(e){super(),Ae(this,e,yN,vN,$e,{})}}function bN(t,{from:e,to:n},r={}){const s=getComputedStyle(t),i=s.transform==="none"?"":s.transform,[o,l]=s.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*o/n.width-(n.left+o),u=e.top+e.height*l/n.height-(n.top+l),{delay:c=0,duration:f=m=>Math.sqrt(m)*120,easing:h=Zg}=r;return{delay:c,duration:hn(f)?f(Math.sqrt(a*a+u*u)):f,easing:h,css:(m,g)=>{const _=g*a,v=g*u,I=m+g*e.width/n.width,k=m+g*e.height/n.height;return`transform: ${i} translate(${_}px, ${v}px) scale(${I}, ${k});`}}}function zh(t,e,n){const r=t.slice();return r[2]=e[n],r}function Kh(t){let e,n;return{c(){e=y("i"),this.h()},l(r){e=w(r,"I",{class:!0}),b(e).forEach(d),this.h()},h(){E(e,"class",n=Jt(t[2].icon)+" svelte-1pwolby")},m(r,s){N(r,e,s)},p(r,s){s&2&&n!==(n=Jt(r[2].icon)+" svelte-1pwolby")&&E(e,"class",n)},d(r){r&&d(e)}}}function Gh(t,e){let n,r,s=e[2].message+"",i,o,l,a,u,c,f=_e,h,m=e[2].icon&&Kh(e);return{key:t,first:null,c(){n=y("div"),r=y("div"),i=B(s),l=D(),m&&m.c(),a=D(),this.h()},l(g){n=w(g,"DIV",{class:!0,style:!0});var _=b(n);r=w(_,"DIV",{class:!0});var v=b(r);i=j(v,s),v.forEach(d),l=A(_),m&&m.l(_),a=A(_),_.forEach(d),this.h()},h(){E(r,"class",o=Jt(e[2].type!="success"&&e[2].type!="info"?"content":"oppositeContent")+" svelte-1pwolby"),E(n,"class","toast px-3 text-center rounded-full shadow-2xl text-sm border-solid border-black svelte-1pwolby"),ht(n,"background",e[0][e[2].type]),this.first=n},m(g,_){N(g,n,_),p(n,r),p(r,i),p(n,l),m&&m.m(n,null),p(n,a),h=!0},p(g,_){e=g,(!h||_&2)&&s!==(s=e[2].message+"")&&me(i,s),(!h||_&2&&o!==(o=Jt(e[2].type!="success"&&e[2].type!="info"?"content":"oppositeContent")+" svelte-1pwolby"))&&E(r,"class",o),e[2].icon?m?m.p(e,_):(m=Kh(e),m.c(),m.m(n,a)):m&&(m.d(1),m=null),(!h||_&3)&&ht(n,"background",e[0][e[2].type])},r(){c=n.getBoundingClientRect()},f(){a_(n),f(),l_(n,c)},a(){f(),f=u_(n,c,bN,{})},i(g){h||(Qs(()=>{h&&(u||(u=dc(n,Oh,{y:50},!0)),u.run(1))}),h=!0)},o(g){u||(u=dc(n,Oh,{y:50},!1)),u.run(0),h=!1},d(g){g&&d(n),m&&m.d(),g&&u&&u.end()}}}function EN(t){let e,n=[],r=new Map,s,i=t[1];const o=l=>l[2].id;for(let l=0;l<i.length;l+=1){let a=zh(t,i,l),u=o(a);r.set(u,n[l]=Gh(u,a))}return{c(){e=y("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var a=b(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(d),this.h()},h(){E(e,"class","notifications svelte-1pwolby")},m(l,a){N(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);s=!0},p(l,[a]){if(a&3){i=l[1],He();for(let u=0;u<n.length;u+=1)n[u].r();n=o_(n,a,o,1,l,i,r,e,c_,Gh,null,zh);for(let u=0;u<n.length;u+=1)n[u].a();ze()}},i(l){if(!s){for(let a=0;a<i.length;a+=1)$(n[a]);s=!0}},o(l){for(let a=0;a<n.length;a+=1)C(n[a]);s=!1},d(l){l&&d(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function IN(t,e,n){let r;Ge(t,Lr,i=>n(1,r=i));let{themes:s={danger:"#FF5067",success:"#39F179",warning:"#FF9200",info:"#00B3FF",default:"#9FAFA1"}}=e;return t.$$set=i=>{"themes"in i&&n(0,s=i.themes)},[s,r]}class TN extends De{constructor(e){super(),Ae(this,e,IN,EN,$e,{themes:0})}}const{window:s_}=f_;function kN(t){let e,n;return e=new Z$({}),{c(){x(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,s){q(e,r,s),n=!0},p:_e,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){C(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function SN(t){let e,n,r,s,i,o;const l=[AN,DN],a=[];function u(c,f){return c[1]?0:1}return r=u(t),s=a[r]=l[r](t),{c(){e=B(t[1]),n=D(),s.c(),i=Ee()},l(c){e=j(c,t[1]),n=A(c),s.l(c),i=Ee()},m(c,f){N(c,e,f),N(c,n,f),a[r].m(c,f),N(c,i,f),o=!0},p(c,f){(!o||f&2)&&me(e,c[1]);let h=r;r=u(c),r===h?a[r].p(c,f):(He(),C(a[h],1,1,()=>{a[h]=null}),ze(),s=a[r],s?s.p(c,f):(s=a[r]=l[r](c),s.c()),$(s,1),s.m(i.parentNode,i))},i(c){o||($(s),o=!0)},o(c){C(s),o=!1},d(c){c&&d(e),c&&d(n),a[r].d(c),c&&d(i)}}}function DN(t){let e=JSON.stringify(t[3])+"",n,r,s,i;return s=new wN({}),{c(){n=B(e),r=D(),x(s.$$.fragment)},l(o){n=j(o,e),r=A(o),G(s.$$.fragment,o)},m(o,l){N(o,n,l),N(o,r,l),q(s,o,l),i=!0},p(o,l){(!i||l&8)&&e!==(e=JSON.stringify(o[3])+"")&&me(n,e)},i(o){i||($(s.$$.fragment,o),i=!0)},o(o){C(s.$$.fragment,o),i=!1},d(o){o&&d(n),o&&d(r),H(s,o)}}}function AN(t){let e,n,r,s;const i=[NN,$N],o=[];function l(a,u){return a[2]?0:1}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ee()},l(a){n.l(a),r=Ee()},m(a,u){o[e].m(a,u),N(a,r,u),s=!0},p(a,u){let c=e;e=l(a),e===c?o[e].p(a,u):(He(),C(o[c],1,1,()=>{o[c]=null}),ze(),n=o[e],n?n.p(a,u):(n=o[e]=i[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){s||($(n),s=!0)},o(a){C(n),s=!1},d(a){o[e].d(a),a&&d(r)}}}function $N(t){let e,n,r,s,i,o,l,a,u,c;return{c(){e=y("div"),n=y("span"),r=B("You're offline!"),s=D(),i=y("div"),o=y("span"),l=B("Please reconnect to the internet and refresh the page."),a=D(),u=y("h1"),c=B("CLIQ MINI SERVICE"),this.h()},l(f){e=w(f,"DIV",{class:!0});var h=b(e);n=w(h,"SPAN",{class:!0});var m=b(n);r=j(m,"You're offline!"),m.forEach(d),h.forEach(d),s=A(f),i=w(f,"DIV",{class:!0});var g=b(i);o=w(g,"SPAN",{});var _=b(o);l=j(_,"Please reconnect to the internet and refresh the page."),_.forEach(d),g.forEach(d),a=A(f),u=w(f,"H1",{style:!0,class:!0});var v=b(u);c=j(v,"CLIQ MINI SERVICE"),v.forEach(d),this.h()},h(){E(n,"class","text-4xl font-bold"),E(e,"class","flex justify-center mt-32"),E(i,"class","flex justify-center"),ht(u,"position","fixed"),ht(u,"bottom","30px"),E(u,"class","text-slate-300 text-lg font-extrabold ")},m(f,h){N(f,e,h),p(e,n),p(n,r),N(f,s,h),N(f,i,h),p(i,o),p(o,l),N(f,a,h),N(f,u,h),p(u,c)},p:_e,i:_e,o:_e,d(f){f&&d(e),f&&d(s),f&&d(i),f&&d(a),f&&d(u)}}}function NN(t){let e,n,r,s,i,o,l,a,u,c,f,h;return n=new gn({props:{src:t[3].profile??"https://images.unsplash.com/photo-1605980776566-0486c3ac7617?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8YmxhY2slMjBwZXJzb258ZW58MHx8MHx8&w=1000&q=80"}}),s=new va({props:{name:t[3].name}}),l=new X$({}),f=new W$({}),{c(){e=y("div"),x(n.$$.fragment),r=D(),x(s.$$.fragment),i=D(),o=y("div"),x(l.$$.fragment),a=D(),u=y("div"),c=D(),x(f.$$.fragment),this.h()},l(m){e=w(m,"DIV",{class:!0});var g=b(e);G(n.$$.fragment,g),r=A(g),G(s.$$.fragment,g),g.forEach(d),i=A(m),o=w(m,"DIV",{class:!0});var _=b(o);G(l.$$.fragment,_),_.forEach(d),a=A(m),u=w(m,"DIV",{class:!0});var v=b(u);v.forEach(d),c=A(m),G(f.$$.fragment,m),this.h()},h(){E(e,"class","pl-10 flex justify-end pr-10"),E(o,"class","pl-96 pt-10 px-16"),E(u,"class","pl-96")},m(m,g){N(m,e,g),q(n,e,null),p(e,r),q(s,e,null),N(m,i,g),N(m,o,g),q(l,o,null),N(m,a,g),N(m,u,g),N(m,c,g),q(f,m,g),h=!0},p(m,g){const _={};g&8&&(_.src=m[3].profile??"https://images.unsplash.com/photo-1605980776566-0486c3ac7617?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8YmxhY2slMjBwZXJzb258ZW58MHx8MHx8&w=1000&q=80"),n.$set(_);const v={};g&8&&(v.name=m[3].name),s.$set(v)},i(m){h||($(n.$$.fragment,m),$(s.$$.fragment,m),$(l.$$.fragment,m),$(f.$$.fragment,m),h=!0)},o(m){C(n.$$.fragment,m),C(s.$$.fragment,m),C(l.$$.fragment,m),C(f.$$.fragment,m),h=!1},d(m){m&&d(e),H(n),H(s),m&&d(i),m&&d(o),H(l),m&&d(a),m&&d(u),m&&d(c),H(f,m)}}}function RN(t){let e,n,r,s,i,o,l,a,u;Qs(t[5]);const c=[SN,kN],f=[];function h(m,g){return m[0]>1e3?0:1}return r=h(t),s=f[r]=c[r](t),o=new TN({}),{c(){e=B(t[1]),n=D(),s.c(),i=D(),x(o.$$.fragment)},l(m){e=j(m,t[1]),n=A(m),s.l(m),i=A(m),G(o.$$.fragment,m)},m(m,g){N(m,e,g),N(m,n,g),f[r].m(m,g),N(m,i,g),q(o,m,g),l=!0,a||(u=pe(s_,"resize",t[5]),a=!0)},p(m,[g]){(!l||g&2)&&me(e,m[1]);let _=r;r=h(m),r===_?f[r].p(m,g):(He(),C(f[_],1,1,()=>{f[_]=null}),ze(),s=f[r],s?s.p(m,g):(s=f[r]=c[r](m),s.c()),$(s,1),s.m(i.parentNode,i))},i(m){l||($(s),$(o.$$.fragment,m),l=!0)},o(m){C(s),C(o.$$.fragment,m),l=!1},d(m){m&&d(e),m&&d(n),f[r].d(m),m&&d(i),H(o,m),a=!1,u()}}}function CN(t,e,n){let r,s,i,o,l;Ge(t,dn,f=>n(3,i=f)),Ge(t,ko,f=>n(4,o=f)),Ge(t,rn,f=>n(6,l=f));let a;function u(){console.log("log"),s$().then(f=>{f!=null&&(TS(l.BusinessId),eD(l.BusinessId),Jg(l.BusinessId),A$(l.BusinessId))})}Nr(f=>{rs.update(h=>({size:a})),r&&typeof window<"u"&&(i.name==null&&o.code=="authorized"&&dn.update(h=>JSON.parse(i)),u())});function c(){n(0,a=s_.innerWidth)}return t.$$.update=()=>{t.$$.dirty&16&&n(1,r=typeof window<"u"&&o!=null&&o.length!=0?o.code=="authorized":!1)},n(2,s=typeof window<"u"?navigator.onLine:!1),[a,r,s,i,o,c]}class MN extends De{constructor(e){super(),Ae(this,e,CN,RN,$e,{})}}export{MN as default};
